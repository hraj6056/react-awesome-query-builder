(self.webpackChunk_react_awesome_query_builder_examples=self.webpackChunk_react_awesome_query_builder_examples||[]).push([[554],{84723:(e,t,r)=>{"use strict";r.d(t,{b$:()=>Ie});var n=r(6297),o=r(29901),i=r(65633),l=r(67609),a=r(934),u=r(69076),c=r(40795),s=r(63050),p=r(37592),f=r(88356),d=r(30207),v=r(38341),g=r(52107),h=r(6901),m=r.n(h),y=r(30420),b=r(45016),O=r(73352),S=r.n(O),w=r(33235),F=w.cQ.ListUtils.mapListValues,j=r(613),C=r(49639),E=["width"],L=r(27121),k=r(33079),P=["width"],T=r(13865),V=r(32720),_=r(76547),Z=r(7654),I=r(68195),D=w.cQ.ListUtils.mapListValues,R=r(97351),x=r(22972),A=r(19473),N=r(91138),M=r(87943),q=r(49289),W=r(18074),B=r(20651),G=["width"];function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U=w.Px.h,J=o.createElement(W.Z,{fontSize:"small",style:{marginRight:10,marginTop:4}}),H=o.createElement(B.Z,{fontSize:"small",style:{marginRight:10,marginTop:4}}),Y=[];const K=function(e){var t=e.allowCustomValues,r=e.multiple,n=e.disableClearable,i=e.value,l=e.customProps,a=e.readonly,u=e.config,c=e.filterOptionsConfig,d=e.errorText,v={stringify:(0,o.useCallback)((function(e){return u.settings.listKeysForSearch.map((function(t){return"string"==typeof e[t]?e[t]:""})).join("\0")}),[u])},g=(0,R.D)(c||v),h=U(e,{debounceTimeout:100,multiple:r,uif:"mui"}),m=h.open,y=h.onOpen,b=h.onClose,O=h.onChange,w=h.onInputChange,F=h.inputValue,C=h.options,E=h.isInitialLoading,L=h.isLoading,k=h.aPlaceholder,P=h.extendOptions,T=h.getOptionSelected,V=h.getOptionDisabled,_=h.getOptionIsCustom,Z=h.getOptionLabel,I=h.selectedListValue,D=u.settings,W=D.defaultSelectWidth,B=D.defaultSearchWidth,$=l||{},K=$.width,Q=(0,j.Z)($,G),X=Q.input||{},ee=X.width||B;X=S()(X,["width"]);var te=S()(Q,["showSearch","showCheckboxes"]),re=K||W,ne={width:r?void 0:re,minWidth:re},oe=a?"":k,ie=null!=i?i:r?Y:null,le=(0,q.Z)((function(e){return{input:{minWidth:ee+" !important"}}})),ae=(0,q.Z)((function(e){return{root:{height:"auto"},label:{marginTop:"3px",marginBottom:"3px"}}}))(),ue=le();return o.createElement(f.Z,{fullWidth:!0},o.createElement(x.ZP,(0,s.Z)({disableClearable:n,disableCloseOnSelect:r,fullWidth:!0,multiple:r,style:ne,classes:ue,freeSolo:t,loading:E,open:m,onOpen:y,onClose:b,inputValue:F,onInputChange:w,label:oe,onChange:O,value:ie,getOptionSelected:T,disabled:a,readOnly:a,options:C,groupBy:function(e){return null==e?void 0:e.groupTitle},getOptionLabel:Z,getOptionDisabled:V,renderInput:function(e){var t,n=!r&&!m,i=null!==(t=null==I?void 0:I.title)&&void 0!==t?t:"",l=n?i:r&&!m?"":null!=F?F:"";return o.createElement(p.Z,(0,s.Z)({},e,{inputProps:z(z({},e.inputProps),{},{value:l}),InputProps:z(z({},e.InputProps),{},{readOnly:a,endAdornment:o.createElement(o.Fragment,null,L?o.createElement(A.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment)}),disabled:a,placeholder:oe,error:!!d},X))},renderTags:function(e,t){return e.map((function(e,r){var n=_(e)?"customSelectOption":void 0,i=o.createElement("span",{className:n},Z(e));return o.createElement(N.Z,(0,s.Z)({key:e.value,classes:ae,label:i,size:"small"},t({index:r})))}))},renderOption:function(e,t){var n=t.selected,i=e.title,l=e.renderTitle,a=(e.value,e.specialValue),u=e.isHidden,c=_(e)?"customSelectOption":void 0,s=o.createElement("span",{className:c},l||i);return u?null:r?a?o.createElement(M.Z,null,l||i):o.createElement(M.Z,null,n?H:J,s):a?o.createElement(o.Fragment,null,l||i):o.createElement(o.Fragment,null,s)},filterOptions:function(e,t){var r=g(e,t);return P(r)}},te)))};var Q=r(73877),X=["items","selectedKey","setField","isValueField"];function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re={key:"_value2",path:"value",label:"title",altLabel:"_altLabel",tooltip:"tooltip",grouplabel:"groupTitle"},ne=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.map((function(t){var n=t.items,i=t.path,l=t.key,a=t.label,u=t.altLabel,c=t.disabled,s=t.grouplabel,p=t.matchesType,f=t.tooltip,d="  ".repeat(r);return n?e(n,r+1):{title:a,renderTitle:p?o.createElement("b",null,d+a):d+a,value:i,disabled:c,groupTitle:r>0?d+s:null,tooltip:f,_value2:l,_altLabel:u}})).flat(1/0)},oe=function(e,t){var r=e.items,n=e.selectedKey,i=e.setField,l=e.isValueField,a=(0,j.Z)(e,X),u=ne(r),c=n,s={stringify:(0,o.useCallback)((function(e){return t.settings.fieldItemKeysForSearch.map((function(e){return re[e]})).map((function(t){return"string"==typeof e[t]?e[t]:""})).join("\0")}),[t])};return te(te({},a),{},{listValues:u,setValue:function(e,t){if(e||l)return i(e)},filterOptionsConfig:s,allowCustomValues:!1,multiple:!1,disableClearable:!l,value:c})},ie=r(17267),le=r(69354),ae=r(89296),ue=r(77799),ce=w.cQ.DragIcon,se={delGroup:o.createElement(ie.Z,null),delRuleGroup:o.createElement(ie.Z,null),delRule:o.createElement(ie.Z,null),addRuleGroup:o.createElement(le.Z,null),addRuleGroupExt:o.createElement(le.Z,null),addRule:o.createElement(le.Z,null),addGroup:o.createElement(le.Z,null),drag:o.createElement(ae.Z,null)},pe={drag:"inherit"},fe=r(83374),de=r(64002),ve={addRuleGroup:!0,addRuleGroupExt:!0,delGroup:!0,delRuleGroup:!0,delRule:!0},ge={addRule:"primary",addGroup:"primary",delGroup:"secondary",delRuleGroup:"secondary",delRule:"secondary"},he=r(7207),me=r(30117),ye=r(92491),be=r(24539),Oe=r(71939),Se=r(62978),we=r(68e3),Fe=r(79865),je=r(60801),Ce=(0,q.Z)((function(e){return{paper:{padding:e.spacing(1)}}}));const Ee={MaterialTextWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),i=e.placeholder,l=e.customProps,a=e.maxLength,u=t||"";return o.createElement(f.Z,null,o.createElement(p.Z,(0,s.Z)({value:u,placeholder:n?"":i,InputProps:{readOnly:n},inputProps:{maxLength:a},disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)}},l)))},MaterialTextAreaWidget:function(e){var t=e.value,r=e.setValue,n=e.config,i=e.readonly,l=e.placeholder,a=e.customProps,u=e.maxLength,c=e.maxRows,d=e.fullWidth,v=n.settings.defaultMaxRows,g=t||"";return o.createElement(f.Z,{fullWidth:d},o.createElement(p.Z,(0,s.Z)({fullWidth:d,maxRows:c||v,multiline:!0,value:g,placeholder:i?"":l,InputProps:{readOnly:i},inputProps:{maxLength:u},disabled:i,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)}},a)))},MaterialDateWidget:function(e){var t,r,n,i=e.value,l=e.setValue,a=e.readonly,u=e.customProps,c=e.dateFormat,p=e.valueFormat,v=e.placeholder,g=(null!==(t=window)&&void 0!==t&&t.matchMedia?null===(r=(n=window).matchMedia)||void 0===r?void 0:r.call(n,"(pointer:fine), (pointer:none)").matches:e.useKeyboard)?d.e:d.M;return o.createElement(f.Z,null,o.createElement(g,(0,s.Z)({readOnly:a,disabled:a,placeholder:a?"":v,format:c,value:i||null,onChange:function(e){l(function(e){return e&&e.isValid()?e.format(p):void 0}(e))}},u)))},MaterialDateTimeWidget:function(e){var t,r,n,i=e.value,l=e.setValue,a=e.use12Hours,u=e.readonly,c=e.placeholder,p=e.dateFormat,d=e.timeFormat,g=e.valueFormat,h=e.customProps,m=(null!==(t=window)&&void 0!==t&&t.matchMedia?null===(r=(n=window).matchMedia)||void 0===r?void 0:r.call(n,"(pointer:fine), (pointer:none)").matches:e.useKeyboard)?v.B:v.x,y=p+" "+d;return o.createElement(f.Z,null,o.createElement(m,(0,s.Z)({readOnly:u,disabled:u,ampm:!!a,placeholder:u?"":c,format:y,value:i||null,onChange:function(e){l(function(e){return e&&e.isValid()?e.format(g):void 0}(e))}},h)))},MaterialTimeWidget:function(e){var t,r,n,i=e.value,l=e.setValue,a=e.use12Hours,u=e.readonly,c=e.placeholder,p=e.timeFormat,d=e.valueFormat,v=e.customProps,h=(null!==(t=window)&&void 0!==t&&t.matchMedia?null===(r=(n=window).matchMedia)||void 0===r?void 0:r.call(n,"(pointer:fine), (pointer:none)").matches:e.useKeyboard)?g.e:g.j,y=-1!=p.indexOf(":ss"),b=i?m()(i,p):null;return o.createElement(f.Z,null,o.createElement(h,(0,s.Z)({readOnly:u,disabled:u,ampm:!!a,placeholder:u?"":c,format:p,value:b||null,onChange:function(e){l(function(e){return e&&e.isValid()?e.format(d):void 0}(e))},views:y?["hours","minutes","seconds"]:["hours","minutes"]},v)))},MaterialSelectWidget:function(e){var t=e.listValues,r=e.value,n=e.setValue,i=(e.allowCustomValues,e.readonly),l=e.placeholder,a=e.customProps,u=null!=r;return o.createElement(f.Z,null,o.createElement(y.Z,(0,s.Z)({autoWidth:!0,displayEmpty:!0,label:i?"":l,onChange:function(e){void 0!==e.target.value&&n(e.target.value)},value:u?r:"",disabled:i,readOnly:i,renderValue:function(e){return i||null!=e?function(e){return F(t,(function(t){var r=t.title;return t.value===e?r:null})).filter((function(e){return null!==e})).shift()}(e):l}},S()(a,["showSearch","input"])),F(t,(function(e){var t=e.title,r=e.value;return o.createElement(b.Z,{key:r,value:r},t)}))))},MaterialNumberWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),i=e.min,l=e.max,a=e.step,u=e.placeholder,c=e.customProps,d=null==t?"":t;return o.createElement(f.Z,null,o.createElement(p.Z,(0,s.Z)({type:"number",value:d,placeholder:n?"":u,InputProps:{readOnly:n},inputProps:{min:i,max:l,step:a},disabled:n,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)}},c)))},MaterialSliderWidget:function(e){var t=e.config,r=e.placeholder,n=e.customProps,i=e.value,l=e.setValue,a=e.min,u=e.max,c=e.step,d=e.marks,v=e.readonly,g=t.settings.defaultSliderWidth,h=n||{},m=h.width,y=(0,j.Z)(h,E),b=y.input||{},O=y.slider||y,S="number"==typeof i?i:"",w="number"==typeof i?i:null,F=!!d&&Object.keys(d).map((function(e){return{value:e,label:d[e]}})),L=o.createElement(p.Z,(0,s.Z)({type:"number",value:S,placeholder:r,InputProps:{readOnly:v},inputProps:{min:a,max:u,step:c},disabled:v,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),l(t)},onBlur:function(){i<a?l(a):i>u&&l(u)}},b)),k=o.createElement(C.Z,(0,s.Z)({value:w,onChange:function(e,t){l(t)},disabled:v,min:a,max:u,step:c,marks:F,valueLabelDisplay:"auto"},O)),P={marginLeft:"5px",paddingLeft:"12px",marginBottom:F&&"-16px",width:m||g};return o.createElement(f.Z,null,o.createElement("div",{style:{display:"inline-flex",alignItems:"center",flexWrap:"wrap"}},o.createElement("div",{style:{marginLeft:"5px"}},L),o.createElement("div",{style:P},k)))},MaterialRangeWidget:function(e){var t=e.config,r=e.placeholders,n=e.customProps,i=e.value,l=e.setValue,a=e.min,u=e.max,c=e.step,d=e.marks,v=e.readonly,g=e.textSeparators,h=t.settings.defaultSliderWidth;(0,o.useEffect)((function(){var t=e.value||[void 0,void 0],r=(0,k.Z)(t,2),n=r[0],o=r[1];!e.value||null!=n&&null!=o||setTimeout((function(){var e=n||o;l([e,e])}),1)}),[]);var m=function(){i&&(i[0]<a?l([a,i[1]]):i[1]>u&&l([i[0],u]))},y=n||{},b=y.width,O=(0,j.Z)(y,P),S=O.input||{},w=O.slider||O,F=!!d&&Object.keys(d).map((function(e){return{value:e,label:d[e]}})),E=i?(0,L.Z)(i):[void 0,void 0],T=(0,k.Z)(E,2),V=T[0],_=T[1];null==V&&(V="",E[0]=0),null==_&&(_="",E[1]=0);var Z=o.createElement(p.Z,(0,s.Z)({type:"number",value:V,placeholder:r[0],InputProps:{readOnly:v},inputProps:{min:a,max:u,step:c},disabled:v,onChange:function(t){var r=t.target.value;r=""===r||null==r?void 0:Number(r);var n=e.value?(0,L.Z)(e.value):[void 0,void 0];n[0]=r,l(n)},onBlur:m},S)),I=o.createElement(p.Z,(0,s.Z)({type:"number",value:_,placeholder:r[1],InputProps:{readOnly:v},inputProps:{min:a,max:u,step:c},disabled:v,onChange:function(t){var r=t.target.value;r=""===r||null==r?void 0:Number(r);var n=e.value?(0,L.Z)(e.value):[void 0,void 0];n[1]=r,l(n)},onBlur:m},S)),D=o.createElement(C.Z,(0,s.Z)({value:E,onChange:function(e,t){l(t)},disabled:v,min:a,max:u,step:c,marks:F,valueLabelDisplay:"auto"},w)),R={marginLeft:"5px"},x={marginLeft:"5px",paddingLeft:"12px",marginBottom:F&&"-16px",width:b||h};return o.createElement(f.Z,null,o.createElement("div",{style:{display:"inline-flex",flexWrap:"wrap"}},o.createElement("div",{style:R},Z),o.createElement("div",{className:"widget--sep"},o.createElement("span",null,g[1])),o.createElement("div",{style:R},I),o.createElement("div",{style:x},D)))},MaterialBooleanWidget:function(e){var t=e.customProps,r=e.value,n=e.setValue,i=e.labelYes,l=e.labelNo,a=e.readonly;return o.createElement(f.Z,null,o.createElement(_.Z,{component:"div"},o.createElement(V.Z,{component:"label",container:!0,alignItems:"center",spacing:0},o.createElement(V.Z,{item:!0,component:"span"},l),o.createElement(V.Z,{item:!0,component:"span"},o.createElement(T.Z,(0,s.Z)({checked:!!r,onChange:function(){n(!r)},disabled:a},t))),o.createElement(V.Z,{item:!0,component:"span"},i))))},MaterialMultiSelectWidget:function(e){var t,r=e.listValues,n=e.value,i=e.setValue,l=(e.allowCustomValues,e.readonly),a=e.placeholder,u=e.customProps,c=null!=n&&n.length>0;return o.createElement(f.Z,null,o.createElement(y.Z,(0,s.Z)({multiple:!0,autoWidth:!0,displayEmpty:!0,label:l?"":a,onChange:function(e){void 0!==e.target.value&&i(e.target.value)},value:c?n:[],disabled:l,readOnly:l,renderValue:function(e){if(!l&&!e.length)return a;var t=D(r,(function(t){var r=t.title,n=t.value;return e.indexOf(n)>-1?r:null})).filter((function(e){return null!==e}));return t.join(", ")}},S()(u,["showSearch","input","showCheckboxes"])),(t=c?n:[],D(r,(function(e){var r=e.title,n=e.value;return o.createElement(b.Z,{key:n,value:n},o.createElement(Z.Z,{checked:t.indexOf(n)>-1}),o.createElement(I.Z,{primary:r}))})))))},MaterialAutocompleteWidget:K,MaterialFieldSelect:function(e){var t=e.items,r=e.setField,n=e.selectedKey,i=e.readonly,l=e.placeholder,a=e.errorText,u=null!=n;return o.createElement(f.Z,null,o.createElement(y.Z,{error:!!a,autoWidth:!0,displayEmpty:!0,label:l,onChange:function(e){void 0!==e.target.value&&r(e.target.value)},value:u?n:"",disabled:i,renderValue:function(e){return i||e?function t(r){return r.map((function(r){return r.items?t(r.items):r.path===e?r.label:null}))}(t).filter((function(e){return Array.isArray(e)?e.some((function(e){return null!==e})):null!==e})).pop():l}},function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.map((function(t){var n=t.items,i=t.path,l=t.label,a=t.disabled,u=t.matchesType,c="  ".repeat(r);return n?[o.createElement(Q.Z,{disabled:a,key:i,disableSticky:!0},c&&o.createElement("span",null,c),l),e(n,r+1)]:o.createElement(b.Z,{disabled:a,key:i,value:i},c&&o.createElement("span",null,c),u?o.createElement("b",null,l):l)}))}(t)))},MaterialFieldAutocomplete:function(e){return o.createElement(K,oe(e,e.config))},MaterialIcon:function(e){var t=e.type,r=e.readonly,n=se[t];return n||"drag"!==t?"drag"===t?o.createElement(ue.Z,{size:"small",disabled:r,color:pe[t]},n):n:o.createElement(ce,null)},MaterialButton:function(e){var t=e.type,r=e.label,n=e.onClick,i=e.readonly,l=e.renderIcon,a=null==l?void 0:l({type:t,readonly:i});return!r||ve[t]?o.createElement(de.Z,{size:"small",disabled:i,onClick:n,color:ge[t]},a):o.createElement(fe.Z,{size:"small",disabled:i,onClick:n,color:ge[t],startIcon:a},r)},MaterialButtonGroup:function(e){var t=e.children;return e.config,o.createElement(o.Fragment,null,t)},MaterialConjs:function(e){var t=e.id,r=e.not,n=e.setNot,i=e.conjunctionOptions,l=e.setConjunction,a=e.disabled,u=e.readonly,c=e.config,s=e.showNot,p=e.notLabel,d=Object.keys(i).length,v=a,g=c.settings.forceShowConj||d>1&&!v,h=function(e){return l(e)};return o.createElement(f.Z,null,o.createElement(he.Z,{disableElevation:!0,variant:"contained",size:"small",disabled:u},s&&(u&&!r?null:o.createElement(fe.Z,{key:t,id:t+"__not",color:r?"secondary":"default",onClick:function(e){return n(e)}.bind(null,!r),disabled:u},p||"NOT")),g&&Object.keys(i).map((function(e){var t=i[e],r=t.id,n=(t.name,t.label),c=t.checked,s=l.isDummyFn?"__dummy":"";return!u&&!a||c?o.createElement(fe.Z,{key:r+s,id:r+s,color:c?"primary":"default",value:e,onClick:h.bind(null,e),disabled:u||a},n):null}))))},MaterialSwitch:function(e){var t=e.value,r=e.setValue,n=e.label,i=e.checkedLabel,l=e.hideLabel,a=e.id,u=e.config,c=e.type,s=(u.settings.renderSize,function(){return r(!t)}),p=c,f=t&&i||n,d=t?o.createElement(be.Z,null):o.createElement(ye.Z,null);return"lock"==c?l?o.createElement(de.Z,{key:a+p,onClick:s,size:"small"},d):o.createElement(fe.Z,{key:a+p,onClick:s,size:"small",startIcon:d},f):o.createElement(me.Z,{control:o.createElement(T.Z,{checked:!!t,size:"small",onChange:function(e){return r(e.target.checked)}}),label:f})},MaterialValueSources:function(e){var t=e.valueSources,r=e.valueSrc,n=e.title,i=e.setValueSrc,l=(e.readonly,o.useState(null)),a=(0,k.Z)(l,2),u=a[0],c=a[1],s=Ce(),p=function(){c(null)},d=Boolean(u);return o.createElement("div",null,o.createElement(de.Z,{size:"small",onClick:function(e){u?p():function(e){c(e.currentTarget)}(e)}},o.createElement(Oe.Z,null)),o.createElement(Se.ZP,{open:d,anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:p,classes:{paper:s.paper},disablePortal:!0},o.createElement(f.Z,{component:"fieldset"},o.createElement(je.Z,{component:"legend"},n),o.createElement(Fe.Z,{value:r||"value",onChange:function(e){void 0!==e.target.value&&(i(e.target.value),p())}},function(e){return e.map((function(e){var t=(0,k.Z)(e,2),n=t[0],i=t[1];return o.createElement(me.Z,{key:n,value:n,checked:r==n||!r&&"value"==n,control:o.createElement(we.Z,null),label:i.label})}))}(t)))))},MaterialConfirm:function(e){var t=e.onOk,r=e.okText,n=e.cancelText,o=e.title;(0,e.confirmFn)({description:o||"Are you sure?",title:null,confirmationText:r||"Ok",cancellationText:n||"Cancel"}).then(t).catch((function(){}))},MaterialUseConfirm:a.N,MaterialProvider:function(e){var t=e.config,r=e.children,n=t.settings.theme||{},s=t.settings.locale||{},p=n.material,f=s.material,d=p||f?(0,i.Z)(p,f):null,v=o.createElement("div",{className:"mui"},r),g=o.createElement(u.M,{utils:c.Z},o.createElement(a.W,null,v));return d?o.createElement(l.Z,{theme:d},g):g}};function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pe=ke(ke({},w.I4.settings),{},{renderField:function(e,t){var r,n=t.RCE,o=t.W,i=o.MaterialFieldAutocomplete,l=o.MaterialFieldSelect;return null!=e&&null!==(r=e.customProps)&&void 0!==r&&r.showSearch?n(i,e):n(l,e)},renderOperator:function(e,t){return(0,t.RCE)(t.W.MaterialFieldSelect,e)},renderFunc:function(e,t){return(0,t.RCE)(t.W.MaterialFieldSelect,e)},renderConjs:function(e,t){return(0,t.RCE)(t.W.MaterialConjs,e)},renderSwitch:function(e,t){return(0,t.RCE)(t.W.MaterialSwitch,e)},renderButton:function(e,t){return(0,t.RCE)(t.W.MaterialButton,e)},renderIcon:function(e,t){return(0,t.RCE)(t.W.MaterialIcon,e)},renderButtonGroup:function(e,t){return(0,t.RCE)(t.W.MaterialButtonGroup,e)},renderValueSources:function(e,t){return(0,t.RCE)(t.W.MaterialValueSources,e)},renderFieldSources:function(e,t){return(0,t.RCE)(t.W.MaterialValueSources,e)},renderProvider:function(e,t){return(0,t.RCE)(t.W.MaterialProvider,e)},renderConfirm:function(e,t){return(0,t.W.MaterialConfirm)(e)},useConfirm:function(e){return(0,e.W.MaterialUseConfirm)()}}),Te=ke(ke({},w.I4.widgets),{},{text:ke(ke({},w.I4.widgets.text),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialTextWidget,e)}}),textarea:ke(ke({},w.I4.widgets.textarea),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialTextAreaWidget,e)}}),number:ke(ke({},w.I4.widgets.number),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialNumberWidget,e)}}),multiselect:ke(ke({},w.I4.widgets.multiselect),{},{factory:function(e,t){var r=t.RCE,n=t.W,o=n.MaterialAutocompleteWidget,i=n.MaterialMultiSelectWidget;return e.asyncFetch||e.showSearch?r(o,ke(ke({},e),{},{multiple:!0})):r(i,e)}}),select:ke(ke({},w.I4.widgets.select),{},{factory:function(e,t){var r=t.RCE,n=t.W,o=n.MaterialAutocompleteWidget,i=n.MaterialSelectWidget;return e.asyncFetch||e.showSearch?r(o,e):r(i,e)}}),slider:ke(ke({},w.I4.widgets.slider),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialSliderWidget,e)}}),boolean:ke(ke({},w.I4.widgets.boolean),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialBooleanWidget,e)}}),date:ke(ke({},w.I4.widgets.date),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialDateWidget,e)}}),time:ke(ke({},w.I4.widgets.time),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialTimeWidget,e)}}),datetime:ke(ke({},w.I4.widgets.datetime),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialDateTimeWidget,e)}}),rangeslider:ke(ke({},w.I4.widgets.rangeslider),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialRangeWidget,e)}})}),Ve=ke({},w.I4.types),_e=ke(ke({},w.I4.ctx),{},{W:ke(ke({},w.I4.ctx.W),Ee)}),Ze=ke(ke({},w.I4),{},{ctx:_e,types:Ve,widgets:Te,settings:Pe});const Ie=Ze=w.cQ.ConfigMixins.addMixins(Ze,["rangeslider"])},33235:(e,t,r)=>{"use strict";r.d(t,{I4:()=>Fp,gs:()=>g,Ib:()=>Ns,Px:()=>w,AE:()=>pu,cQ:()=>Gp});var n={};r.r(n),r.d(n,{applyToJS:()=>ie,cleanJSX:()=>ae,deepEqual:()=>te,deepFreeze:()=>de,defaultValue:()=>ee,escapeRegExp:()=>le,getFirstDefined:()=>he,getLogger:()=>ge,isDirtyJSX:()=>ue,isImmutable:()=>ne,isJSX:()=>ce,isJsonCompatible:()=>ve,isJsonLogic:()=>se,logger:()=>me,mergeArraysSmart:()=>fe,opDefKeysToOmit:()=>X,shallowEqual:()=>re,sleep:()=>pe,toImmutableList:()=>oe,uuid:()=>q,widgetDefKeysToOmit:()=>Q});var o={};r.r(o),r.d(o,{getItemInListValues:()=>Ce,getListValue:()=>Te,getTitleInListValues:()=>Ee,getValueInListValues:()=>Le,listValuesToArray:()=>je,makeCustomListValue:()=>Fe,mapListValues:()=>ke,searchListValue:()=>Pe,toListValue:()=>we});var i={};r.r(i),r.d(i,{expandTreePath:()=>Ve,expandTreeSubpath:()=>_e,fixEmptyGroupsInTree:()=>Re,fixPathsInTree:()=>De,getFlatTree:()=>xe,getItemByPath:()=>Ze,getLightTree:()=>qe,getSwitchValues:()=>We,getTotalReordableNodesCountInTree:()=>Ae,getTotalRulesCountInTree:()=>Ne,getTreeBadFields:()=>Me,hasChildren:()=>Ge,immutableToJs:()=>ie,isEmptyTree:()=>Be,isImmutable:()=>ne,jsToImmutable:()=>Ke,removeIsLockedInTree:()=>Ie,toImmutableList:()=>oe});var l={};r.r(l),r.d(l,{SqlString:()=>ht,celEscape:()=>Ct,mongoEmptyValue:()=>yt,spelEscape:()=>St,spelFixList:()=>Ot,spelFormatConcat:()=>wt,spelImportConcat:()=>Ft,sqlEmptyValue:()=>mt,stringifyForDisplay:()=>jt});var a={};r.r(a),r.d(a,{_loadFromJsonLogic:()=>ot,_loadFromSpel:()=>er,checkTree:()=>Ue,getTree:()=>$e,isImmutableTree:()=>He,isJsonLogic:()=>se,isTree:()=>Ye,isValidTree:()=>Je,jsToImmutable:()=>Ke,loadFromJsonLogic:()=>nt,loadFromSpel:()=>Xt,loadTree:()=>ze});var u={};r.r(u),r.d(u,{createListFromArray:()=>Ir,defaultConjunction:()=>Pr,defaultGroupConjunction:()=>kr,defaultGroupProperties:()=>Tr,defaultItemProperties:()=>Vr,defaultOperatorOptions:()=>Er,defaultRoot:()=>Zr,defaultRule:()=>_r,defaultRuleProperties:()=>Lr,emptyProperies:()=>Dr,getDefaultField:()=>wr,getDefaultFieldSrc:()=>jr,getDefaultOperator:()=>Cr,getDefaultSubField:()=>Fr});var c={};r.r(c),r.d(c,{completeFuncValue:()=>zr,getCompatibleArgsOnFuncChange:()=>Kr,setArgValue:()=>Hr,setArgValueSrc:()=>Yr,setFunc:()=>Ur});var s={};r.r(s),r.d(s,{completeValue:()=>Fn,filterValueSourcesForField:()=>pn,formatFieldName:()=>vn,getFieldPartsConfigs:()=>an,getFieldPathLabels:()=>ln,getFirstField:()=>en,getFirstOperator:()=>nn,getFuncPathLabels:()=>on,getNewValueForFieldOp:()=>Xr,getOperatorsForField:()=>rn,getOperatorsForType:()=>tn,getValueLabel:()=>un,getValueSourcesForFieldOp:()=>fn,getWidgetForFieldOp:()=>dn,getWidgetsForFieldOp:()=>sn,isCompletedValue:()=>wn,isEmptyGroupChildren:()=>bn,isEmptyItem:()=>gn,isEmptyRuleGroupExtPropertiesAndChildren:()=>mn,isEmptyRuleProperties:()=>On,selectTypes:()=>Qr});var p={};r.r(p),r.d(p,{_widgetDefKeysToOmit:()=>Lo,applyJsonLogic:()=>Tn,cleanJSX:()=>ae,compileConfig:()=>zn,compressConfig:()=>Gn,configKeys:()=>xn,decompressConfig:()=>$n,extendConfig:()=>no,getFieldConfig:()=>jo,getFieldParts:()=>So,getFieldPath:()=>Oo,getFieldPathParts:()=>wo,getFieldRawConfig:()=>fo,getFieldSrc:()=>Fo,getFieldWidgetConfig:()=>Eo,getFuncArgConfig:()=>yo,getFuncConfig:()=>mo,getFuncSignature:()=>ho,getOperatorConfig:()=>Co,isDirtyJSX:()=>ue,isFieldDescendantOfField:()=>bo,isJSX:()=>ce,iterateFields:()=>so,iterateFuncs:()=>co,normalizeField:()=>go});var f={};r.r(f),r.d(f,{ES_6_SYNTAX:()=>Go,ES_7_SYNTAX:()=>Bo,_celFormat:()=>Zo,_mongodbFormat:()=>pi,_spelFormat:()=>Zt,_sqlFormat:()=>Mi,celFormat:()=>_o,compareToSign:()=>Tt,elasticSearchFormat:()=>$o,jsonLogicFormat:()=>Yo,mongodbFormat:()=>si,queryBuilderFormat:()=>Oi,queryString:()=>ki,spelFormat:()=>_t,sqlFormat:()=>Ni});var d={};r.r(d),r.d(d,{fixListValuesGroupOrder:()=>ol,getListValue:()=>Te,listValueToOption:()=>nl,mergeListValues:()=>el,optionToListValue:()=>tl,optionsToListValues:()=>rl,simulateAsyncFetch:()=>Xi});var v={};r.r(v),r.d(v,{Autocomplete:()=>d,ConfigUtils:()=>p,DefaultUtils:()=>u,ExportUtils:()=>l,FuncUtils:()=>c,ListUtils:()=>o,OtherUtils:()=>n,RuleUtils:()=>s,TreeUtils:()=>i,clone:()=>Cn(),compressConfig:()=>Gn,decompressConfig:()=>$n,getSwitchValues:()=>We,moment:()=>z(),uuid:()=>q,validateAndFixTree:()=>Rr,validateTree:()=>xr});var g={};r.r(g),r.d(g,{LINEAR_REGRESSION:()=>cl,LOWER:()=>al,NOW:()=>il,RELATIVE_DATETIME:()=>ll,UPPER:()=>ul});var h={};r.r(h),r.d(h,{addCaseGroup:()=>sa,addDefaultCaseGroup:()=>ca,addGroup:()=>pa,addRule:()=>aa,moveItem:()=>da,removeGroup:()=>fa,removeRule:()=>ua,setTree:()=>la});var m={};r.r(m),r.d(m,{setConjunction:()=>va,setLock:()=>ha,setNot:()=>ga});var y={};r.r(y),r.d(y,{setField:()=>ma,setFieldSrc:()=>ya,setOperator:()=>ba,setOperatorOption:()=>wa,setValue:()=>Oa,setValueSrc:()=>Sa});var b={};r.r(b),r.d(b,{bindActionCreators:()=>ou,isUsingLegacyReactDomRender:()=>eu,liteShouldComponentUpdate:()=>tu,pureShouldComponentUpdate:()=>ru,useOnPropsChanged:()=>nu});var O={};r.r(O),r.d(O,{FuncWidget:()=>Cc,ValueFieldWidget:()=>Hs,VanillaBooleanWidget:()=>Ys,VanillaButton:()=>fp,VanillaButtonGroup:()=>vp,VanillaConjs:()=>sp,VanillaDateTimeWidget:()=>rp,VanillaDateWidget:()=>Xs,VanillaFieldSelect:()=>cp,VanillaIcon:()=>dp,VanillaMultiSelectWidget:()=>op,VanillaNumberWidget:()=>ap,VanillaProvider:()=>yp,VanillaSelectWidget:()=>lp,VanillaSliderWidget:()=>up,VanillaSwitch:()=>hp,VanillaTextAreaWidget:()=>Qs,VanillaTextWidget:()=>Ks,VanillaTimeWidget:()=>ep,VanillaValueSources:()=>gp,vanillaConfirm:()=>mp});var S={};r.r(S),r.d(S,{ProximityOperator:()=>bp});var w={};r.r(w),r.d(w,{h:()=>qp});var F=r(51101),j=r(36838),C=r(85161),E=r(56193),L=r(69097),k=r(16875),P=r(29901),T=r(6297),V=r(33079),_=r(17743),Z=r(27121),I=r(81109),D=r.n(I),R=r(88469),x=r.n(R),A=r(49335),N=r.n(A),M=0;const q=function(){var e=((new Date).getTime().toString(16)+"FF").substr(0,11);return"ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,(function(e){var t="s"===e?Math.floor(16*Math.random()):15&M++;return("x"===e?t:3&t|8).toString(16)}))+e};var W=r(24098),B=r.n(W),G={formatField:function(e,t,r,n,o,i){return i?r:e},fieldSources:["field"],keepInputOnChangeFieldSrc:!0,fieldItemKeysForSearch:["label","path","altLabel","grouplabel"],listKeysForSearch:["title","value"],valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",canReorder:!0,canRegroup:!0,canDeleteLocked:!1,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!0,removeInvalidMultiSelectValuesOnLoad:!0,setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],defaultGroupConjunction:"AND",locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:"Delete",addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"Delete",notLabel:"Not",fieldSourcesPopupTitle:"Select source",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null},$=r(6901),z=r.n($),U=r(41861),J=r.n(U),H=r(73352),Y=r.n(H),K=(r(73656),function(e){return"object"==(0,_.Z)(e)&&null!==e&&!Array.isArray(e)}),Q=["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue","spelImportFuncs","spelImportValue"],X=["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"],ee=function(e,t){return void 0===e?t:e},te=function(e,t){return e===t||(U.Map.isMap(e)?e.equals(t):JSON.stringify(e)==JSON.stringify(t))},re=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||(Array.isArray(e)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var o=0;o<n;o++)if(!(r?re(e[o],t[o],r):e[o]===t[o]))return!1;return!0}(e,t,r):U.Map.isMap(e)?e.equals(t):"object"==(0,_.Z)(e)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),o=Object.keys(t),i=n.length;if(o.length!==i)return!1;for(var l=0;l<i;l++){var a=n[l];if(!(r?re(e[a],t[a],r):e[a]===t[a]))return!1}return!0}(e,t,r):e===t)};var ne=function(e){return"object"===(0,_.Z)(e)&&null!==e&&"function"==typeof e.toJS};function oe(e){return ne(e)?e:new(J().List)(e)}function ie(e){return ne(e)?e.toJS():e}var le=function(e){return e.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")},ae=function e(t){var r;if(t instanceof Array)return t.map((function(t,r){return e(t)}));if("object"===(0,_.Z)(t)&&null!==t&&ue(t)){var n,o=Y()(t,["$$typeof","_owner","_store","ref","key"]);return o.type&&(o.type="string"==typeof(r=o.type)?r:"function"==typeof r?r.name:r),null!=o&&null!==(n=o.props)&&void 0!==n&&n.children&&(o.props.children=e(o.props.children)),o}return t},ue=function(e){return"object"===(0,_.Z)(e)&&null!==e&&!Array.isArray(e)&&Object.keys(e).includes("type")&&Object.keys(e).includes("props")&&Object.keys(e).includes("key")&&Object.keys(e).includes("ref")&&Object.keys(e).includes("$$typeof")},ce=function(e){return"object"===(0,_.Z)(e)&&null!==e&&!Array.isArray(e)&&"string"==typeof e.type&&Object.keys(e).includes("props")},se=function(e){return"object"===(0,_.Z)(e)&&null!==e&&!Array.isArray(e)&&1===Object.keys(e).length};function pe(e){return new Promise((function(t){setTimeout(t,e)}))}function fe(e,t){return e||(e=[]),t||(t=[]),t.map((function(t){return[t,e.indexOf(t)]})).map((function(e,t,r){var n=(0,V.Z)(e,2),o=n[0];if(-1==n[1]){var i=r.slice(t+1),l=r.slice(0,t).reverse().find((function(e){var t=(0,V.Z)(e,2);return t[0],-1!=t[1]})),a=i.find((function(e){var t=(0,V.Z)(e,2);return t[0],-1!=t[1]}));return a?[o,"before",a[0]]:l?[o,"after",l[0]]:[o,"append",null]}return null})).filter((function(e){return null!==e})).reduce((function(e,t){var r=(0,V.Z)(t,3),n=r[0],o=r[1],i=r[2],l=e.indexOf(i);return-1==e.indexOf(n)&&(l>-1?e.splice(l+("after"==o?1:0),0,n):e.splice("append"==o?1/0:0,0,n)),e}),e.slice())}var de=function e(t){"object"===(0,_.Z)(t)&&null!==t&&(Object.keys(t).forEach((function(r){e(t[r])})),Object.freeze(t))},ve=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(K(t)){if(t.var)return n[t.var]=r,!0;if(!K(r))return!1;for(var i in t)if(!e(t[i],r[i],n,[].concat((0,Z.Z)(o),[i])))return!1;return!0}if(Array.isArray(t)){if(!Array.isArray(r))return!1;for(var l=0;l<t.length;l++)if(!e(t[l],r[l],n,[].concat((0,Z.Z)(o),[l])))return!1;return!0}return t===r},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!=e&&e?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}},he=function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0;r<t.length;r++){var n=t[r];if(void 0!==n){e=n;break}}return e},me=ge();function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Se=function(e){return"object"==(0,_.Z)(e)&&null!==e&&!Array.isArray(e)},we=function(e,t){return null==e||""==e?void 0:Se(e)?e:{value:e,title:void 0!==t?t:""+e}},Fe=function(e){var t=we(e);return Se(t)?Oe(Oe({},we(e)),{},{isCustom:!0}):t},je=function(e){if(Array.isArray(e))return e.map((function(e){return we(e)}));if(!Se(e))return e;var t=[];for(var r in e){var n=e[r];t.push(we(r,n))}return t},Ce=function(e,t){return Array.isArray(e)?e.map((function(e){return we(e)})).find((function(e){return""+e.value==""+t})):void 0!==e[t]?we(t,e[t]):void 0},Ee=function(e,t){if(null==e)return t;var r=Ce(e,t);return void 0!==r?r.title:t},Le=function(e,t){if(null==e)return t;var r=Ce(e,t);return void 0!==r?r.value:t},ke=function(e,t){var r=[];if(Array.isArray(e)){var n,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ye(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,l=t(we(i));null!=l&&r.push(l)}}catch(e){o.e(e)}finally{o.f()}}else for(var a in e){var u=t(we(a,e[a]));null!=u&&r.push(u)}return r},Pe=function(e,t){return ke(t,(function(t){return-1!="".concat(t.value).indexOf(e)||-1!=t.title.indexOf(e)?t:null})).filter((function(e){return null!==e})).shift()},Te=function(e,t){return ke(t,(function(t){return""+t.value==""+e?t:null})).filter((function(e){return null!==e})).shift()},Ve=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.interpose("children1").withMutations((function(e){return e.skip(1),e.push.apply(e,r),e}))},_e=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.interpose("children1").withMutations((function(e){return e.push.apply(e,r),e}))},Ze=function(e,t){var r=new(J().OrderedMap)((0,T.Z)({},e.get("id"),e)),n=e;return t.forEach((function(e){n=r.get(e),r=n.get("children1")})),n},Ie=function(e){var t=e;return function e(r,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n.push(r.get("id")),l=r.getIn(["properties","isLocked"]);o&&l&&(t=t.deleteIn(Ve(i,"properties","isLocked")));var a=r.get("children1");a&&a.map((function(t,r){e(t,i,l||o)}))}(e,new(J().List)),t},De=function(e){var t=e;return function e(r,n,o,i){if(r){var l=r.get("path"),a=r.get("id"),u=a||i,c=n.push(u);l&&l.equals(c)||(t=t.setIn(Ve(c,"path"),c)),a||(t=t.setIn(Ve(c,"id"),u));var s=r.get("children1");s&&("Map"==s.constructor.name&&(t=t.setIn(Ve(c,"children1"),new(J().OrderedMap)(s))),s.map((function(t,r){e(t,c,o+1,r)})))}}(e,new(J().List),0),t},Re=function(e){var t=e;return function e(r,n,o,i){if(!r)return!1;var l=r.get("id")||i,a=n.push(l),u=r.get("children1");if(u){var c=u.map((function(t,r){return e(t,a,o+1,r)})).reduce((function(e,t){return e&&t}),!0);if((0==u.size||c)&&o>0)return t=t.deleteIn(Ve(a)),!0}return!1}(e,new(J().List),0),t},xe=function(e){var t=[],r={},n=0;!function e(o,i,l,a,u,c,s,p,f){var d,v=o.get("type"),g=o.get("collapsed"),h=o.get("id"),m=o.get("children1"),y=o.getIn(["properties","isLocked"]),b=m?m.map((function(e,t){return t})).toArray():null,O="rule_group"==v,S=!u&&(!m||O),w=(null==b?void 0:b.length)>0,F=t.length,j=n;if(t.push(h),l||(n+=1),s.height=(s.height||0)+1,r[h]={type:v,parent:i.length?i[i.length-1]:null,parentType:p,caseId:"case_group"==v?h:f,isDefaultCase:"case_group"==v&&!m,path:i.concat(h),lev:c,leaf:!m,index:F,id:h,children:b,leafsCount:0,_top:F,top:l?null:j,collapsed:g,node:o,isLocked:y||a},m){var C={};m.map((function(t,r){e(t,i.concat(h),l||g,a||y,u||O,c+1,C,v,"case_group"==v?h:f)})),g||(s.height=(s.height||0)+(C.height||0),w&&!O&&(d=(C.depth||0)+1))}f&&S&&r[f].leafsCount++;var E=t.length,L=s.height;Object.assign(r[h],{_height:E-F,height:L,bottom:(l?null:j)+L}),null!=d&&(Object.assign(r[h],{depth:d}),s.depth=Math.max(s.depth||0,d))}(e,[],!1,!1,!1,0,{},null,null);for(var o=0;o<t.length;o++){var i=o>0?t[o-1]:null,l=o<t.length-1?t[o+1]:null,a=r[t[o]];a.prev=i,a.next=l}return{flat:t,items:r}},Ae=function(e){if(!e)return-1;var t=0;return function e(r,n,o){var i,l,a;"function"==typeof r.get?(i=r.get("id"),l=r.get("children1"),a=r.get("type")):(i=r.id,l=r.children1,a=r.type),t++,l&&"rule_group"!=a&&l.map((function(t,r){e(t,n.concat(i),o+1)}))}(e,[],0),t-1},Ne=function(e){if(!e)return-1;var t=0;return function e(r,n,o){var i,l,a;"function"==typeof r.get?(i=r.get("id"),l=r.get("children1"),a=r.get("type")):(i=r.id,l=r.children1,a=r.type),"rule"==a||"rule_group"==a?t++:l&&l.map((function(t,r){e(t,n.concat(i),o+1)}))}(e,[],0),t},Me=function(e){var t=[];return e&&function e(r,n,o){var i=r.get("id"),l=r.get("children1"),a=r.getIn(["properties","valueError"]),u=r.getIn(["properties","field"]);a&&a.size>0&&a.filter((function(e){return null!=e})).size>0&&t.push(u),l&&l.map((function(t,r){e(t,n.concat(i),o+1)}))}(e,[],0),Array.from(new Set(t))},qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e;return function e(r,n){r.path&&delete r.path,!t&&n&&delete r.id;var o=r.properties;o&&null==o.operatorOptions&&delete o.operatorOptions;var i=r.children1;if(i){for(var l in i)e(i[l],l);t&&(r.children1=Object.values(i))}}(e,null),r},We=function(e){var t=[],r=e.get("children1");return r&&r.map((function(e){var r,n=e.getIn(["properties","value"]);n&&1==n.size?(r=n.get(0),Array.isArray(r)&&0==r.length&&(r=null)):r=null,t=[].concat((0,Z.Z)(t),[r])})),t},Be=function(e){return!e.get("children1")||0==e.get("children1").size},Ge=function(e,t){return e.getIn(Ve(t,"children1")).size>0},$e=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var n=e;return n=n.toJS(),t&&(n=qe(n,r)),n}},ze=function(e){if(He(e))return e;if(Ye(e))return Ke(e);if("string"==typeof e&&e.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if("string"==typeof e)return Ke(JSON.parse(e));throw"Can't load tree!"},Ue=function(e,t){if(e){var r=no(t,void 0,!0);return xr(e,null,r,r)}},Je=function(e){return 0==Me(e).length},He=function(e){return U.Map.isMap(e)},Ye=function(e){return"object"==(0,_.Z)(e)&&("group"==e.type||"switch_group"==e.type)};function Ke(e){return(0,U.fromJS)(e,(function(e,t){var r;if("properties"==e){r=t.toOrderedMap();for(var n=0;n<2;n++){var o;null===(null===(o=r.get("value"))||void 0===o?void 0:o.get(n))&&(r=r.setIn(["value",n],void 0))}}else r="value"==e&&J().Iterable.isIndexed(t)?t.map((function(e){var t,r=null==e||null===(t=e.toJS)||void 0===t?void 0:t.call(e);return null!=r&&r.func?e.toOrderedMap():null!=e&&e.toJS?r:e})).toList():"asyncListValues"==e?t.toJS():"children1"==e&&J().Iterable.isIndexed(t)?new(J().OrderedMap)(t.map((function(e){return[e.get("id"),e]}))):J().Iterable.isIndexed(t)?t.toList():t.toOrderedMap();return r}))}var Qe=r(35262);function Xe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?et(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nt=function(e,t){return ot(e,t,!1)},ot=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=no(t,void 0,!1),i=it(o),l=e?lt(e,i,o,"rule",n):void 0;l&&"group"!=l.type&&(l=pt(l,o));var a=l?ze(l):void 0;return r?[a,n.errors]:(n.errors.length&&console.warn("Errors while importing from JsonLogic:",n.errors),a)},it=function(e){var t={};for(var r in e.operators){var n=e.operators[r];if("string"==typeof n.jsonLogic){var o=(n._jsonLogicIsRevArgs?"#":"")+n.jsonLogic+"/"+ee(n.cardinality,1);t[o]||(t[o]=[]),t[o].push(r)}else if("string"==typeof n.jsonLogic2){var i=n.jsonLogic2+"/"+ee(n.cardinality,1);t[i]||(t[i]=[]),t[i].push(r)}}var l={};for(var a in e.conjunctions)l[e.conjunctions[a].jsonLogicConj||a.toLowerCase()]=a;var u,c={},s=Xe(co(e));try{for(s.s();!(u=s.n()).done;){var p=(0,V.Z)(u.value,2),f=p[0],d=p[1],v=void 0;d.jsonLogicIsMethod?v="#"+d.jsonLogic:"string"==typeof d.jsonLogic&&(v=d.jsonLogic),v&&(c[v]||(c[v]=[]),c[v].push(f))}}catch(e){s.e(e)}finally{s.f()}var g=e.settings.jsonLogic;return{operators:t,conjunctions:l,funcs:c,varKeys:["var",g.groupVarKey,g.altVarKey]}},lt=function e(t,r,n,o,i){var l,a,u,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6?arguments[6]:void 0,p=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;se(t)&&(a=t[l=Object.keys(t)[0]],Array.isArray(a)||(a=[a]));var d=i.errors.length,v=n.settings.jsonLogic.lockedOp,g="!"==l&&1==a.length&&a[0]&&se(a[0])&&r.varKeys.includes(Object.keys(a[0])[0]),h="!"==l&&!g,m=v&&l==v;m?u=e(a[0],r,n,o,i,c,s,p,f,!0):h?u=e(a[0],r,n,o,i,!c,s,p,f):"val"==o?u=ut(l,a,r,n,c,i,f)||ct(l,a,r,n,c,s,i,f)||at(t,s,p,n,i):"rule"==o&&(u=st(l,a,r,n,c,i,f,!1)||dt(l,a,r,n,c,i,f));var y=i.errors.length;return"!"!=l&&void 0===u&&y==d&&i.errors.push("Can't parse logic ".concat(JSON.stringify(t))),m&&(u.properties.isLocked=!0),u},at=function(e,t,r,n,o){var i;if(void 0===e&&(e=null==t?void 0:t.defaultValue),void 0!==e){var l=n.widgets[r||(null==t?void 0:t.mainWidget)],a=null==t?void 0:t.type;if(l){if(!se(e)){if("time"==a&&"number"==typeof e){var u=Math.floor(e/60/60)%24,c=Math.floor(e/60)%60,s=e%60,p=l.valueFormat;if(p){var f=new Date(e);f.setMilliseconds(0),f.setHours(u),f.setMinutes(c),f.setSeconds(s),e=z()(f).format(p)}else e="".concat(u,":").concat(c,":").concat(s)}if(["date","datetime"].includes(a)&&e&&!(e instanceof Date))try{var d=new Date(e);d instanceof Date&&d.toISOString()===e&&(e=d)}catch(t){o.errors.push("Can't convert value ".concat(e," as Date")),e=void 0}if(e instanceof Date&&t){var v=l.valueFormat;v&&(e=z()(e).format(v))}var g;return e&&null!=t&&null!==(i=t.fieldSettings)&&void 0!==i&&i.asyncFetch&&(g=Array.isArray(e)?e:[e]),{valueSrc:"value",value:e,valueType:l.type,asyncListValues:g}}o.errors.push("Unexpected logic in value: ".concat(JSON.stringify(e)))}else o.errors.push("No widget for type ".concat(a))}},ut=function(e,t,r,n,o,i){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(r.varKeys.includes(e)&&"string"==typeof t[0]){var a=go(n,t[0],l),u=jo(n,a);return u?{valueSrc:"field",value:a,valueType:u.type}:void i.errors.push("No config for field ".concat(a))}},ct=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6?arguments[6]:void 0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(e){var u,c,s,p="method"==e;if(p){var f,d,v=(0,Qe.Z)(t);f=v[0],u=v[1],d=v.slice(2),c=[f].concat((0,Z.Z)(d))}else u=e,c=t;var g=(p?"#":"")+u,h=(null==i?void 0:i.type)||(null==i?void 0:i.returnType),m=(r.funcs[g]||[]).filter((function(e){return!i||mo(n,e).returnType==h}));if(m.length)s=m[0];else{var y,b=(0,T.Z)({},e,t),O=Xe(co(n));try{for(O.s();!(y=O.n()).done;){var S=(0,V.Z)(y.value,2),w=S[0],F=S[1];if(F.jsonLogicImport&&(!h||F.returnType==h)){var j=void 0;try{j=F.jsonLogicImport(b)}catch(e){}j&&(s=w,c=j)}}}catch(e){O.e(e)}finally{O.f()}}if(s&&s){var C=mo(n,s),E=Object.keys(C.args||{}),L=c.reduce((function(e,t,o){var i,u=E[o],c=C.args[u];return c&&(i=lt(t,r,n,"val",l,!1,c,null,a)),void 0!==i?rt(rt({},e),{},(0,T.Z)({},u,i)):e}),{});for(var k in C.args){var P,_=C.args[k],I=L[k];if(void 0===I)if(void 0!==(I=null==_?void 0:_.defaultValue)&&(I={value:I,valueSrc:null!==(P=I)&&void 0!==P&&P.func?"func":"value",valueType:_.type}),void 0===I){if(null==_||!_.isOptional)return void l.errors.push("No value for arg ".concat(k," of func ").concat(s))}else L[k]=I}return{valueSrc:"func",value:{func:s,args:L},valueType:C.returnType}}}},st=function(e,t,r,n,o,i){var l,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=r.conjunctions[e],c=n.settings.fieldSeparator;if(u){var s=t.map((function(e){return lt(e,r,n,"rule",i,!1,null,null,a)})).filter((function(e){return void 0!==e})).reduce((function(e,t){return rt(rt({},e),{},(0,T.Z)({},t.id,t))}),{}),p=Object.values(s).map((function(e){var t,r;return"field"==(null==e||null===(t=e.properties)||void 0===t?void 0:t.fieldSrc)&&(null==e||null===(r=e.properties)||void 0===r?void 0:r.field)})).filter((function(e){var t;return null==e||null===(t=e.includes)||void 0===t?void 0:t.call(e,c)})),f=Object.fromEntries((l=p,Array.from(new Set(l))).map((function(e){var t=e.split(c),r=Object.fromEntries(t.slice(0,-1).map((function(e,t,r){return[].concat((0,Z.Z)(r.slice(0,t)),[e])})).map((function(e){return[e.join(c),jo(n,e)]})).filter((function(e){var t=(0,V.Z)(e,2),r=(t[0],t[1]);return"!group"==(null==r?void 0:r.type)})));return[e,Object.keys(r)]}))),d={conjunction:u,not:o},v=q(),g={},h={};return Object.entries(s).map((function(e){var t=(0,V.Z)(e,2),r=t[0],o=t[1];if("group"==(null==o?void 0:o.type)||"rule_group"==(null==o?void 0:o.type))g[r]=o;else{var i,l=null==o||null===(i=o.properties)||void 0===i?void 0:i.field,s=f[l]||[],p=s[s.length-1];if(p){var d=g,v=So(a,n),m=So(p,n);re(v,m.slice(0,v.length))||(v=[]),p.split(c).slice(v.length).map((function(e,t,r){return[].concat((0,Z.Z)(v),(0,Z.Z)(r.slice(0,t)),[e]).join(c)})).map((function(e){return{f:e,fc:jo(n,e)||{}}})).filter((function(e){return"!struct"!=e.fc.type})).map((function(e,t){var r=e.f,n=e.fc,o=h[r];o||(o=q(),h[r]=o,d[o]={type:"rule_group",id:o,children1:{},properties:{conjunction:u,not:!1,field:r,fieldSrc:"field",mode:n.mode}}),d=d[o].children1})),d[r]=o}else o&&(g[r]=o)}})),{type:"group",id:v,children1:g,properties:d}}},pt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"group",id:q(),children1:(0,T.Z)({},e.id,e),properties:{conjunction:Pr(t),not:r}}},ft=function(e,t,r,n,o,i,l,a){var u=!(("all"==e||"some"==e)&&se(r[1])&&"in"==Object.keys(r[1])[0])&&i.settings.groupOperators.includes(e),c=u?0:t-1;u?c=0:["==","!="].includes(e)&&1==c&&null===r[1]&&(t=1,c=0,r=[r[0]]);var s=e+"/"+c,p=o.operators[(l?"#":"")+s];if(p){var f,d=[];if(["<","<=",">",">="].includes(e)&&3==t)f=r[1],d=[r[0],r[2]];else if(l)f=r[1],d=[r[0]];else{var v=r,g=(0,Qe.Z)(v);f=g[0],d=g.slice(1)}if(se(f)){var h=function(e,t,r,n,o){var i,l,a,u,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,p=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,d=Object.keys(t)[0],v=Object.values(t)[0],g=function(e,t){return function(e,t,r,n,o,i){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Array.isArray(t)||(t=[t]);var a=ut(e,t,r,n,o,i,l);if(a)return{fieldSrc:"field",field:a.value}}(e,t,n,o,c,p,f)||function(e,t,r,n,o){var i=ct(e,t,r,n,o,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6?arguments[6]:void 0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null);if(i)return{fieldSrc:"func",field:i.value}}(e,t,n,o,c,s,p,f)},h=p.errors.length,m=g(d,v);if(m&&(i=m.field,l=m.fieldSrc),e&&(u=!0,a=r[0],r=[]),"reduce"==d&&Array.isArray(v)&&3==v.length){var y=v,b=(0,V.Z)(y,3),O=b[0],S=b[1],w=b[2];if(se(O)&&0==w&&se(S)&&Array.isArray(S["+"])&&1==S["+"][0]&&se(S["+"][1])&&"accumulator"==S["+"][1].var)if(d=Object.keys(O)[0],v=Object.values(O)[0],"filter"==d){var F=v,j=(0,V.Z)(F,2),C=j[0],E=j[1];if(se(C)){var L=g(d=Object.keys(C)[0],v=Object.values(C)[0]);L&&(i=L.field,l=L.fieldSrc,a=E,u=!0)}}else{var k=g(d,v);k&&(i=k.field,l=k.fieldSrc,u=!0)}}var P=p.errors.length;if(i||P!=h||p.errors.push("Unknown LHS ".concat(JSON.stringify(t))),i)return{field:i,fieldSrc:l,having:a,isGroup:u,args:r}}(u,f,d,o,i,null,null,a,n);if(h){var m=h.field,y=h.fieldSrc,b=h.having,O=(h.isGroup,h.args),S=jo(i,m);if(S){var w=p[0];if(p.length>1&&S&&S.operators){if(0==(p=p.filter((function(e){return S.operators.includes(e)}))).length)return void a.errors.push("No corresponding ops for LHS ".concat(m));w=p[0]}return{field:m,fieldSrc:y,fieldConfig:S,opKey:w,args:O,having:b}}a.errors.push("No config for LHS ".concat(m))}}else a.errors.push("Incorrect operands for ".concat(e,": ").concat(JSON.stringify(r)))}},dt=function e(t,r,n,o,i,l){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(t){var u=r.length;if(("all"==t||"some"==t)&&se(r[1])){var c=Object.keys(r[1])[0];"in"==c&&(r=[r[0],r[1][c][1]],t=t+"-"+c)}var s=function(e,t,r,n,o,i,l){var a={errors:[]},u=ft(e,t,r,n,o,i,!1,a);if(u||(u=ft(e,t,r,n,o,i,!0,{errors:[]})),u)return u;l.errors.push(a.errors.join("; ")||"Unknown op ".concat(e,"/").concat(t))}(t,u,r,a,n,o,l);if(s){var p,f,d=s.field,v=s.fieldSrc,g=s.fieldConfig,h=s.opKey,m=s.args,y=s.having,b=o.operators[h],O=(void 0!==g.showNot?g.showNot:o.settings.showNot,!1);if("!group"==g.type&&y){f=y[p=Object.keys(y)[0]],Array.isArray(f)||(f=[f]);var S="!"==p&&1==f.length&&f[0]&&se(f[0])&&n.varKeys.includes(Object.keys(f[0])[0]);"!"!=p||S||(O=!0,f=(y=y["!"])[p=Object.keys(y)[0]],Array.isArray(f)||(f=[f]))}i&&b.reversedOp&&(i=!1,h=b.reversedOp,b=o.operators[h]);var w=dn(o,d,h,null),F=m.map((function(e){return lt(e,n,o,"val",l,!1,g,w,a)}));if(!F.filter((function(e){return void 0===e})).length){var j,C=g.type;if("!group"!==C&&"!struct"!==C||(C=null),"!group"==g.type&&y){if(void 0!==n.conjunctions[p])j=st(p,f,n,o,O,l,d,!0),O=!1;else{var E=e(p,f,n,o,O,l,d);O=!1,j=function(e,t,r,n,o){if(e)return{type:"rule_group",id:q(),children1:(0,T.Z)({},e.id,e),properties:{conjunction:o||kr(n,r),not:!1,field:t}}}(E,d,g,o,n.conjunctions.and)}if(!j)return;j.type="rule_group",Object.assign(j.properties,{field:d,mode:g.mode,operator:h}),"array"==g.mode&&Object.assign(j.properties,{value:F.map((function(e){return e.value})),valueSrc:F.map((function(e){return e.valueSrc})),valueType:F.map((function(e){return e.valueType}))}),i&&(j=pt(j,o,i))}else if("!group"!=g.type||y){var L=F.map((function(e){return e.asyncListValues})).filter((function(e){return null!=e})),k=L.length?L[0]:void 0;j={type:"rule",id:q(),properties:rt({field:d,fieldSrc:v,operator:h,value:F.map((function(e){return e.value})),valueSrc:F.map((function(e){return e.valueSrc})),valueType:F.map((function(e){return e.valueType}))},k?{asyncListValues:k}:{})},i&&(j=pt(j,o,i))}else j={type:"rule_group",id:q(),children1:{},properties:{conjunction:kr(o,g),not:i,mode:g.mode,field:d,operator:h}},"array"==g.mode&&Object.assign(j.properties,{value:F.map((function(e){return e.value})),valueSrc:F.map((function(e){return e.valueSrc})),valueType:F.map((function(e){return e.valueType}))});return j}}}},vt=r(60226),gt=r(57679),ht=r.n(gt)();ht.trim=function(e){return"'"==e.charAt(0)?e.substring(1,e.length-1):e},ht.escapeLike=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=ht.escape(e);return"'"+(n=(t?"%":"")+(n=(n=ht.trim(n)).replace(/[%_]/g,"\\$&"))+(r?"%":""))+"'"};var mt=function(e){var t="''",r=null==e?void 0:e.type;return"date"==r?t="'0000-00-00'":"datetime"==r?t="'0000-00-00 00:00'":"time"==r?t="'00:00'":"number"==r&&(t="0"),t},yt=function(e){var t="";return"number"==(null==e?void 0:e.type)&&(t=0),t},bt=function(e){return"'"+e.replace(/'/g,"''")+"'"},Ot=function(e){return"".concat(e,".?[true]")},St=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e)return"null";switch((0,_.Z)(e)){case"boolean":return e?"true":"false";case"number":if(!Number.isFinite(e)||isNaN(e))return;return e+(!Number.isInteger(e)||t?"f":"");case"object":if(Array.isArray(e))return function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=["int","float"];return e.map((function(e){if(null!=e){if("string"==typeof e)r="String";else{if("number"!=typeof e)throw new Error("spelEscape: Can't use value ".concat(e," in array"));r=Number.isInteger(e)?"int":"float"}if(t){if(t!=r){if(!i.includes(t)||!i.includes(r))throw new Error("spelEscape: Can't use different types in array: found ".concat(t," and ").concat(r));t="float"}}else t=r}})),t||(t="String"),n="float"==t?e.map((function(e){return St(e,!0)})):e.map((function(e){return St(e)})),o?"new ".concat(t,"[]{").concat(n.join(", "),"}"):"{".concat(n.join(", "),"}")}(e,r);throw new Error("spelEscape: Object is not supported");default:return bt(e)}},wt=function(e){return e&&Array.isArray(e)&&e.length?e.map((function(e){return"const"==e.type?St(e.value):"property"==e.type?""+e.value:"variable"==e.type?"#"+e.value:void 0})).filter((function(e){return null!=e})).join(" + "):"null"},Ft=function(e){if(null==e)return[void 0,[]];var t=[];return[("case_value"==e.valueType?e.value:[e]).map((function(e){return"value"==e.valueSrc?null===e.value?void 0:{type:"const",value:e.value}:"field"==e.valueSrc?{type:e.isVariable?"variable":"property",value:e.value}:void t.push("Unsupported valueSrc ".concat(e.valueSrc," in concatenation"))})).filter((function(e){return null!=e})),t]},jt=function(e){return null==e?"NULL":e.toString()},Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e)return"null";switch((0,_.Z)(e)){case"boolean":return e?"true":"false";case"number":if(!Number.isFinite(e)||isNaN(e))return;return e+(!Number.isInteger(e)||t?"f":"");case"object":if(Array.isArray(e))return function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=["int","float"];return e.map((function(e){if(null!=e){if("string"==typeof e)r="String";else{if("number"!=typeof e)throw new Error("celEscape: Can't use value ".concat(e," in array"));r=Number.isInteger(e)?"int":"float"}if(t){if(t!=r){if(!i.includes(t)||!i.includes(r))throw new Error("celEscape: Can't use different types in array: found ".concat(t," and ").concat(r));t="float"}}else t=r}})),t||(t="String"),n="float"==t?e.map((function(e){return Ct(e,!0)})):e.map((function(e){return Ct(e)})),o?"new ".concat(t,"[][").concat(n.join(", "),"]"):"[".concat(n.join(", "),"]")}(e,r);throw new Error("celEscape: Object is not supported");default:return bt(e)}};function Et(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Tt="${0}.compareTo(${1})",Vt={datetime:!0,time:!0,date:!0},_t=function(e,t){return Zt(e,t,!1)},Zt=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=no(t,void 0,!1),i=It(e,o,n,null);return r?[i,n.errors]:(n.errors.length&&console.warn("Errors while exporting to SpEL:",n.errors),i)},It=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e){var o=e.get("type");return"group"===o||"rule_group"===o?xt(e,t,r,n):"rule"===o?Mt(e,t,r,n):"switch_group"==o?Rt(e,t,r,n):"case_group"==o?Dt(e,t,r,n):void 0}},Dt=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("type");if("case_group"==o){var i=e.get("properties")||new U.Map,l=Wt(t,i,r,null,n,"!case_value"),a=(0,V.Z)(l,3),u=a[0];return a[1],a[2],[xt(e,t,r,n),u]}r.errors.push("Unexpected child of type ".concat(o," inside switch"))},Rt=function(e,t,r){e.get("properties")||new U.Map;var n=e.get("children1");if(n){var o=n.map((function(e){return Dt(e,t,r,null)})).filter((function(e){return void 0!==e})).toArray();if(o.length){if(1==o.length&&!o[0][0])return o[0][1];for(var i=[],l=0;l<o.length;l++)l==o.length-1||o[l][0]?(i.push(o[l]),l==o.length-1&&o[l][0]&&i.push([void 0,null])):r.errors.push("No condition for case ".concat(l));for(var a="",u="",c=0;c<i.length;c++){var s=(0,V.Z)(i[c],2),p=s[0],f=s[1];null==f&&(f="null"),null==p&&(p="true"),c!=i.length-1?(a+="(".concat(p," ? ").concat(f," : "),u+=")"):a+="".concat(f)}return a+u}}},xt=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("type"),i=e.get("properties")||new U.Map,l=i.get("mode"),a=e.get("children1")||new U.List,u=i.get("field"),c=i.get("conjunction");c||(c=Pr(t));var s=t.conjunctions[c],p=i.get("not"),f="rule_group"===o,d=f&&"struct"!=l,v=d?u:n,g=(jo(t,v)||{}).isSpelArray,h=t.settings.fieldSeparator,m=i.get("operator");m||l&&"some"!=l||(m="some");var y=Nt(t,m,u),b=y!=m,O=m&&Co(t,y,u)||null,S=f&&(!y||0==O.cardinality),w=Wt(t,i,r,y,n,null),F=(0,V.Z)(w,3),j=F[0],C=F[1],E=F[2],L=a.map((function(e){return It(e,t,r,v)})).filter((function(e){return void 0!==e}));if(d&&!S){if(null==j)return}else if(!L.size)return;var k,P=f,T=L.size?s.spelFormatConj(L,c,p,P):null;if(d){var _=Gt(r,t,u,n),Z=(h||".")+(g?"length":"size()"),I="".concat(_).concat(Z),D=T?"".concat(_,".?[").concat(T,"]").concat(Z):I;k=At(r,t,i,D,S?I:j,y,C,E,b)}else k=T;return k},At=function(e,t,r,n,o,i,l,a){var u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=r.get("field"),s=Co(t,i,c)||{},p=jo(t,c)||{},f=r.get("operatorOptions"),d=s.spelFormatOp||function(e,t,r){var n=t.spelOp;if(n){var o,i=n.includes("${0}"),l=Vt[r],a=n,u=ee(t.cardinality,1);return l?o=function(e,t,r,n,o,i,l,c){var s=Tt.replace(/\${(\w+)}/g,(function(t,n){return 0==n?e:u>1?r[n-1]:r}));return"".concat(s," ").concat(a," 0")}:i?o=function(e,t,r,o,i,l,a,c){return n.replace(/\${(\w+)}/g,(function(t,n){return 0==n?e:u>1?r[n-1]:r}))}:0==u?o=function(e,t,r,n,o,i,l,u){return"".concat(e," ").concat(a)}:1==u&&(o=function(e,t,r,n,o,i,l,u){return"".concat(e," ").concat(a," ").concat(r)}),o}}(0,s,a);if(d){var v,g=[n,i,o,l,a,Y()(s,X),f,p];return v=d.call.apply(d,[t.ctx].concat(g)),u&&(v=t.settings.spelFormatReverse(v)),void 0===v&&e.errors.push("Operator ".concat(i," is not supported for value source ").concat(l)),v}e.errors.push("Operator ".concat(i," is not supported"))},Nt=function(e,t,r){if(t){var n=Co(e,t,r)||{},o=n.reversedOp,i=Co(e,o,r)||{},l=n.spelOp||n.spelFormatOp,a=i.spelOp||i.spelFormatOp;if(l||a){if(!l&&a){var u=[o,t];t=u[0],o=u[1];var c=[i,n];n=c[0],i=c[1]}return t}}},Mt=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("properties")||new U.Map,i=o.get("field"),l=o.get("fieldSrc"),a=o.get("operator");if(null!=i&&null!=a){var u=Nt(t,a,i);if(u){var c=u!=a,s=Wt(t,o,r,u,n,null),p=(0,V.Z)(s,3),f=p[0],d=p[1],v=p[2];if(void 0!==f){var g=qt(r,t,i,l,n);if(void 0!==g)return At(r,t,o,g,f,u,d,v,c)}}else r.errors.push("Operator ".concat(a," is not supported"))}},qt=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return"func"===n?$t(e,t,r,o):Gt(e,t,r,o)},Wt=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=t.get("field"),a=t.get("valueSrc"),u=t.get("valueType");("!case_value"==i||u&&"case_value"==u.get(0))&&(l="!case_value");var c,s=jo(e,l)||{},p=Co(e,n,l)||{},f=ee(p.cardinality,1),d=t.get("value"),v=t.get("asyncListValues"),g=[],h=[];if(null!=d){var m=d.map((function(t,i){var c=a?a.get(i):null,f=u?u.get(i):null,d=Fn(t,c,e),m=dn(e,l,n,c),y=Y()(Eo(e,l,n,m,c),["factory"]),b=Bt(r,e,d,c,f,y,s,n,p,o,v);return void 0!==b&&(g.push(c),h.push(f)),b})),y=m.filter((function(e){return void 0===e})).size>0;m.size<f||y||(c=f>1?m.toArray():1==f?m.first():null)}return[c,g.length>1?g:g[0],h.length>1?h:h[0]]},Bt=function(e,t,r,n,o,i,l,a,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,s=arguments.length>10?arguments[10]:void 0;if(void 0!==r){var p;if("field"==n)p=Gt(e,t,r,c);else if("func"==n)p=$t(e,t,r,c);else if("function"==typeof i.spelFormatValue){var f=i.spelFormatValue,d=[r,Pt(Pt({},N()(l,["fieldSettings","listValues"])),{},{asyncListValues:s}),Y()(i,Q)];if(a&&(d.push(a),d.push(u)),"field"==n){var v=jo(t,r)||{};d.push(v)}p=f.call.apply(f,[t.ctx].concat(d))}else p=St(r);return p}},Gt=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r){var o=t.settings.fieldSeparator,i=jo(t,r)||{},l=So(r,t),a=an(r,t,n),u=t.settings.formatSpelField,c=vn(r,t,e,n),s=a.map((function(e){var t,r=(0,V.Z)(e,3),n=r[0],i=r[1],l=r[2];return l&&(t="!struct"==l.type||"!group"==l.type&&"struct"==l.mode?i.isSpelMap?"map":"class":"!group"==l.type?i.isSpelItemMap?"[map]":"[class]":"class"),{key:n,parent:t,isSpelVariable:null==i?void 0:i.isSpelVariable,fieldSeparator:o}}));return u.call(t.ctx,c,n,l,s,i,t)}},$t=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=r.get("func"),i=r.get("args"),l=mo(t,o);if(l){var a={},u=[],c=[];for(var s in l.args){var p,f=l.args[s],d=jo(t,f),v=f.defaultValue,g=f.isOptional,h=null!=v&&v.func?"func":"value",m=i?i.get(s):void 0,y=m?m.get("value"):void 0,b=m?m.get("valueSrc"):void 0,O=m?m.get("asyncListValues"):void 0,S=null===(p=f.spelEscapeForFormat)||void 0===p||p,w=null,F=dn(t,f,w,b),j=Y()(Eo(t,f,w,F,b),["factory"]),C=Bt(e,t,y,b,f.type,j,d,null,null,n,O);if(null!=y&&void 0===C)return void("func"!=b&&e.errors.push("Can't format value of arg ".concat(s," for func ").concat(o)));var E=void 0;if(void 0===C&&!g&&null!=v){var L=dn(t,f,w,h),k=Y()(Eo(t,f,w,L,h),["factory"]);if(void 0===(E=Bt(e,t,v,h,f.type,k,d,null,null,n,O)))return void("func"!=h&&e.errors.push("Can't format default value of arg ".concat(s," for func ").concat(o)))}var P=null!=C?C:E;if(void 0!==P){if(u.length){var T,V=Et(u);try{for(V.s();!(T=V.n()).done;){var _=T.value;a[_]=void 0}}catch(e){V.e(e)}finally{V.f()}u=[]}a[s]=S?P:null!=y?y:v}else g||c.push(s),u.push(s)}if(!c.length){var Z;if("function"==typeof l.spelFormatFunc){var I=l.spelFormatFunc,D=[a];Z=I.call.apply(I,[t.ctx].concat(D))}else if(l.spelFunc){Z=l.spelFunc.replace(/\${(\w+)}/g,(function(e,t){var r;return null!==(r=a[t])&&void 0!==r?r:e}));var R,x=Object.keys(l.args||{}).reverse().filter((function(e){return!!l.args[e].isOptional})),A=Et(x);try{for(A.s();!(R=A.n()).done;){var N=R.value;if(null!=a[N])break;Z=Z.replace(new RegExp("(, )?\\${"+N+"}","g"),"")}}catch(e){A.e(e)}finally{A.f()}Z=Z.replace(/\${(\w+)}/g,"null")}else e.errors.push("Func ".concat(o," is not supported"));return Z}}else e.errors.push("Func ".concat(o," is not defined in config"))};function zt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ut(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Yt={number:"number",string:"text",boolean:"boolean",null:"null"},Kt={String:"text"},Qt=function(e){return"object"==(0,_.Z)(e)&&null!==e&&!Array.isArray(e)},Xt=function(e,t){return er(e,t,!0)},er=function(e,t){var r,n,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={errors:[]},l=no(t,void 0,!1),a=nr(l),u=void 0;try{r=vt.SpelExpressionEvaluator.compile(e)._compiledExpression}catch(e){i.errors.push(e)}r&&(n=tr(r,i),me.debug("convertedObj:",n,i),(u=or(n,a,l,i))&&"group"!=u.type&&"switch_group"!=u.type&&(u=br(u,l,n.not)),me.debug("jsTree:",u));var c=u?ze(u):void 0;return o?[c,i.errors]:(i.errors.length&&console.warn("Errors while importing from SpEL:",i.errors),c)},tr=function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.getType(),l=t.getChildren().map((function(n){return e(n,r,t)}));if("op-or"!=i&&"op-and"!=i||(l=l.reduce((function(e,t){var r=t.type!=i||t.not?[t]:t.children;return[].concat((0,Z.Z)(e),(0,Z.Z)(r))}),[])),"op-not"==i)return 1!=l.length&&r.errors.push("Operator NOT should have 1 child, but got ".concat(l.length,"}")),Ht(Ht({},l[0]),{},{not:!l[0].not});if("compound"==i){var a=(l=l.filter((function(e){return!("selection"==e.type&&1==e.children.length&&"boolean"==e.children[0].type&&1==e.children[0].val)}))).find((function(e){return"selection"==e.type}));a&&1!=a.children.length&&r.errors.push("Selection should have 1 child, but got ".concat(a.children.length));var u=a?a.children[0]:null,c=l[l.length-1],s="method"==c.type&&"size"==c.val.methodName||"!func"==c.type&&"size"==c.methodName,p="property"==c.type&&"length"==c.val,f=l.filter((function(e){return e!==a&&e!==c})),d={type:"compound",children:f};if((s||p)&&null!=lr(f))return{type:"!aggr",filter:u,source:d};if(l=(l=l.filter((function(e){var t="variable"==e.type&&"this"==e.val,r="variable"==e.type&&"root"==e.val;return!(t||r)}))).map((function(e){return"indexer"==e.type&&1==e.children.length?{type:"indexer",val:e.children[0].val,itype:e.children[0].type}:e})),"!func"==c.type){var v={},g=v;do{var h,m;Object.assign(g,c),l=l.filter((function(e){return e!==c})),"!func"==(null===(m=c=l[l.length-1])||void 0===m?void 0:m.type)?(g.obj={},g=g.obj):l.length>1?g.obj={type:"compound",children:l}:g.obj=c}while("!func"==(null===(h=c)||void 0===h?void 0:h.type));return v}}try{t.getRaw?n=t.getRaw():0==t.getValue.length&&(n=t.getValue())}catch(e){me.error("[spel2js] Error in getValue()",e)}if("ternary"==i&&(n=rr(l)),"object"===(0,_.Z)(n)&&null!==n&&(n.methodName||n.functionName)&&(n.args=n.args.map((function(n){return e(n,r,t)}))),"list"==i&&(n=n.map((function(n){return e(n,r,t)})),!o&&1==n.length))return n[0];if("constructorref"==i){var y=l.find((function(e){return"qualifiedidentifier"==e.type})),b=null==y?void 0:y.val;return b?{type:"!new",cls:b,args:l.filter((function(e){return"qualifiedidentifier"!=e.type}))}:void r.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(l)))}if("typeref"==i){var O=l.find((function(e){return"qualifiedidentifier"==e.type})),S=null==O?void 0:O.val;return S?(l.filter((function(e){return"qualifiedidentifier"!=e.type})),{type:"!type",cls:S}):void r.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(l)))}if("function"==i||"method"==i){var w=n,F=w.functionName,j=w.methodName,C=w.args;return{type:"!func",methodName:F||j,isVar:"function"==i,args:C}}return{type:i,children:l,val:n}},rr=function(e){var t=[];return function e(r){var n=(0,V.Z)(r,3),o=n[0],i=n[1],l=n[2];t.push([o,i]),"ternary"==(null==l?void 0:l.type)?e(l.children):t.push([void 0,l])}(e),t},nr=function(e){var t={},r=function(r){var n=e.operators[r];if(n.spelOps)n.spelOps.forEach((function(e){var n=e;t[n]||(t[n]=[]),t[n].push(r)}));else if(n.spelOp){var o=n.spelOp;t[o]||(t[o]=[]),t[o].push(r)}else me.log("[spel] No spelOp for operator ".concat(r))};for(var n in e.operators)r(n);var o={};for(var i in e.conjunctions)o[e.conjunctions[i].spelConj||i.toLowerCase()]=i;var l,a={},u=zt(co(e));try{var c=function(){var e=(0,V.Z)(l.value,2),t=e[0],r=e[1],n=[],o=r.spelFunc;if("string"==typeof o){var i=Object.keys(r.args||{}).reverse().filter((function(e){return!!r.args[e].isOptional||null!=r.args[e].defaultValue})),u=o.replace(/\${(\w+)}/g,(function(e,t){return"?"})),c=i.reduce((function(e,t){return[].concat((0,Z.Z)(e),[[t].concat((0,Z.Z)(e[e.length-1]||[]))])}),[]).map((function(e){return o.replace(/(?:, )?\${(\w+)}/g,(function(t,r){return e.includes(r)?"":t})).replace(/\${(\w+)}/g,(function(e,t){return"?"}))}));n=[u].concat((0,Z.Z)(c))}var s,p=zt(n);try{for(p.s();!(s=p.n()).done;){var f=s.value;a[f]||(a[f]=[]),a[f].push(t)}}catch(e){p.e(e)}finally{p.f()}};for(u.s();!(l=u.n()).done;)c()}catch(e){u.e(e)}finally{u.f()}var s={};for(var p in e.widgets){var f=e.widgets[p],d=f.spelImportFuncs;if(f.type,d){var v,g=zt(d);try{for(g.s();!(v=g.n()).done;){var h=v.value;if("string"==typeof h){var m=h.replace(/\${(\w+)}/g,(function(e,t){return"?"})),y=(0,Z.Z)(h.matchAll(/\${(\w+)}/g)).map((function(e){var t=(0,V.Z)(e,2);return t[0],t[1]}));s[m]||(s[m]=[]),s[m].push({w:p,argsOrder:y})}}}catch(e){g.e(e)}finally{g.f()}}}var b={};for(var O in e.operators){var S=e.operators[O].spelOp;if(null!=S&&S.includes("${0}")){var w=S.replace(/\${(\w+)}/g,(function(e,t){return"?"})),F=(0,Z.Z)(S.matchAll(/\${(\w+)}/g)).map((function(e){var t=(0,V.Z)(e,2);return t[0],t[1]}));b[w]||(b[w]=[]),b[w].push({op:O,argsOrder:F})}}return b[Tt.replace(/\${(\w+)}/g,(function(e,t){return"?"}))]=[{op:"!compare",argsOrder:["0","1"]}],{operators:t,conjunctions:o,funcs:a,valueFuncs:s,opFuncs:b}},or=function e(t,r,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(t){var l,a=!0;if(0===t.type.indexOf("op-")||"matches"===t.type)l=ir(t,r,n,o,i);else if("!aggr"==t.type){var u,c=e(t.source,r,n,o,Ht(Ht({},t),{},{_groupField:null==i?void 0:i._groupField})),s=e(t.filter,r,n,o,Ht(Ht({},t),{},{_groupField:null==c?void 0:c.value}));"rule"==(null===(u=s)||void 0===u?void 0:u.type)&&(s=br(s,n,t.filter.not)),l={groupFilter:s,groupFieldValue:c},i||(l=void 0,o.errors.push("Unexpected !aggr in root"),a=!1)}else if("ternary"==t.type){var p={};t.val.forEach((function(e){var i=(0,V.Z)(e,2),l=i[0],a=i[1],u=hr(l,a,r,n,o,t);u&&(p[u.id]=u)})),l={type:"switch_group",id:q(),children1:p,properties:{}}}if(!l&&a&&(l=ar(t,r,n,o,i)),l&&!l.type&&!i){var f=gr(t,r,n,o);f?l=f:(l=void 0,o.errors.push("Can't convert rule of type ".concat(t.type,", it looks like var/literal")))}return l}},ir=function e(t,r,n,o){var i,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=t.type.startsWith("op-")?t.type.slice(3):t.type;if(("minus"==a||"plus"==a)&&1==t.children.length)return t.isUnary=!0,e(t.children[0],r,n,o,t);var u="and"==a&&2==t.children.length&&"op-ge"==t.children[0].type&&"op-le"==t.children[1].type,c="or"==a&&2==t.children.length&&"op-lt"==t.children[0].type&&"op-gt"==t.children[1].type;if(u||c){var s=(0,V.Z)(t.children[0].children,2),p=s[0],f=s[1],d=(0,V.Z)(t.children[1].children,2),v=d[0],g=d[1];if(vr(p,v,t,r,n,o,l))return f.val,g.val,e({type:"op-between",children:[p,f,g]},r,n,o,l)}var h=r.operators[a];"eq"==a&&"null"==t.children[1].type?h=["is_null"]:"ne"==a&&"null"==t.children[1].type?h=["is_not_null"]:"le"==a&&"string"==t.children[1].type&&""==t.children[1].val?h=["is_empty"]:"gt"==a&&"string"==t.children[1].type&&""==t.children[1].val?h=["is_not_empty"]:"between"==a&&(h=["between"]);var m=function(){var e,i=t.children.map((function(e){return or(e,r,n,o,Ht(Ht({},t),{},{_groupField:null==l?void 0:l._groupField}))}));return i.length>=2&&"!compare"==(null===(e=i)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.type)&&(i=i[0].children),i};if("and"==a||"or"==a){var y={};m().forEach((function(e){if(e){var t=q();e.id=t,null!=e.type?y[t]=e:o.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(e)))}})),i={type:"group",id:q(),children1:y,properties:{conjunction:r.conjunctions[a],not:t.not}}}else if(h){var b,O,S=m(),w=S[0],F=S.slice(1),j=null==w||null===(b=w.groupFieldValue)||void 0===b?void 0:b.value,C=null===(O=F)||void 0===O?void 0:O[0],E=h[0];if(h.length>1){var L,k,P=(null===(L=S[0])||void 0===L?void 0:L.valueType)||(null===(k=S[1])||void 0===k?void 0:k.valueType),T=null==w?void 0:w.value,_=h.map((function(e){return{op:e,widget:dn(n,T,e)}}));if(me.warn("[spel] Spel operator ".concat(a," can be mapped to ").concat(h,"."),"widgets:",_,"vals:",S,"valueType=",P),"eq"==a||"ne"==a){var Z=_.find((function(e){e.op;var t=e.widget;return t&&"field"!=t}));Z&&(E=Z.op)}}null!=w&&w.groupFieldValue&&(C&&C.groupFieldValue&&"field"==C.groupFieldValue.valueSrc&&C.groupFieldValue.value==j?(E="all",F=[]):"equal"==E&&"value"==C.valueSrc&&"number"==C.valueType&&0==C.value?(E="none",F=[]):"greater"==E&&"value"==C.valueSrc&&"number"==C.valueType&&0==C.value&&(E="some",F=[]));var I=!1;if(t.not){var D=n.operators[E];D.reversedOp?(E=D.reversedOp,t.not=!1):I=!0}if(w)if(w.groupFieldValue)"field"!=w.groupFieldValue.valueSrc&&o.errors.push("Expected group field ".concat(JSON.stringify(w))),i=dr(w,E,F,n,o);else{"field"!=w.valueSrc&&"func"!=w.valueSrc&&o.errors.push("Expected field/func at LHS, but got ".concat(JSON.stringify(w)));var R=w.value;i=fr(n,o,R,E,F)}I&&("group"!==i.type?i=br(i,n,t.not):i.properties.not=!i.properties.not)}else l||(i=gr(t,r,n,o));return i},lr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,o=e.map((function(e){if("variable"==e.type||"property"==e.type||"indexer"==e.type&&"string"==e.itype)return e.val;var o,i;n=!0,r&&(null==t||null===(o=t.errors)||void 0===o||null===(i=o.push)||void 0===i||i.call(o,"Unexpected item in field path compound: ".concat(JSON.stringify(e))))}));return n?void 0:o},ar=function e(t,r,n,o,i){if(null!=t){var l=n.settings.fieldSeparator;if("variable"==t.type||"property"==t.type){var a=go(n,t.val,null==i?void 0:i._groupField),u=jo(n,a),c="variable"==t.type;return{valueSrc:"field",valueType:null==u?void 0:u.type,isVariable:c,value:a}}if("compound"==t.type){var s=lr(t.children,o);if(s){var p,f=go(n,s.join(l),null==i?void 0:i._groupField),d=jo(n,f),v="variable"==(null===(p=t.children)||void 0===p||null===(p=p[0])||void 0===p?void 0:p.type);return{valueSrc:"field",valueType:null==d?void 0:d.type,isVariable:v,value:f}}}else{if(Yt[t.type]){var g=t.val,h=Yt[t.type];return null!=i&&i.isUnary&&(g=-g),{valueSrc:"value",valueType:h,value:g}}if("!new"==t.type&&Kt[t.cls.at(-1)]){var m=t.args.map((function(i){return e(i,r,n,o,t)})),y=null==m?void 0:m[0],b=Kt[t.cls.at(-1)];return Ht(Ht({},y),{},{valueType:b})}if("list"==t.type){var O,S=t.val.map((function(i){return e(i,r,n,o,t)}));return S.length&&(null===(O=S[0])||void 0===O||O.valueType),{valueSrc:"value",valueType:"multiselect",value:S.map((function(e){return null==e?void 0:e.value}))}}if("op-plus"==t.type&&"ternary"==(null==i?void 0:i.type))return mr(t,r,n,o)}var w=cr(t,r,n,o,i);if(void 0!==w)return w;o.errors.push("Can't convert arg of type ".concat(t.type))}},ur=function e(t,r){var n,o=[],i="",l=t.type,a=t.methodName,u=(t.val,t.obj),c=t.args,s=t.isVar,p=t.cls,f=t.children,d=null==f?void 0:f[f.length-1],v=r[r.length-1];if("!func"===l){for(var g=u;g;){var h,m=e(Ht(Ht({},g),{},{obj:null}),[{}]),y=(0,V.Z)(m,2),b=y[0],O=y[1];if("?"!==b){var S={s:v.s,params:(0,Z.Z)(v.params),objs:(0,Z.Z)(v.objs)};v.objs.unshift("?"),v.params.unshift(g),r.push(S),v=r[r.length-1]}v.objs.unshift(b),(h=v.params).unshift.apply(h,(0,Z.Z)(O)),g="!func"===g.type?g.obj:null}var w,F=zt(r);try{for(F.s();!(w=F.n()).done;){var j,C=w.value;o=[].concat((0,Z.Z)((null==C?void 0:C.params)||[]),(0,Z.Z)(c||[])),i="",null!=C&&null!==(j=C.objs)&&void 0!==j&&j.length&&(i+=C.objs.join(".")+"."),i+=(s?"#":"")+a,i+="("+(c||[]).map((function(e){return"?"})).join(", ")+")",C.s=i,C.params=o}}catch(e){F.e(e)}finally{F.f()}}else"!new"===l?(o=c||[],i="new ".concat(p.join("."),"(").concat(o.map((function(e){return"?"})).join(", "),")")):"!type"===l?i="T(".concat(p.join("."),")"):"compound"===l&&"property"===d.type&&(n=d.val,["length"].includes(n))?i=f.map((function(t){var r;if(t===d)return t.val;var n=e(Ht(Ht({},t),{},{obj:null}),[{}]),i=(0,V.Z)(n,2),l=i[0],a=i[1];return(r=o).push.apply(r,(0,Z.Z)(a)),l})).join("."):(o=[t],i="?");return v&&(v.s=i,v.params=o),[i,o]},cr=function(e,t,r,n,o){var i,l=function(i){return ar(i,t,r,n,Ht(Ht({},e),{},{_groupField:null==o?void 0:o._groupField}))},a=function(e){var t=[{s:"",params:[],objs:[]}];return ur(e,t),t.map((function(e){return{s:e.s,params:e.params}})).reverse().filter((function(e){var t=e.s;return""!==t&&"?"!==t}))}(e),u=null==a||null===(i=a[0])||void 0===i?void 0:i.s;a.length&&me.debug("Signatures for ",e,":",u,a);var c=sr(e,t,r,n,o,a,l);if(void 0!==c)return c;var s,p,f,d=pr(e,t,r,n,o,a,l);if(void 0!==d)return d;var v,g=zt(a);try{var h=function(){var e=v.value,n=e.s,o=e.params,i=t.funcs[n];if(i){s=i[0];var a=(p=mo(r,s)).spelFunc,u=o.map(l),c=(0,Z.Z)(a.matchAll(/\${(\w+)}/g)).map((function(e){var t=(0,V.Z)(e,2);return t[0],t[1]}));return f=Object.fromEntries(c.map((function(e,t){return[e,u[t]]}))),"break"}};for(g.s();!(v=g.n()).done&&"break"!==h(););}catch(e){g.e(e)}finally{g.f()}if(!s){var m,y=zt(co(r));try{for(y.s();!(m=y.n()).done;){var b=(0,V.Z)(m.value,2),O=b[0],S=b[1];if(S.spelImport){var w=void 0;try{w=S.spelImport(e)}catch(e){}if(w)for(var F in p=mo(r,s=O),f={},w)f[F]=l(w[F])}}}catch(e){y.e(e)}finally{y.f()}}if(s){var j={};for(var C in p.args){var E,L=p.args[C],k=f[C];if(void 0===k)if(void 0===(k=null==L?void 0:L.defaultValue)){if(null==L||!L.isOptional)return void n.errors.push("No value for arg ".concat(C," of func ").concat(s))}else k={value:k,valueSrc:null!==(E=k)&&void 0!==E&&E.func?"func":"value",valueType:L.type};k&&(j[C]=k)}return{valueSrc:"func",value:{func:s,args:j},valueType:p.returnType}}e.methodName&&n.errors.push("Signature ".concat(u," - failed to convert"))},sr=function(e,t,r,n,o,i,l){var a,u,c,s=[];for(var p in r.widgets){var f=r.widgets[p].spelImportFuncs;if(f)for(var d=0;d<f.length;d++){var v=f[d];if(Qt(v)){var g={};if(ve(v,e,g)){for(var h in g)g[h]=l(g[h]);s.push({s:"widgets.".concat(p,".spelImportFuncs[").concat(d,"]"),w:p,argsObj:g})}}}}var m,y=zt(i);try{for(y.s();!(m=y.n()).done;){var b,O=m.value,S=O.s,w=O.params,F=zt(t.valueFuncs[S]||[]);try{var j=function(){var e=b.value,t=e.w,r=e.argsOrder,n=w.map(l),o=Object.fromEntries(r.map((function(e,t){return[e,n[t]]})));s.push({s:S,w:t,argsObj:o})};for(F.s();!(b=F.n()).done;)j()}catch(e){F.e(e)}finally{F.f()}}}catch(e){y.e(e)}finally{y.f()}for(var C=0,E=s;C<E.length;C++){var L=E[C],k=L.s,P=L.w,T=L.argsObj,_=r.widgets[P],Z=_.spelImportValue,I=_.type;for(var D in c=P,u=k,a=[],T)["value"].includes(T[D].valueSrc)||a.push("".concat(D," has unsupported value src ").concat(T[D].valueSrc));var R=T.v.value;if(Z&&!a.length){var x=Z.call(r.ctx,T.v,_,T),A=(0,V.Z)(x,2);R=A[0],(a=A[1])&&!Array.isArray(a)&&(a=[a])}if(!a.length)return{valueSrc:"value",valueType:I,value:R}}c&&a.length&&n.errors.push("Signature ".concat(u," - looks like convertable to ").concat(c,", but: ").concat(a.join("; ")))},pr=function(e,t,r,n,o,i,l){var a,u,c,s,p=zt(i);try{for(p.s();!(s=p.n()).done;){var f,d=s.value,v=d.s,g=d.params,h=zt(t.opFuncs[v]||[]);try{var m=function(){var t,i=f.value,s=i.op,p=i.argsOrder,d=g.map(l);if(u=s,"!compare"===s){if(o.type.startsWith("op-")&&2==o.children.length&&"number"==o.children[1].type&&0===o.children[1].val)return{v:{type:"!compare",children:d}};a.push("Result of compareTo() should be compared to 0")}c=v,a=[];var h=r.operators[u],m=(h.spelOp,h.valueTypes),y=Object.fromEntries(p.map((function(e,t){return[e,d[t]]}))),b=y[0],O=Object.keys(y).filter((function(e){return parseInt(e)>0})).map((function(e){return y[e]})),S=null===(t=d.filter((function(e){return!!e})).find((function(e){return"value"===e.valueSrc})))||void 0===t?void 0:t.valueType;if(m&&S&&!m.includes(S)&&a.push("Op supports types ".concat(m,", but got ").concat(S)),!a.length)return{v:fr(r,n,b,u,O,e)}};for(h.s();!(f=h.n()).done;){var y=m();if("object"===(0,_.Z)(y))return y.v}}catch(e){h.e(e)}finally{h.f()}}}catch(e){p.e(e)}finally{p.f()}u&&a.length&&n.errors.push("Signature ".concat(c," - looks like convertable to ").concat(u,", but: ").concat(a.join("; ")))},fr=function(e,t,r,n,o,i){var l;if(!o.filter((function(e){return void 0===e})).length){var a=null!==(l=r)&&void 0!==l&&l.func?"func":"field";Qt(r)&&r.valueSrc&&(a=r.valueSrc,r=r.value);var u=jo(e,r);if(u){var c=!1;if(null!=i&&i.not){var s=e.operators[n];s.reversedOp?(n=s.reversedOp,i.not=!1):c=!0}var p=dn(e,r,n),f=e.widgets[p||u.mainWidget],d=o.map((function(e){return e.asyncListValues})).filter((function(e){return null!=e})),v=d.length?d[0]:void 0,g={type:"rule",id:q(),properties:Ht({field:r,fieldSrc:a,operator:n,value:o.map((function(e){return e.value})),valueSrc:o.map((function(e){return e.valueSrc})),valueType:o.map((function(e){return"value"==e.valueSrc&&((null==f?void 0:f.type)||(null==u?void 0:u.type))||e.valueType}))},v?{asyncListValues:v}:{})};return c&&(g=br(g,e,null==i?void 0:i.not),null!=i&&i.not&&(i.not=!1)),g}t.errors.push("No config for field ".concat(r))}},dr=function(e,t,r,n,o){var i=e.groupFilter,l=e.groupFieldValue;if("field"!=l.valueSrc)throw"Bad groupFieldValue: ".concat(JSON.stringify(l));var a=l.value,u=fr(n,o,a,t,r);if(u){var c,s=jo(n,a),p=null==s?void 0:s.mode;return(c="group"===(null==i?void 0:i.type)?Ht(Ht({},i||{}),{},{type:"rule_group",properties:Ht(Ht(Ht({},u.properties),(null==i?void 0:i.properties)||{}),{},{mode:p})}):Ht(Ht({},u||{}),{},i?{type:"rule_group",children1:[i],properties:Ht(Ht({},u.properties),{},{mode:p})}:{type:"rule_group",properties:Ht(Ht({},u.properties),{},{mode:p})})).id||(c.id=q()),c}},vr=function(e,t,r,n,o,i){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(e.type==t.type){if("!aggr"==e.type){var a=[e.source,t.source].map((function(e){return ar(e,n,o,i,Ht(Ht({},r),{},{_groupField:null==l?void 0:l._groupField}))})),u=(0,V.Z)(a,2),c=u[0],s=u[1];return c.value==s.value}var p=[e,t].map((function(e){return ar(e,n,o,i,Ht(Ht({},r),{},{_groupField:null==l?void 0:l._groupField}))})),f=(0,V.Z)(p,2),d=f[0],v=f[1];return d.value==v.value}return!1},gr=function(e,t,r,n){var o={},i=hr(null,e,t,r,n);return i&&(o[i.id]=i),{type:"switch_group",id:q(),children1:o,properties:{}}},hr=function(e,t,r,n,o){var i,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=yr(n,o,r,t,l);return e?(i=or(e,r,n,o,l))&&i.type?("group"!=i.type&&(i=br(i,n)),i.type="case_group"):(o.errors.push("Unexpected case: ".concat(JSON.stringify(i))),i=void 0):i={id:q(),type:"case_group",properties:{}},i&&(i.properties=Ht(Ht({},i.properties),a)),i},mr=function(e,t,r,n){var o=[];return function i(l){l.map((function(l){if("op-plus"==l.type)i(l.children);else{var a=ar(l,t,r,n,e);a?o.push(a):n.errors.push("Can't convert ".concat(l.type," in concatenation"))}}))}(e.children),{valueSrc:"value",valueType:"case_value",value:o}},yr=function(e,t,r,n){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l={};o="op-plus"==(null==n?void 0:n.type)?mr(n,r,e,t):ar(n,r,e,t,i);var a=e.widgets.case_value,u=null==a?void 0:a.spelImportValue;if(u){var c=u(o),s=(0,V.Z)(c,2),p=s[0];s[1].map((function(e){return t.errors.push(e)})),p&&(l={value:[p],valueSrc:["value"],valueType:["case_value"]})}else t.errors.push("No fucntion to import case value");return l},br=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"group",id:q(),children1:(0,T.Z)({},e.id,e),properties:{conjunction:Pr(t),not:r||!1}}};function Or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Or(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wr=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.settings.defaultField,o=(r?Fr(e,r):n)||t&&en(e,r)||null;return null==o||"string"==typeof o||ne(o)||(o=Ke(o)),o},Fr=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!r)return null;var n=(null==e||null===(t=e.settings)||void 0===t?void 0:t.fieldSeparator)||".",o=jo(e,r),i=null==o?void 0:o.defaultField;return i&&(i=[].concat((0,Z.Z)(So(r)),[i]).join(n)),i},jr=function(e){var t;return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(null===(t=e.settings.fieldSources)||void 0===t?void 0:t[0])||"field"},Cr=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.settings.defaultOperator,o=jo(e,t),i=(null==o?void 0:o.operators)||[];n&&!i.includes(n)&&(n=null);var l=null==o?void 0:o.defaultOperator;return l&&!i.includes(l)&&(l=null),!l&&r&&(l=nn(e,t)),(null==o?void 0:o._origDefaultOperator)&&l||n||l},Er=function(e,t,r){var n=t?Co(e,t,r):null;return n&&n.options?new(J().Map)(n.options&&n.options.defaults||{}):null},Lr=function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=null,c=null,s=null,p=e.settings.showErrorMessage;i?(s=null==i||null===(t=i.properties)||void 0===t?void 0:t.fieldSrc,u=null==i||null===(r=i.properties)||void 0===r?void 0:r.field,c=null==i||null===(n=i.properties)||void 0===n?void 0:n.operator):l?(s=(u=wr(e,a,o))?ne(u)?"func":"field":jr(e),c=Cr(e,u,!0)):s=jr(e);var f=new(J().Map)({fieldSrc:s,field:u,operator:c,value:new(J().List),valueSrc:new(J().List),operatorOptions:Er(e,c,u)});if(p&&(f=f.set("valueError",new(J().List))),u&&c){var d=Xr(e,e,f,u,c,"operator",!1),v=d.newValue,g=d.newValueSrc,h=d.newValueType,m=d.newValueError;f=f.set("value",v).set("valueSrc",g).set("valueType",h),p&&(f=f.set("valueError",m))}return f},kr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(t=jo(e,t))&&t.conjunctions||Object.keys(e.conjunctions);return 1==r.length?r[0]:e.settings.defaultGroupConjunction||e.settings.defaultConjunction||r[0]},Pr=function(e){return e.settings.defaultConjunction||Object.keys(e.conjunctions)[0]},Tr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(J().Map)({conjunction:kr(e,t),not:!1})},Vr=function(e,t){var r;return t&&"group"==t.type?Tr(e,null==t||null===(r=t.properties)||void 0===r?void 0:r.field):Lr(e,null,t)},_r=function(e,t){return(0,T.Z)({},e,new(J().Map)({type:"rule",id:e,properties:Lr(t)}))},Zr=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new(J().Map)({type:"group",id:q(),children1:new(J().OrderedMap)(t?Sr({},_r(q(),e)):{}),properties:Tr(e)})},Ir=function(e){return new(J().List)(e)},Dr=function(){return new(J().Map)},Rr=function(e,t,r,n,o,i){var l=xr(e,t,r,n,o,i);return De(l)},xr=function(e,t,r,n,o,i){return void 0===o&&(o=r.settings.removeEmptyGroupsOnLoad),void 0===i&&(i=r.settings.removeIncompleteRulesOnLoad),Ar(e,[],null,{},{config:r,oldConfig:n,removeEmptyGroups:o,removeIncompleteRules:i})};function Ar(e,t,r,n,o){var i=e.get("type"),l=e.get("children1");return("group"===i||"rule_group"===i||"case_group"==i||"switch_group"==i)&&l&&l.size?function(e,t,r,n,o){var i=o.removeEmptyGroups,l=e.get("id"),a=e.get("children1"),u=a;!l&&r&&(l=r,e=e.set("id",l),n.sanitized=!0);var c={};a=a.map((function(e,r){return Ar(e,t.concat(l),r,c,o)})),i&&(a=a.filter((function(e){return null!=e})));var s=c.sanitized||u.size!=a.size;return!a.size&&i&&t.length&&(s=!0,e=void 0),s&&(n.sanitized=!0),s&&e&&(e=e.set("children1",a)),e}(e,t,r,n,o):"rule"===i?function(e,t,r,n,o){var i,l,a,u,c=o.removeIncompleteRules,s=o.config,p=o.oldConfig,f=s.settings.showErrorMessage,d=e.get("id"),v=e.get("properties"),g=v.get("field")||null,h=v.get("fieldSrc")||null,m=v.get("operator")||null,y=v.get("operatorOptions"),b=v.get("valueSrc"),O=v.get("value"),S=v.get("valueError"),w={field:(null===(i=g)||void 0===i||null===(l=i.toJS)||void 0===l?void 0:l.call(i))||g,fieldSrc:h,operator:m,operatorOptions:y?y.toJS():{},valueSrc:b?b.toJS():null,value:O?O.toJS():null,valueError:S?S.toJS():null};g&&m&&O&&O.includes(void 0),!d&&r&&(d=r,e=e.set("id",d),n.sanitized=!0);var F=g?jo(s,g):null;g&&!F&&(me.warn("No config for field ".concat(g)),g=null),null==g&&(v=["operator","operatorOptions","valueSrc","value","valueError"].reduce((function(e,t){return e.delete(t)}),v),m=null),h||(h=Fo(g),v=v.set("fieldSrc",h)),"range_between"!=m&&"range_not_between"!=m||(m="range_between"==m?"between":"not_between",console.info("Fixed operator ".concat(v.get("operator")," to ").concat(m)),v=v.set("operator",m));var j=m?Co(s,m,g):null;m&&!j&&(console.warn("No config for operator ".concat(m)),m=null);var C=g?rn(s,g):[];g&&(null!=C&&C.length?m&&-1==C.indexOf(m)&&("is_empty"==m||"is_not_empty"==m?(m="is_empty"==m?"is_null":"is_not_null",console.info("Fixed operator ".concat(v.get("operator")," to ").concat(m," for ").concat(g)),v=v.set("operator",m)):(console.warn("Operator ".concat(m," is not supported for field ").concat(g)),m=null)):(console.warn("Type of field ".concat(g," is not supported")),m=null)),null==m&&(v=(v=(v=(v=v.delete("operatorOptions")).delete("valueSrc")).delete("value")).delete("valueError")),y=v.get("operatorOptions"),m&&ee(j.cardinality,1),!m||y&&!j.options?(y=null,v=v.delete("operatorOptions")):m&&!y&&j.options&&(y=Er(s,m,g),v=v.set("operatorOptions",y)),b=v.get("valueSrc"),O=v.get("value");var E=Xr(s,p,v,g,m,null,!f,!0),L=E.newValue,k=E.newValueSrc,P=E.newValueError;O=L,b=k,S=P,v=(v=v.set("value",O)).set("valueSrc",b),v=f?v.set("valueError",S):v.delete("valueError");var T={field:(null===(a=g)||void 0===a||null===(u=a.toJS)||void 0===u?void 0:u.call(a))||g,fieldSrc:h,operator:m,operatorOptions:y?y.toJS():{},valueSrc:b?b.toJS():null,value:O?O.toJS():null,valueError:S?S.toJS():null},V=!te(w,T),_=O&&0==O.filter((function(e,t){return!wn(e,b.get(t),s)})).size,Z=wn(g,h,s),I=Z&&m&&_;if(V&&(n.sanitized=!0),!I&&c){var D,R,x,A="Uncomplete rule";Z?(A="Uncomplete RHS",null!==(D=T.valueSrc)&&void 0!==D&&D[0]&&(null===(R=T.valueSrc)||void 0===R?void 0:R[0])!=(null===(x=w.valueSrc)||void 0===x?void 0:x[0])&&(A="Bad value src ".concat(T.valueSrc))):A="Uncomplete LHS",console.warn("[RAQB validate]","Removing rule: ",w,"Reason: ".concat(A)),e=void 0}else V&&(e=e.set("properties",v));return e}(e,0,r,n,o):e}var Nr=function(e,t,r,n,o,i,l,a){var u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],s=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],p=null,f=o;if(null!=o){if("field"==l){var d=qr(t,r,o,l,i,a,e,n,c,u),v=(0,V.Z)(d,2);p=v[0],f=v[1]}else if("func"==l){var g=Wr(t,r,o,l,i,a,e,n,c,u),h=(0,V.Z)(g,2);p=h[0],f=h[1]}else if("value"==l||!l){var m=Mr(t,r,o,l,i,a,e,n,c,u),y=(0,V.Z)(m,2);p=y[0],f=y[1]}if(!p){jo(e,r);var b=dn(e,r,n,l),O=n?Co(e,n,r):null,S=Y()(Eo(e,r,n,b,l),["factory"]),w="field"==l?jo(e,o):null,F=S,j=S.validateValue;if("function"==typeof j){var C=[f,F,n,O];"field"==l&&C.push(w);var E=j.call.apply(j,[e.ctx].concat(C));"boolean"==typeof E?0==E&&(p="Invalid value"):p=E}}}return s&&p&&console.warn("[RAQB validate]","Field ".concat(r,": ").concat(p)),[p,f]},Mr=function(e,t,r,n,o,i,l){var a,u,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,s=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=arguments.length>9&&void 0!==arguments[9]&&arguments[9];if(t){var f=jo(l,t),d=dn(l,t,c,n),v=l.widgets[d],g=null==v?void 0:v.type,h=null==v?void 0:v.jsType,m=f.fieldSettings,y=(null==m?void 0:m.treeValues)||(null==m?void 0:m.listValues),b=!(null==m||!m.asyncFetch),O=y||b;if(o&&g&&o!=g)return["Value should have type ".concat(g,", but got value of type ").concat(o),r];if(h&&(u=h,function(e){return"object"==(0,_.Z)(e)&&null!==e&&Array.isArray(e)?"array":(0,_.Z)(e)}(a=r)!=u&&("number"!=u||isNaN(a)))&&!O)return["Value should have JS type ".concat(h,", but got value of type ").concat((0,_.Z)(r)),r];if(m){var S=i||y;if(S&&!m.allowCustomValues)return function(e,t,r,n,o){var i=U.List.isList(e)?e.toJS():e instanceof Array?(0,Z.Z)(e):void 0;if(i){var l=i.reduce((function(e,r){var n=(0,V.Z)(e,2),o=n[0],i=n[1],l=Ce(t,r);return null==l?[o,[].concat((0,Z.Z)(i),[r])]:[[].concat((0,Z.Z)(o),[l.value]),i]}),[[],[]]),a=(0,V.Z)(l,2),u=a[0],c=a[1],s=c.length>1;return[c.length?"".concat(s?"Values":"Value"," ").concat(c.join(", ")," ").concat(s?"are":"is"," not in list of values"):null,(r=void 0!==o?o:r||n)?u:e]}var p=Ce(t,e);return null==p?["Value ".concat(e," is not in list of values"),e]:[null,e=p.value]}(r,S,p,s,l.settings.removeInvalidMultiSelectValuesOnLoad);if(null!=m.min&&r<m.min)return["Value ".concat(r," < min ").concat(m.min),p?m.min:r];if(null!=m.max&&r>m.max)return["Value ".concat(r," > max ").concat(m.max),p?m.max:r]}}return[null,r]},qr=function(e,t,r,n,o,i,l){var a=l.settings.fieldSeparator,u="object"==(0,_.Z)(t)&&(null==t?void 0:t._isFuncArg),c=Array.isArray(e)?e.join(a):e,s=Array.isArray(r)?r.join(a):r,p=jo(l,r);return p?s!=c||u?o&&o!=p.type?["Field ".concat(r," is of type ").concat(p.type,", but expected ").concat(o),r]:[null,r]:["Can't compare field ".concat(e," with itself"),r]:["Unknown field ".concat(r),r]},Wr=function(e,t,r,n,o,i,l){var a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],s=r;if(r){var p=r.get("func");if(p){var f=mo(l,p);if(!f)return["Unknown function ".concat(p),r];if(o&&f.returnType!=o)return["Function ".concat(p," should return value of type ").concat(f.returnType,", but got ").concat(o),r];for(var d in f.args){var v=f.args[d],g=s.get("args"),h=g?g.get(d):void 0,m=jo(l,v),y=h?h.get("value"):void 0,b=h?h.get("valueSrc"):void 0;if(void 0!==y){var O=Nr(l,e,m,a,y,v.type,b,i,c,u,!1),S=(0,V.Z)(O,2),w=S[0],F=S[1];if(null!==w){if(!c)return["Invalid value of arg ".concat(d," for func ").concat(p,": ").concat(w),r];s=s.deleteIn(["args",d]),void 0!==v.defaultValue&&(s=(s=s.setIn(["args",d,"value"],v.defaultValue)).setIn(["args",d,"valueSrc"],"value"))}else F!==y&&(s=s.setIn(["args",d,"value"],F))}else if(u&&void 0===v.defaultValue&&!c&&!v.isOptional)return["Value of arg ".concat(d," for func ").concat(p," is required"),r]}}}return[null,s]},Br=r(77875),Gr=r.n(Br),$r=function(e){return"object"==(0,_.Z)(e)&&null!==e&&!Array.isArray(e)},zr=function(e,t){if(e){var r=e.get("func"),n=r&&mo(t,r);if(n){var o=e,i=!1;for(var l in n.args){var a=n.args[l],u=a.valueSources,c=a.isOptional,s=a.defaultValue,p=pn(t,u,a),f=o.get("args"),d=1==p.length?p[0]:void 0,v=f?f.get(l):void 0,g=v?v.get("value"):void 0,h=(v?v.get("valueSrc"):void 0)||d;if(void 0!==g){var m=Fn(g,h,t);if(void 0===m)return;if(m!==g&&(o=o.setIn(["args",l,"value"],m)),i)return}else if(void 0===s||$r(s)){if(!c)return;i=!0}else o=(o=o.setIn(["args",l,"value"],Jr(a))).setIn(["args",l,"valueSrc"],"value")}return o}}},Ur=function(e,t,r){var n=r.settings.fieldSeparator;e=e||new(J().Map),Array.isArray(t)&&(t=t.join(n));var o=e.get("func"),i=e.get("args");e=e.set("func",t);var l=t&&mo(r,t),a=t&&ho(r,t),u=o&&ho(r,o),c=Kr(u,a,i,r);if(e=c.length?Object.keys(a.args).filter((function(e){return!c.includes(e)})).reduce((function(e,t){return e.deleteIn(["args",t])}),e):e.set("args",new(J().Map)),l)for(var s in l.args){var p=l.args[s],f=p.valueSources,d=p.defaultValue,v=pn(r,f,p),g=v.length?v[0]:void 0,h=(d?$r(d)&&d.func?"func":"value":void 0)||g;e.getIn(["args",s])||(void 0!==d&&(e=e.setIn(["args",s,"value"],Jr(p))),h&&(e=e.setIn(["args",s,"valueSrc"],h)))}return e},Jr=function(e){var t=e.defaultValue;return $r(t)&&!J().Map.isMap(t)&&t.func?J().fromJS(t,(function(e,t){return J().Iterable.isIndexed(t)?t.toList():t.toOrderedMap()})):t},Hr=function(e,t,r,n,o){if(e&&e.get("func")){var i=(e=e.setIn(["args",t,"value"],r)).getIn(["args",t,"valueSrc"]),l=n.valueSources,a=pn(o,l,n),u=1==a.length?a[0]:void 0;!u&&a.includes("value")&&(u="value"),!i&&u&&(e=e.setIn(["args",t,"valueSrc"],u))}return e},Yr=function(e,t,r,n,o){return e&&e.get("func")&&(e=e.setIn(["args",t],new(J().Map)({valueSrc:r}))),e},Kr=function(e,t,r,n){return(null==e?void 0:e.returnType)!=(null==t?void 0:t.returnType)?[]:Object.keys(t.args).filter((function(o,i){var l=t.args[o],a=e.args[o];if(Object.keys(e.args).indexOf(o),!a&&(void 0!==l.defaultValue||l.isOptional))return!0;if((null==a?void 0:a.type)!=l.type)return!1;if(Qr.includes(l.type)&&(!a.listValuesType||a.listValuesType!==l.listValuesType))return!1;if(r){var u=r.get(o),c=null==u?void 0:u.get("value"),s=null==u?void 0:u.get("valueSrc");if(l.valueSources&&!l.valueSources.includes(s))return!1;var p=Nr(n,null,l,null,c,l.type,s,null,!1,!0,!1),f=(0,V.Z)(p,2),d=f[0];if(f[1],d)return!1}return!0}))},Qr=["select","multiselect","treeselect","treemultiselect"],Xr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];t||(t=e);var u=e.settings.keepInputOnChangeFieldSrc,c=r.get("field"),s=r.get("fieldType"),p=r.get("operator"),f=r.get("value"),d=r.get("valueSrc",new(J().List)),v=r.get("valueType",new(J().List)),g=r.get("asyncListValues"),h=e.settings,m=h.convertableWidgets,y=h.clearValueOnChangeField,b=h.clearValueOnChangeOp,O=h.showErrorMessage,S=Co(e,o,n),w=o?ee(S.cardinality,1):null,F=jo(t,c),j=jo(e,n),C=!c&&s&&u,E=(null==F?void 0:F.type)||s,L=(null==j?void 0:j.type)||!n&&C&&E,k=(c||C)&&p&&o&&null!=f;if((k=(k=k&&(!i||"field"==i&&!y||"operator"==i&&!b))&&E&&L&&E==L)&&Qr.includes(L)&&"field"==i){var P=null==j?void 0:j.listValuesType,T=null==F?void 0:F.listValuesType;P&&P===T||(k=!1)}for(var _=0;_<w;_++){var Z=d.get(_)||null,I=dn(t,c,p,Z),D=dn(e,n,o,Z),R="value"==Z?I:dn(t,c,p,"value"),x="value"==Z?D:dn(e,n,o,"value");x==R||(m[R]||[]).includes(x)||!R&&C||(k=!1)}p!=o&&[p,o].includes("proximity")&&(k=!1);var A=Eo(e,n,o,null,d.first()),N=fn(e,n,o,null);!n&&C&&(N=Object.keys(e.settings.valueSourcesInfo));var M={},q=Array.from({length:w},(function(){return null}));if(k)for(var W=function(){var t=f.get(B),r=v.get(B)||null,u=d.get(B)||null,c=null!=N.find((function(e){return e==u}));!c&&B>0&&null==u&&(c=!0);var s=Nr(e,n,n,o,t,r,u,g,l,a,!0),p=(0,V.Z)(s,2),h=p[0],m=p[1],y=m!==t,b=!c||!!h&&("field"==i||!O&&!y);if(!!h&&O&&!b&&!y&&(q[B]=h),y&&(M[B]=m),b)return k=!1,"break"},B=0;B<w&&"break"!==W();B++);var G,$=null,z=null,U=null;if($=new(J().List)(Array.from({length:w},(function(e,t){var r=void 0;if(k)t<f.size&&(r=f.get(t),void 0!==M[t]&&(r=M[t]));else if(1==w){var n;r=he([null==j?void 0:j.defaultValue,null==j||null===(n=j.fieldSettings)||void 0===n?void 0:n.defaultValue,null==A?void 0:A.defaultValue])}return r}))),z=new(J().List)(Array.from({length:w},(function(e,t){var r=null;return k?t<d.size&&(r=d.get(t)):(1==N.length||N.length>1)&&(r=N[0]),r}))),O){if(S&&S.validateValues&&z.toJS().filter((function(e){return"value"==e||null==e})).length==w){var H=A&&A.toJS?$.toJS().map((function(t){return A.toJS.call(e.ctx,t,A)})):$.toJS(),Y=S.validateValues(H);O&&q.push(Y)}U=new(J().List)(q)}return G=new(J().List)(Array.from({length:w},(function(e,t){var r=null;return k?t<v.size&&(r=v.get(t)):1==w&&A&&void 0!==A.type?r=A.type:1==w&&j&&void 0!==j.type&&(r="!group"==j.type?"number":j.type),r}))),{canReuseValue:k,newValue:$,newValueSrc:z,newValueType:G,newValueError:U,operatorCardinality:w}},en=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.settings.fieldSeparator,n=So(t,e),o=t?fo(e,t):e,i=null,l=[];do{var a,u=o===e?e.fields:null===(a=o)||void 0===a?void 0:a.subfields;if(!u||!Object.keys(u).length){o=i=null;break}i=Object.keys(u)[0],l.push(i),o=u[i]}while("!struct"==o.type||"!group"==o.type);return(n||[]).concat(l).join(r)},tn=function(e,t){var r;return(null===(r=e.types[t])||void 0===r?void 0:r.operators)||null},rn=function(e,t){var r=jo(e,t);return r?r.operators:[]},nn=function(e,t){var r,n=rn(e,t);return null!==(r=null==n?void 0:n[0])&&void 0!==r?r:null},on=function(e,t){return ln(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,"funcs","subfields")},ln=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fields",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"subfields";if(!e)return null;var i=t.settings.fieldSeparator,l=So(e,t),a=So(r,t);return l.slice(a.length).map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return[].concat((0,Z.Z)(a),(0,Z.Z)(e)).join(i)})).map((function(e){var r=fo(t,e,n,o);return r&&r.label||Gr()(e.split(i))})).filter((function(e){return null!=e}))},an=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;var n=r&&fo(t,r)||null,o=t.settings.fieldSeparator,i=So(e,t),l=bo(e,r,t)?So(r,t):[];return i.slice(l.length).map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return{part:[].concat((0,Z.Z)(l),(0,Z.Z)(e)).join(o),key:e[e.length-1]}})).map((function(e){var r=e.part;return{key:e.key,cnf:fo(t,r)}})).map((function(e,t,r){return[e.key,e.cnf,t>0?r[t-1].cnf:n]}))},un=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=t&&"object"==(0,_.Z)(t)&&!!t.func&&!!t.arg,a=e.settings.showLabels,u=jo(e,t),c=Eo(e,t,r,null,o)||{},s=Co(e,r,t)||{},p=null;if((i?1:s.cardinality)>1){var f=c.valueLabels||s.valueLabels;f&&(p=f[n]),p&&"object"!=(0,_.Z)(p)&&(p={label:p,placeholder:p}),p||(p={label:e.settings.valueLabel+" "+(n+1),placeholder:e.settings.valuePlaceholder+" "+(n+1)})}else{var d=c.valueLabel,v=c.valuePlaceholder;l&&(d||(d=u.label||t.arg),v||a||(v=u.label||t.arg)),p={label:d||e.settings.valueLabel,placeholder:v||e.settings.valuePlaceholder}}return p};function cn(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[],i=[];if(!t)return{widgets:o,valueSrcs:i};var l="object"==(0,_.Z)(t)&&(!!t.func&&!!t.arg||t._isFuncArg),a=jo(e,t),u=r?e.operators[r]:null;if(null!=a&&a.widgets){var c=function(){var c=a.widgets[s];if(!e.widgets[s])return"continue";var p=e.widgets[s].valueSrc||"value",f=!0;if("field"==s&&(f=f&&pn(e,["field"],a).length>0),"func"==s&&(f=f&&pn(e,["func"],a).length>0),"value"!=n||c.operators||l||"!case_value"==t||(f=!1),c.operators&&r&&(f=f&&-1!=c.operators.indexOf(r)),n&&n!=p&&"const"!=n&&(f=!1),u&&0==u.cardinality&&"value"!=p&&(f=!1),f){var d,v;o.push(s);var g=-1!=(null===(d=a.valueSources)||void 0===d?void 0:d.indexOf(p));-1==(null==u||null===(v=u.valueSources)||void 0===v?void 0:v.indexOf(p))&&(g=!1),g&&!i.find((function(e){return e==p}))&&i.push(p)}};for(var s in a.widgets)c()}var p=function(e){var t=0;return a.preferWidgets?a.preferWidgets.includes(e)&&(t+=10-a.preferWidgets.indexOf(e)):e==a.mainWidget&&(t+=100),"field"==e&&(t-=1),"func"==e&&(t-=2),t};return o.sort((function(e,t){return p(t)-p(e)})),{widgets:o,valueSrcs:i}}var sn=function(e,t,r){return cn(e,t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null).widgets},pn=function(e,t,r){var n;if(!r)return t;var o=null!==(n=r.type)&&void 0!==n?n:r.returnType;return t||(t=Object.keys(e.settings.valueSourcesInfo)),t.filter((function(t){var n=!0;if("field"==t&&e.__fieldsCntByType){var i=r._isFuncArg?0:1;n=n&&e.__fieldsCntByType[o]>i}return"func"==t&&(e.__funcsCntByType&&(n=n&&!!e.__funcsCntByType[o]),r.funcs&&(n=n&&r.funcs.length>0)),n}))},fn=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=cn(e,t,r,null).valueSrcs;return pn(e,o,n)},dn=function(e,t,r){var n=cn(e,t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null).widgets,o=null;return n.length&&(o=n[0]),o},vn=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(e){var i=jo(t,e)||{},l=t.settings.fieldSeparator,a=So(e,t),u=Array.isArray(e)?e.join(l):e;if(null!=o&&o.useTableName&&i.tableName){var c=(0,Z.Z)(a);c[0]=i.tableName,u=c.join(l)}if(i.fieldName&&(u=i.fieldName),n){jo(t,n);var s=n;0==u.indexOf(s+l)?u=u.slice((s+l).length):i.fieldName||r.errors.push("Can't cut group ".concat(s," from field ").concat(u))}return u}},gn=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.get("type"),o=e.getIn(["properties","mode"]);return"rule_group"==n&&"array"==o?hn(e,t,r):"group"==n||"rule_group"==n?yn(e,t,r):Sn(e,t,r)},hn=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.get("children1"),o=e.get("properties");return mn(o.toObject(),n,t,r)},mn=function(e,t,r){var n,o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=e.operator,a=null!==(n=null===(o=r.operators[l])||void 0===o?void 0:o.cardinality)&&void 0!==n?n:1;return!(2==[!On(e,r,!1),a>0||!bn(t,r,i)].filter((function(e){return!!e})).length)},yn=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.get("children1");return bn(n,t,r)},bn=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!e||0==e.size||e.size>0&&0==e.filter((function(e){return!gn(e,t,r)})).size},On=function(e,t){var r,n,o=e.field,i=e.fieldSrc,l=e.fieldType,a=e.operator,u=e.value,c=e.valueSrc,s=(e.valueType,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),p=null!==(r=null===(n=t.operators[a])||void 0===n?void 0:n.cardinality)&&void 0!==r?r:1;return!(3==[s?null!==o||null!=l:wn(o,i,t,s),!!a,u.filter((function(e,r){var n;return wn(e,(null==c||null===(n=c.get)||void 0===n?void 0:n.call(c,r))||(null==c?void 0:c[r]),t,s)})).size>=p].filter((function(e){return!!e})).length)},Sn=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.get("properties");return On(n.toObject(),t,r)},wn=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!o&&"func"==r&&t){var i=t.get("func"),l=mo(n,i);if(l){var a=t.get("args");for(var u in l.args){var c=l.args[u],s=a?a.get(u):void 0,p=s?s.get("value"):void 0,f=s?s.get("valueSrc"):void 0;if(null==p&&void 0===(null==c?void 0:c.defaultValue)&&(null==c||!c.isOptional))return!1;if(null!=p&&!e(p,f,n,o))return!1}return!0}}return null!=t},Fn=function(e,t,r){return"func"==t?zr(e,r):e},jn=r(89937),Cn=r.n(jn),En=r(53660),Ln=r.n(En);function kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tn(e,t){return Ln().apply(e,t)}var Vn={CALL:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return e.call.apply(e,[t].concat(n))},JSX:function(e,t){return{type:e,props:t}},mergeObjects:function(e,t){return Pn(Pn({},e),t)},fromEntries:function(e){return Object.fromEntries(e)},strlen:function(e){return(null==e?void 0:e.length)||0},regexTest:function(e,t,r){return null!=(null==e?void 0:e.match(new RegExp(t,r)))},now:function(){return new Date},date_add:function(e,t,r){return z()(e).add(t,r).toDate()},toLowerCase:function(e){return e.toLowerCase()},toUpperCase:function(e){return e.toUpperCase()}};function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function In(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dn(e,t,r){var n;try{n=Ln().apply(e,t)}catch(e){throw e.message="".concat(r.join(".")," :: ").concat(e.message),e}return n}function Rn(e,t,r,n){var o;try{o=t.call.apply(t,[e].concat((0,Z.Z)(r)))}catch(e){throw e.message="".concat(n.join(".")," :: ").concat(e.message),e}return o}!function(){for(var e in Vn)t=e,r=Vn[e],Ln().add_operation(t,r);var t,r}();var xn=["conjunctions","fields","types","operators","widgets","settings","funcs","ctx"],An={asyncFetch:{type:"f",args:["search","offset"]},labelYes:{type:"r"},labelNo:{type:"r"},marks:{type:"r",isArr:!0},validateValue:{type:"f",args:["val","fieldSettings","op","opDef","rightFieldDef"]}},Nn=In(In({},An),{},{factory:{type:"rf"},formatValue:{type:"f",args:["val","fieldDef","wgtDef","isForDisplay","op","opDef","rightFieldDef"]},sqlFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef","rightFieldDef"]},spelFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef","rightFieldDef"]},spelImportValue:{type:"f",args:["val","wgtDef","args"]},mongoFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef"]},elasticSearchFormatValue:{type:"f",args:["queryType","val","op","field","config"]},jsonLogic:{type:"f",args:["val","fieldDef","wgtDef","op","opDef"]},validateValue:{type:"f",args:["val","fieldSettings","op","opDef","rightFieldDef"]},toJS:{type:"f",args:["val"]}}),Mn={options:{factory:{type:"rf"}},formatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","isForDisplay","fieldDef"]},mongoFormatOp:{type:"f",args:["field","op","vals","useExpr","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},sqlFormatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},spelFormatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},jsonLogic:{type:"f",ignore:"string",args:["field","op","vals","opDef","operatorOptions","fieldDef"]},elasticSearchQueryType:{type:"f",ignore:"string",args:["valueType"]},textSeparators:{type:"r",isArr:!0}},qn={widgetProps:Nn,opProps:Mn},Wn={fields:{x:{fieldSettings:An,widgets:{x:qn},mainWidgetProps:Nn}},widgets:{x:Nn},conjunctions:{x:{formatConj:{type:"f",args:["children","conj","not","isForDisplay"]},sqlFormatConj:{type:"f",args:["children","conj","not"]},spelFormatConj:{type:"f",args:["children","conj","not","omitBrackets"]}}},operators:{x:Mn},types:{x:{widgets:{x:qn}}},funcs:{x:{renderBrackets:{type:"r",isArr:!0},renderSeps:{type:"r",isArr:!0},jsonLogic:{type:"f",ignore:"string",args:["formattedArgs"]},jsonLogicImport:{type:"f",args:["val"]},spelImport:{type:"f",args:["spel"]},formatFunc:{type:"f",args:["formattedArgs","isForDisplay"]},sqlFormatFunc:{type:"f",args:["formattedArgs"]},mongoFormatFunc:{type:"f",args:["formattedArgs"]},spelFormatFunc:{type:"f",args:["formattedArgs"]}}},settings:{locale:{mui:{type:"f",args:[],invokeWith:[],ignore:"jl"}},canCompareFieldWithField:{type:"f",args:["leftField","leftFieldConfig","rightField","rightFieldConfig","op"]},formatReverse:{type:"f",args:["q","op","reversedOp","operatorDefinition","revOperatorDefinition","isForDisplay"]},sqlFormatReverse:{type:"f",args:["q"]},spelFormatReverse:{type:"f",args:["q"]},celFormatReverse:{type:"f",args:["q"]},formatField:{type:"f",args:["field","parts","label2","fieldDefinition","config","isForDisplay"]},formatSpelField:{type:"f",args:["field","parentField","parts","partsExt","fieldDefinition","config"]},formatAggr:{type:"f",args:["whereStr","aggrField","operator","value","valueSrc","valueType","opDef","operatorOptions","isForDisplay","aggrFieldDef"]},normalizeListValues:{type:"f",args:["listValues","type","fieldSettings"]},renderConfirm:{type:"f",args:["props"]},useConfirm:{type:"f",args:[]},renderField:{type:"rf"},renderOperator:{type:"rf"},renderFunc:{type:"rf"},renderConjs:{type:"rf"},renderButton:{type:"rf"},renderIcon:{type:"rf"},renderButtonGroup:{type:"rf"},renderValueSources:{type:"rf"},renderFieldSources:{type:"rf"},renderProvider:{type:"rf"},renderSwitch:{type:"rf"},renderSwitchPrefix:{type:"r"},renderItem:{type:"rf"},renderBeforeWidget:{type:"rf"},renderAfterWidget:{type:"rf"},renderBeforeActions:{type:"rf"},renderAfterActions:{type:"rf"},renderRuleError:{type:"rf"}}},Bn=function(e){return"object"==(0,_.Z)(e)&&null!==e&&!Array.isArray(e)},Gn=function(e,t){if(e.__fieldNames)throw new Error("Don't apply `compressConfig()` to extended config");var r=N()(e,xn);delete r.ctx;for(var n=function e(t,r,n,o){if(Bn(t)){if(ue(t)&&(t=ae(t)),"funcs"===n[0]&&!r){var i=n[n.length-1];(r=fo({funcs:o.BasicFuncs},i,"funcs","subfields")||void 0)&&(t.$$key=i)}if(void 0!==r&&Bn(r))for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(!Object.keys(t).includes(l)||void 0===t[l]&&void 0!==r[l]?t[l]="$$deleted":(t[l]=e(t[l],r[l],[].concat((0,Z.Z)(n),[l]),o),void 0===t[l]&&delete t[l]));for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u;r&&Object.keys(r).includes(a)||(t[a]=e(t[a],null===(u=r)||void 0===u?void 0:u[a],[].concat((0,Z.Z)(n),[a]),o)),void 0===t[a]&&delete t[a]}0===Object.keys(t).length&&(t=void 0)}else Array.isArray(t)&&t.forEach((function(r,i){t[i]=e(t[i],void 0,[].concat((0,Z.Z)(n),[i]),o)}));if(void 0===r||!re(t,r,!0)){if("function"==typeof t)throw new Error("compressConfig: function at ".concat(n.join(".")," should be converted to JsonLogic"));return t}},o=0,i=xn;o<i.length;o++){var l=i[o];if("ctx"===l);else if("fields"===l)r[l]=Cn()(r[l]),n(r[l],{},[l]);else if("funcs"===l)for(var a in r[l]=Cn()(r[l]||{}),r[l])n(r[l][a],null,[l,a],{BasicFuncs:g});else r[l]=Cn()(r[l]),n(r[l],t[l],[l])}return r},$n=function(e,t,r){if(!e.settings.useConfigCompress)throw new Error("Please enable `useConfigCompress` in config settings to use decompressConfig()");for(var n={},o=function e(t,r,n){if(Bn(r))for(var o in Bn(t)||(t={}),r)Object.prototype.hasOwnProperty.call(r,o)&&("$$deleted"===r[o]?delete t[o]:t[o]=e(t[o],r[o],[].concat((0,Z.Z)(n),[o])));else t=Array.isArray(r)?Cn()(r):r;return t},i=function e(t,r,n){var i=!1;if(Bn(t)&&Object.prototype.hasOwnProperty.call(t,"$$key")&&t.$$key){var l=fo({funcs:n.BasicFuncs},t.$$key,"funcs","subfields");if(!l)throw new Error("decompressConfig: basic function not found by key ".concat(t.$$key," at ").concat(r.join(".")));delete t.$$key,t=o(Cn()(l),t,r),i=!0}if(!i)if(Bn(t))for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(t[a]=e(t[a],[].concat((0,Z.Z)(r),[a]),n));else if(Array.isArray(t)){var u,c=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return _n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}(t);try{for(c.s();!(u=c.n()).done;){var s=u.value;t[s]=e(t[s],[].concat((0,Z.Z)(r),[s]),n)}}catch(e){c.e(e)}finally{c.f()}}return t},l=0,a=xn;l<a.length;l++){var u=a[l];"ctx"===u?n[u]=x()({},t.ctx||{},r||{}):"funcs"===u?(n[u]=Cn()(e[u]||{}),i(n[u],[u],{BasicFuncs:g})):"fields"===u?n[u]=Cn()(e[u]||{}):(n[u]=Cn()(t[u]||{}),o(n[u],e[u]||{},[u]))}return n},zn=function(e){return e.__compliled||(Un(e=Cn()(e),e,{ctx:e.ctx},Wn,[]),Object.defineProperty(e,"__compliled",{enumerable:!1,writable:!1,value:!0})),e};function Un(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];if(t)for(var l in i.length,n){var a=n[l],u="x"===l?i:[].concat((0,Z.Z)(i),[l]);if("r"===a.type){var c=t,s=c[l];if(a.isArr)for(var p in s){var f=Yn(s[p],r,[].concat((0,Z.Z)(u),[p]));f!==s[p]&&(o.push("Compiled ".concat(u.join("."),"[").concat(p,"]")),s[p]=f)}else{var d=Yn(s,r,u,void 0);d!==s&&(o.push("Compiled R ".concat(u.join("."))),c[l]=d)}}else if("rf"===a.type){var v=t,g=v[l],h=Jn(g,r,u,a.ignore);h!==g&&(o.push("Compiled JL-RF ".concat(u.join("."))),v[l]=h)}else if("f"===a.type){var m,y=t,b=y[l],O=Hn(b,r,u,a.args,a.ignore);a.invokeWith&&O&&"function"==typeof O&&(O=(m=O).call.apply(m,[null].concat((0,Z.Z)(a.invokeWith)))),O!==b&&(o.push("Compiled JL-F ".concat(u.join("."))),y[l]=O)}else if("x"===l)for(var S in t){u=[].concat((0,Z.Z)(i),[S]);var w=t[S];Un(e,w,r,a,o,u),w.subfields&&Un(e,w.subfields,r,n,o,u)}else Un(e,t[l],r,a,o,u)}}function Jn(e,t,r){return se(e)?function(n,o){o=o||(null==t?void 0:t.ctx);var i=Dn(e,{props:n,ctx:o},r);return"string"==typeof i&&(i={type:i,props:n}),Yn(i,{ctx:o},r)}:"string"==typeof e?function(n,o){o=o||(null==t?void 0:t.ctx);var i=e.split(".").reduce((function(e,t){return null==e?void 0:e[t]}),o);return i?Rn(this,i,[n,o],r):Yn({type:e,props:n},{ctx:o},r)}:e}function Hn(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return se(e)&&"jl"!==o?function(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];var a=this||(null==t?void 0:t.ctx),u=(n||[]).reduce((function(e,t,r){return In(In({},e),{},(0,T.Z)({},t,i[r]))}),{args:i,ctx:a});return Dn(e,u,r)}.bind(null==t?void 0:t.ctx):"string"==typeof e&&"string"!==o?function(){var n=this||(null==t?void 0:t.ctx),o=e.split(".").reduce((function(e,t){return null==e?void 0:e[t]}),n);if(o){for(var i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return Rn(this,o,l,r)}throw new Error("".concat(r.join(".")," :: Function ").concat(e," is not found in ctx"))}.bind(null==t?void 0:t.ctx):e}function Yn(e,t,r){var n,o,i,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(ce(e)){var a,u=e.type,c=e.props;if("string"!=typeof u)throw new Error("renderReactElement for ".concat(r.join("."),": type should be string"));var s,p=(n=u,(null==(o=t.ctx)||null===(i=o.components)||void 0===i?void 0:i[n])||o.W[n]||o.O[n]||u.toLowerCase());return void 0!==l&&(c=In(In({},c),{},{key:l})),null!==(a=c)&&void 0!==a&&a.children&&(s=Yn(c.children,t,r),c=In(In({},c),{},{children:s})),t.ctx.RCE(p,c)}return e instanceof Array?e.map((function(e,n){return Yn(e,t,r,""+n)})):e}function Kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xn=D().mark(co),eo=D().mark(so);function to(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ro(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ro(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var no=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.__configId)return e;(e=r&&e.settings.useConfigCompress?e.__compliled?Cn()(e):zn(e):Cn()(e)).settings=B()({},G,e.settings,uo),e.__fieldsCntByType={},e.__funcsCntByType={},e.__fieldNames={},function(e,t){for(var r in e)oo(0,e[r],t)}(e.types,e),io(e.fields,e),lo(e.funcs,e);var n=e.settings.locale.moment;return n&&z().locale(n),Object.defineProperty(e,"__configId",{enumerable:!1,writable:!1,value:t||q()}),de(e),e};function oo(e,t,r){var n=null,o=null;for(var i in t.mainWidget=t.mainWidget||Object.keys(t.widgets).filter((function(e){return"field"!=e&&"func"!=e}))[0],t.widgets){var l=t.widgets[i];if(l.operators){var a=l.operators;t.excludeOperators&&(a=a.filter((function(e){return!t.excludeOperators.includes(e)}))),n=fe(n,a)}l.defaultOperator&&(o=l.defaultOperator),i==t.mainWidget&&(l=x()({},{widgetProps:t.mainWidgetProps||{}},l)),t.widgets[i]=l}t.valueSources||(t.valueSources=Object.keys(r.settings.valueSourcesInfo));var u,c=to(t.valueSources);try{for(c.s();!(u=c.n()).done;){var s=u.value;"value"==s||t.widgets[s]||(t.widgets[s]={})}}catch(e){c.e(e)}finally{c.f()}!t.operators&&n&&(t.operators=Array.from(new Set(n))),!t.defaultOperator&&o&&(t.defaultOperator=o)}function io(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(var n in e)ao(e[n],t,[].concat((0,Z.Z)(r),[n])),e[n].subfields&&io(e[n].subfields,t,[].concat((0,Z.Z)(r),[n]))}function lo(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e){var o=(null==t||null===(r=t.settings)||void 0===r?void 0:r.fieldSeparator)||".";for(var i in e){var l=[].concat((0,Z.Z)(n),[i]).join(o),a=e[i];for(var u in a.returnType&&(t.__funcsCntByType[a.returnType]||(t.__funcsCntByType[a.returnType]=0),t.__funcsCntByType[a.returnType]++),a.args)ao(a.args[u],t,null,!0);if(a.args){var c,s=!0,p=to(Object.keys(a.args).reverse());try{for(p.s();!(c=p.n()).done;){var f=c.value,d=a.args[f];!s&&d.isOptional&&(me.info("Arg ".concat(f," for func ").concat(l," can't be optional")),delete d.isOptional),d.isOptional||(s=!1)}}catch(e){p.e(e)}finally{p.f()}}a.subfields&&lo(a.subfields,t,[].concat((0,Z.Z)(n),[i]))}}}function ao(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=null,i=null,l=t.types[e.type],a=e.excludeOperators||[];if("!struct"!=e.type&&"!group"!=e.type){e.fieldSettings||(e.fieldSettings={});for(var u=0,c=["listValues","treeValues","allowCustomValues","validateValue"];u<c.length;u++){var s=c[u];e[s]&&(e.fieldSettings[s]=e[s],delete e[s])}if(e.fieldSettings.listValues&&t.settings.normalizeListValues&&(e.fieldSettings.listValues=t.settings.normalizeListValues.call(t.ctx,e.fieldSettings.listValues,e.type,e.fieldSettings)),e.fieldSettings.treeValues&&t.settings.normalizeListValues&&(e.fieldSettings.treeValues=t.settings.normalizeListValues.call(t.ctx,e.fieldSettings.treeValues,e.type,e.fieldSettings)),!l)return void(e.disabled=!0);n||(t.__fieldsCntByType[e.type]||(t.__fieldsCntByType[e.type]=0),t.__fieldsCntByType[e.type]++),e.widgets||(e.widgets={}),n&&(e._isFuncArg=!0),e.mainWidget=e.mainWidget||l.mainWidget,e.valueSources=e.valueSources||l.valueSources;var p=l.excludeOperators||[],f=function(){var t=e.widgets[d]||{},r=l.widgets[d]||{};if(!n){var u=[].concat((0,Z.Z)(a),(0,Z.Z)(p)),c=e.preferWidgets&&("field"==d||e.preferWidgets.includes(d))||u.length>0;if(t.operators){var s=t.operators.filter((function(e){return!u.includes(e)}));o=[].concat((0,Z.Z)(o||[]),(0,Z.Z)(s))}else if(c&&r.operators){var f=r.operators.filter((function(e){return!u.includes(e)}));o=[].concat((0,Z.Z)(o||[]),(0,Z.Z)(f))}t.defaultOperator&&(i=t.defaultOperator)}d==e.mainWidget&&(t=x()({},{widgetProps:e.mainWidgetProps||{}},t)),e.widgets[d]=t};for(var d in l.widgets)f();n||(!e.operators&&o&&(e.operators=Array.from(new Set(o))),e._origDefaultOperator=e.defaultOperator,!e.defaultOperator&&i&&(e.defaultOperator=i))}var v=vo(t,r),g=v.fieldName,h=v.inGroup;g&&(e.fieldName=g,t.__fieldNames[g]||(t.__fieldNames[g]=[]),t.__fieldNames[g].push({fullPath:r,inGroup:h}))}var uo=function(e,t,r,n,o,i){if(Array.isArray(e))return t};function co(e){return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(po(e,e.funcs||{},[]),"t0",1);case 1:case"end":return t.stop()}}),Xn)}function so(e){return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(po(e,e.fields||{},[]),"t0",1);case 1:case"end":return t.stop()}}),eo)}function po(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"subfields";return D().mark((function o(i){var l,a,u;return D().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:l=(null==e||null===(i=e.settings)||void 0===i?void 0:i.fieldSeparator)||".",o.t0=D().keys(t);case 2:if((o.t1=o.t0()).done){o.next=13;break}if(a=o.t1.value,!(u=t[a])[n]){o.next=9;break}return o.delegateYield(po(e,u[n],[].concat((0,Z.Z)(r),[a]),n),"t2",7);case 7:o.next=11;break;case 9:return o.next=11,[[].concat((0,Z.Z)(r),[a]).join(l),u];case 11:o.next=2;break;case 13:case"end":return o.stop()}}),o)}))()}var fo=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fields",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"subfields";if(!t)return null;if("!case_value"==t)return{type:"case_value",mainWidget:"case_value",widgets:{case_value:e.widgets.case_value}};var i=(null==e||null===(r=e.settings)||void 0===r?void 0:r.fieldSeparator)||".",l=So(t,e),a=e[n];if(!a)return null;for(var u=a,c=null,s=[],p=0;p<l.length;p++){var f=l[p];s.push(f),c=u[s.join(i)],p<l.length-1&&(c&&c[o]?(u=c[o],s=[]):c=null)}return c},vo=function(e,t){if(!t)return{};var r=e.settings.fieldSeparator,n=(0,Z.Z)(t).reduce((function(t,n,o,i){var l=t.computedPath,a=t.computed,u=t.inGroup,c=[].concat((0,Z.Z)(i.slice(0,o)),[n]),s=fo(e,c);return"!group"===(null==s?void 0:s.type)&&o<i.length-1?(u=c.join(r),l=[]):null!=s&&s.fieldName?(a=!0,l=[s.fieldName]):l=[].concat((0,Z.Z)(l),[n]),{computedPath:l,computed:a,inGroup:u}}),{computedPath:[],computed:!1,inGroup:void 0}),o=n.computedPath,i=n.computed,l=n.inGroup;return i?{fieldName:o.join(r),inGroup:l}:{}},go=function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e.settings.fieldSeparator,l=[o].concat((0,Z.Z)(t.split(i))).filter((function(e){return null!=e})),a=t;return((null===(r=e.__fieldNames[a])||void 0===r||null===(n=r.find)||void 0===n||null===(n=n.call(r,(function(e){var t=e.inGroup;return!t||(null==o?void 0:o.startsWith(t))})))||void 0===n?void 0:n.fullPath)||l).join(i)},ho=function(e,t){if(!t)return null;var r=fo(e,t,"funcs","subfields");if(!r)return null;var n=r.returnType,o=r.args;return{returnType:n,args:Object.fromEntries(Object.entries(o||{}).map((function(e){var t=(0,V.Z)(e,2),r=t[0],n=t[1];return[r,N()(n,["type","valueSources","defaultValue","fieldSettings","isOptional"])]})))}},mo=function(e,t){if(!t)return null;var r=fo(e,t,"funcs","subfields");return r?Qn(Qn(Qn({},e.types[r.returnType]||{}),r),{},{type:r.returnType||r.type}):null},yo=function(e,t,r){var n=mo(e,t);if(!n)return null;var o=n.args&&n.args[r]||null;if(!o)return null;var i=e.types[o.type]||{};return B()({},i,o||{},uo)},bo=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return!1;var o=(null==n||null===(r=n.settings)||void 0===r?void 0:r.fieldSeparator)||".",i=Oo(e,n),l=Oo(t,n);return i.startsWith(l+o)},Oo=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e)return e;var n=(null==r||null===(t=r.settings)||void 0===t?void 0:t.fieldSeparator)||".";return So(e,r).join(n)},So=function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return[];if(Array.isArray(e))return e;var i,l=(null==o||null===(t=o.settings)||void 0===t?void 0:t.fieldSeparator)||".";return null!=e&&e.func?Array.isArray(e.func)?e.func:e.func.split(l):null!=e&&null!==(r=e.get)&&void 0!==r&&r.call(e,"func")?null==e||null===(i=e.get)||void 0===i?void 0:i.call(e,"func").split(l):(null==e||null===(n=e.split)||void 0===n?void 0:n.call(e,l))||[]},wo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;var n=t.settings.fieldSeparator,o=So(e,t);return r?o:o.map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return e.join(n)}))},Fo=function(e){var t;if(!e)return null;if("object"==(0,_.Z)(e)){if(!e.func&&e.type)return"field";if(e.func)return e.func&&e.arg?null:"func"}return null!=e&&null!==(t=e.get)&&void 0!==t&&t.call(e,"func")?null!=e&&e.get("arg")?null:"func":"field"},jo=function(e,t){var r;if(!t)return null;if("object"==(0,_.Z)(t)){if(!t.func&&t.type)return t;if(t.func)return t.func&&t.arg?yo(e,t.func,t.arg):mo(e,t.func)}if(null!=t&&null!==(r=t.get)&&void 0!==r&&r.call(t,"func"))return null!=t&&t.get("arg")?yo(e,t.get("func"),t.get("arg")):mo(e,t.get("func"));var n=fo(e,t);if(!n)return null;var o=e.types[n.type]||{};return B()({},o,n||{},uo)},Co=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;var n=e.operators[t];if(r){var o=jo(e,r),i=dn(e,r,t,null),l=e.widgets[i]||{},a=(o&&o.widgets?o.widgets[i]:{})||{},u=(l.opProps||{})[t],c=(a.opProps||{})[t];return x()({},n,u,c)}return n},Eo=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!t)return null;if(!r&&!n&&"const"!=o&&"!case_value"!=t)return null;var i=jo(e,t);n||(n=dn(e,t,r,o));var l=e.widgets[n]||{},a=((i&&i.widgets?i.widgets[n]:{})||{}).widgetProps||{},u=("value"==o||!o)&&i&&i.fieldSettings||{};return x()({},l,a,u)},Lo=Q;function ko(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Po(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Po(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function Po(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function To(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?To(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):To(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _o=function(e,t){return Zo(e,t,!1)},Zo=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=no(t,void 0,!1),i=Io(e,o,n);return r?[i,n.errors]:(n.errors.length&&console.warn("Errors while exporting to CEL:",n.errors),i)},Io=function(e,t,r){if(e){var n=e.get("type");return e.get("children1"),"group"===n||"rule_group"===n?Do(e,t,r):"rule"===n?Ro(e,t,r):void 0}},Do=function(e,t,r){var n=e.get("type"),o=e.get("properties")||new U.Map,i=e.get("children1")||new U.List,l="rule_group"===n?o.get("field"):null;"array"==(jo(t,l)||{}).mode&&r.errors.push("Aggregation is not supported for ".concat(l));var a=o.get("not"),u=i.map((function(e){return Io(e,t,r)})).filter((function(e){return void 0!==e}));if(u.size){var c=o.get("conjunction");return c||(c=Pr(t)),t.conjunctions[c].celFormatConj(u,c,a)}},Ro=function(e,t,r){var n=e.get("properties")||new U.Map,o=n.get("field"),i=n.get("fieldSrc"),l=n.get("operator"),a=n.get("operatorOptions"),u=n.get("valueSrc"),c=n.get("valueType"),s=n.get("value"),p=n.get("asyncListValues");if(null!=o&&null!=l){var f=jo(t,o)||{},d=Co(t,l,o)||{},v=d.reversedOp,g=Co(t,v,o)||{},h=ee(d.cardinality,1),m=!1,y=d.celOp||d.celFormatOp,b=g.celOp||g.celFormatOp;if(y||b){if(!y&&b){m=!0;var O=[v,l];l=O[0],v=O[1];var S=[g,d];d=S[0],g=S[1]}var w=[],F=[],j=s.map((function(e,n){var i=u?u.get(n):null,a=c?c.get(n):null,s=Fn(e,i,t),v=dn(t,o,l,i),g=Y()(Eo(t,o,l,v,i),["factory"]),h=xo(r,t,s,i,a,g,f,l,d,p);return void 0!==h&&(w.push(i),F.push(a)),h}));if(!(j.filter((function(e){return void 0===e})).size>0||j.size<h)){var C=1==h?j.first():j,E=d.celFormatOp||function(e,t){var r,n=t.celOp||e,o=ee(t.cardinality,1);return 0==o?r=function(e,t,r,o,i,l,a,u){return"".concat(e," ").concat(n)}:1==o?r=function(e,t,r,o,i,l,a,u){return"".concat(e," ").concat(n," ").concat(r)}:2==o&&(r=function(e,t,r,o,i,l,a,u){var c=r.first(),s=r.get(1);return"".concat(e," ").concat(n," ").concat(c," && ").concat(s)}),r}(l,d);if(E){var L="func"==i?No(r,t,o):Ao(r,t,o);if(null!=L){var k,P=[L,l,C,w.length>1?w:w[0],F.length>1?F:F[0],Y()(d,X),a,f];if(k=E.call.apply(E,[t.ctx].concat(P)),m&&(k=t.settings.celFormatReverse(k)),void 0!==k)return k;r.errors.push("Operator ".concat(l," is not supported for value source ").concat(w.join(", ")))}}else r.errors.push("Operator ".concat(l," is not supported"))}}else r.errors.push("Operator ".concat(l," is not supported"))}},xo=function(e,t,r,n,o,i,l,a,u,c){if(void 0!==r){var s;if("field"==n)s=Ao(e,t,r);else if("func"==n)s=No(e,t,r);else if("function"==typeof i.celFormatValue){var p=i.celFormatValue,f=[r,Vo(Vo({},N()(l,["fieldSettings","listValues"])),{},{asyncListValues:c}),Y()(i,Q)];if(a&&(f.push(a),f.push(u)),"field"==n){var d=jo(t,r)||{};f.push(d)}s=p.call.apply(p,[t.ctx].concat(f))}else s=Array.isArray(r)?r.map((function(e){return Ct(e)})):Ct(r);return s}},Ao=function(e,t,r){if(r){var n=t.settings.fieldSeparator,o=jo(t,r)||{},i=So(r,t),l=ln(r,t),a=l?l.join(n):null;return(0,t.settings.formatField)(vn(r,t,e,null,{useTableName:!0}),i,a,o,t)}},No=function(e,t,r){var n=r.get("func"),o=r.get("args"),i=mo(t,n);if(i){var l=So(n,t),a=l[l.length-1],u=i.celFunc||a,c={},s=[],p=[];for(var f in i.args){var d=i.args[f],v=jo(t,d),g=d.defaultValue,h=d.isOptional,m=null!=g&&g.func?"func":"value",y=o?o.get(f):void 0,b=y?y.get("value"):void 0,O=y?y.get("valueSrc"):void 0,S=y?y.get("asyncListValues"):void 0,w=xo(e,t,b,O,d.type,v,d,null,null,S);if(null!=b&&void 0===w)return void("func"!=O&&e.errors.push("Can't format value of arg ".concat(f," for func ").concat(n)));var F=void 0;if(void 0===w&&!h&&null!=g&&void 0===(F=xo(e,t,g,m,d.type,v,d,null,null,S)))return void("func"!=m&&e.errors.push("Can't format default value of arg ".concat(f," for func ").concat(n)));var j=null!=w?w:F;if(void 0!==j){if(s.length){var C,E=ko(f);try{for(E.s();!(C=E.n()).done;)c[C.value]=void 0}catch(e){E.e(e)}finally{E.f()}s=[]}c[f]=j}else h||p.push(f),s.push(f)}if(!p.length){var L;if("function"==typeof i.celFormatFunc){var k=i.celFormatFunc,P=[c];L=k.call.apply(k,[t.ctx].concat(P))}else{var T=Object.entries(c).map((function(e){var t=(0,V.Z)(e,2);return t[0],t[1]})).join(", ");L="".concat(u,"(").concat(T,")")}return L}}else e.errors.push("Func ".concat(n," is not defined in config"))};function Mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wo(e,t,r,n,o,i){if(e&&r&&null!=t){var l=r,a=n.operators[l];if(a){var u=a.elasticSearchQueryType,c=!1;!u&&a.reversedOp&&(c=!0,l=a.reversedOp,u=(a=n.operators[l]).elasticSearchQueryType);var s=dn(n,e,l,o),p=n.widgets[s];if(p){var f,d,v=p.elasticSearchFormatValue;if(f="function"==typeof u?u(s):u)return d="function"==typeof v?v(f,t,l,e,n):function(e,t,r,n,o,i){var l=function(e,t){return e}(n);switch(e){case"filter":return{script:o.operators[r].elasticSearchScript(n,t)};case"exists":return{field:n};case"match":return(0,T.Z)({},l,t[0]);case"term":return i===Bo?(0,T.Z)({},n,{value:t[0]}):(0,T.Z)({},n,t[0]);case"geo_bounding_box":return(0,T.Z)({},n,function(e){if(null==e)return null;var t=e.split(",").map(Number);return{top_left:{lat:t[0],lon:t[1]},bottom_right:{lat:t[2],lon:t[3]}}}(t[0]));case"range":return(0,T.Z)({},n,function(e,t){if(e.length>1)return{gte:"".concat(e[0]),lte:"".concat(e[1])};var r=e[0];switch(t){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(r,"||/d"),lte:"".concat(r,"||+1d")};case"less_or_equal":return{lte:"".concat(r)};case"greater_or_equal":return{gte:"".concat(r)};case"less":return{lt:"".concat(r)};case"greater":return{gt:"".concat(r)};default:return}}(t,r));case"wildcard":return(0,T.Z)({},n,function(e){return{value:"*"+e+"*"}}(t[0]));case"regexp":return(0,T.Z)({},n,function(e){return{value:e}}(t[0]));default:return}}(f,t,l,e,n,i),c?{bool:{must_not:(0,T.Z)({},f,qo({},d))}}:(0,T.Z)({},f,qo({},d))}}}}var Bo="ES_7_SYNTAX",Go="ES_6_SYNTAX";function $o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Go;if(e){var n=e.get("type"),o=e.get("properties")||new Map;if("rule"===n&&o.get("field")){var i,l,a=o.get("operator"),u=o.get("field"),c=o.get("fieldSrc"),s=o.get("value").toJS(),p=(null===(i=o.get("valueType"))||void 0===i||i.get(0),null===(l=o.get("valueSrc"))||void 0===l?void 0:l.get(0));if("func"===p||"func"==c)return;return s&&Array.isArray(s[0])?s[0].map((function(e){return Wo(u,[e],a,t,p,r)})):Wo(u,s,a,t,p,r)}if("group"===n||"rule_group"===n){var f=o.get("not"),d=o.get("conjunction");return d||(d=Pr(t)),function(e,t,r,n,o,i){if(e&&e.size){var l=e.valueSeq().toArray(),a=function(e,t){switch(e){case"AND":return t?"must_not":"must";case"OR":return t?"should_not":"should";case"NOT":return t?"must":"must_not";default:return}}(t,r),u=l.map((function(e){return n(e,o,i)})).filter((function(e){return void 0!==e}));if(u.length){var c=u.flat(1/0);return{bool:(0,T.Z)({},a,c)}}}}(e.get("children1"),d,f,$o,t,r)}}}function zo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jo(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ho(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ho(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function Ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Yo=function(e,t){var r,n={usedFields:[],errors:[]},o=no(t,void 0,!1),i=Ko(e,o,n,!0),l=n.errors,a=n.usedFields,u=(o.settings.fieldSeparator,{}),c=Jo(a);try{for(c.s();!(r=c.n()).done;)for(var s=r.value,p=So(s,t),f=(jo(o,s),u),d=0;d<p.length;d++){var v=p[d],g=jo(o,p.slice(0,d+1))||{};d!=p.length-1?"!group"==g.type&&"struct"!=g.mode?(f[v]||(f[v]=[{}]),f=f[v][0]):(f[v]||(f[v]={}),f=f[v]):f[v]||(f[v]=null)}}catch(e){c.e(e)}finally{c.f()}return{errors:l,logic:i,data:u}},Ko=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e){var i,l=e.get("type"),a=(e.get("properties")||new U.Map).get("isLocked"),u=t.settings.jsonLogic.lockedOp;return"group"===l||"rule_group"===l?i=Qo(e,t,r,n,o):"rule"===l&&(i=Xo(e,t,r,o)),a&&i&&u&&(i=(0,T.Z)({},u,i)),i}},Qo=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=e.get("type"),l=e.get("properties")||new U.Map,a=l.get("mode"),u=e.get("children1")||new U.List,c=l.get("field"),s=l.get("conjunction");s||(s=Pr(t));var p=t.conjunctions[s].jsonLogicConj||s.toLowerCase(),f=l.get("not"),d="rule_group"===i&&!n,v=d&&"struct"!=a?c:o,g=l.get("operator"),h=g&&Co(t,g,c)||null,m=ei(t,l,r,g,o),y=d&&(!g||0==h.cardinality),b=u.map((function(e){return Ko(e,t,r,!1,v)})).filter((function(e){return void 0!==e}));if(d&&"struct"!=a&&!y){if(null==m)return}else if(!b.size)return;var O={};if(1!=b.size||n?O[p]=b.toList().toJS():O=b.first(),f&&(O={"!":O}),d&&"struct"!=a){var S=ni(r,t,c,o);if(y){var w=g||"some";O=(0,T.Z)({},w,[S,O])}else{var F=b.size?{filter:[S,O]}:S;O=oi(t,l,{reduce:[F,{"+":[1,{var:"accumulator"}]},0]},m,g)}}return O},Xo=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("properties")||new U.Map,i=o.get("field"),l=o.get("fieldSrc"),a=o.get("operator"),u=o.get("operatorOptions");if((u=u?u.toJS():null)&&!Object.keys(u).length&&(u=null),null!=i&&null!=a){var c=jo(t,i)||{},s=Co(t,a,i)||{},p=s.reversedOp,f=Co(t,p,i)||{},d=!1;if(s.jsonLogic||f.jsonLogic){if(!s.jsonLogic&&f.jsonLogic){d=!0;var v=[p,a];a=v[0],p=v[1];var g=[f,s];s=g[0],f=g[1]}var h=ei(t,o,r,a,n);if(void 0!==h){var m="func"===l?ri(r,t,i,n):ni(r,t,i,n);if(void 0!==m)return oi(t,o,m,h,a,u,c,d)}}else r.errors.push("Operator ".concat(a," is not supported"))}},ei=function(e,t,r,n,o){var i=t.get("field"),l=t.get("valueSrc"),a=t.get("valueType"),u=jo(e,i)||{},c=Co(e,n,i)||{},s=ee(c.cardinality,1),p=t.get("value"),f=t.get("asyncListValues");if(null!=p){var d=[],v=[],g=r.usedFields,h=p.map((function(t,s){var p=l?l.get(s):null,g=a?a.get(s):null,h=Fn(t,p,e),m=dn(e,i,n,p),y=Y()(Eo(e,i,n,m,p),["factory"]),b=ti(r,e,h,p,g,y,u,n,c,o,f);return void 0!==b&&(d.push(p),v.push(g)),b})),m=h.filter((function(e){return void 0===e})).size>0;if(!(h.size<s||m))return s>1?h.toArray():1==s?h.first():null;r.usedFields=g}},ti=function(e,t,r,n,o,i,l,a,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,s=arguments.length>10?arguments[10]:void 0;if(void 0!==r){var p;if("field"==n)p=ni(e,t,r,c);else if("func"==n)p=ri(e,t,r,c);else if("function"==typeof i.jsonLogic){var f=i.jsonLogic,d=[r,Uo(Uo({},N()(l,["fieldSettings","listValues"])),{},{asyncListValues:s}),Y()(i,Q)];a&&(d.push(a),d.push(u)),p=f.call.apply(f,[t.ctx].concat(d))}else p=r;return p}},ri=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=r.get("func"),i=r.get("args"),l=mo(t,o),a=So(o,t),u=a[a.length-1];if(l)if(null!=l&&l.jsonLogic){var c={},s=[],p=[];for(var f in l.args){var d=l.args[f],v=jo(t,d),g=d.defaultValue,h=d.isOptional,m=null!=g&&g.func?"func":"value",y=i?i.get(f):void 0,b=y?y.get("value"):void 0,O=y?y.get("valueSrc"):void 0,S=null,w=dn(t,d,S,O),F=Y()(Eo(t,d,S,w,O),["factory"]),j=ti(e,t,b,O,d.type,F,v,null,null,n);if(null!=b&&void 0===j)return void("func"!=O&&e.errors.push("Can't format value of arg ".concat(f," for func ").concat(o)));var C=void 0;if(void 0===j&&!h&&null!=g){var E=dn(t,d,S,m),L=Y()(Eo(t,d,S,E,m),["factory"]);if(void 0===(C=ti(e,t,g,m,d.type,L,v,null,null,n)))return void("func"!=m&&e.errors.push("Can't format default value of arg ".concat(f," for func ").concat(o)))}var k=null!=j?j:C;if(void 0!==k){if(s.length){var P,V=Jo(s);try{for(V.s();!(P=V.n()).done;)c[P.value]=void 0}catch(e){V.e(e)}finally{V.f()}s=[]}c[f]=k}else h||p.push(f),s.push(f)}if(!p.length){var _,Z=Object.values(c);if("function"==typeof l.jsonLogic){var I=l.jsonLogic,D=[c];_=I.call.apply(I,[t.ctx].concat(D))}else{var R=l.jsonLogic||u;if(l.jsonLogicIsMethod){var x=Z[0],A=Z.slice(1);_=A.length?{method:[x,R,A]}:{method:[x,R]}}else _=(0,T.Z)({},R,Z)}return _}}else e.errors.push("Func ".concat(o," is not supported"));else e.errors.push("Func ".concat(o," is not defined in config"))},ni=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.settings,l=i.fieldSeparator,a=i.jsonLogic;if(r){Array.isArray(r)&&(r=r.join(l));var u=jo(t,r)||{},c=vn(r,t,e,o),s=u.jsonLogicVar||("!group"==u.type?a.groupVarKey:"var");n=(0,T.Z)({},s,c),-1==e.usedFields.indexOf(r)&&e.usedFields.push(r)}return n},oi=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=t.get("field"),c=Co(e,o,u)||{},s="function"==typeof c.jsonLogic?c.jsonLogic:function(e,t,r,n){var o=e,i=ee(t.cardinality,1),l=ee(t._jsonLogicIsRevArgs,!1);"string"==typeof t.jsonLogic&&(o=t.jsonLogic);var a=["<","<=",">",">="],u=["==","!="];return function(e,t,c,s,p){return 0==i&&u.includes(o)?(0,T.Z)({},o,[r,null]):0==i?(0,T.Z)({},o,r):1==i&&l?(0,T.Z)({},o,[n,r]):1==i?(0,T.Z)({},o,[r,n]):2==i&&a.includes(o)?(0,T.Z)({},o,[n[0],r,n[1]]):(0,T.Z)({},o,[r].concat((0,Z.Z)(n)))}}(o,c,r,n),p=[r,o,n,Y()(c,X),i,l],f=s.call.apply(s,[e.ctx].concat(p));return a&&(f={"!":f}),f};function ii(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return li(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?li(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function li(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ai(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ui(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ai(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ci=function(e){return"object"==(0,_.Z)(e)&&null!==e&&!Array.isArray(e)},si=function(e,t){return pi(e,t,!1)},pi=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=no(t,void 0,!1),i=fi([],e,o,n);return r?[i,n.errors]:(n.errors.length&&console.warn("Errors while exporting to MongoDb:",n.errors),i)},fi=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;if(t){var u=t.get("type");return"group"===u||"rule_group"===u?di(e,t,r,n,o,i,l,a):"rule"===u?vi(e,t,r,n,o,i,l,a):void 0}},di=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=t.get("type"),l=t.get("properties")||new U.Map,a=t.get("children1")||new U.List,u=r.settings,c=u.canShortMongoQuery,s=u.fieldSeparator,p=e.filter((function(e){return"rule_group"==e.get("type")})).length>0,f=e.filter((function(e){return"rule_group"==e.get("type")})).map((function(e){return e.get("properties").get("field")})).slice(-1).pop(),d=p&&f,v="rule_group"===i?l.get("field"):null,g=vn(v,r,n,d),h=(jo(r,v)||{}).mode,m=v&&"array"==h,y=o?!l.get("not"):l.get("not"),b=a.map((function(o){return fi([].concat((0,Z.Z)(e),[t]),o,r,n,y,"array"!=h,"array"==h?function(e){return"$$el".concat(s).concat(e)}:void 0)})).filter((function(e){return void 0!==e}));if(m||b.size){var O=l.get("conjunction");O||(O=Pr(r));var S=r.conjunctions[O],w=S.reversedConj;y&&w&&(O=w,S=r.conjunctions[O]);var F,j=S.mongoConj;if(1==b.size)F=b.first();else if(b.size>1){var C=b.toList().toJS();c&&"$and"==j&&(F=C.reduce((function(e,t){if(e){for(var r in t){if("$"==r[0]){e=void 0;break}if(null==e[r])e[r]=t[r];else{var n=e[r],o=t[r];if(ci(n)||(n={$eq:n}),ci(o)||(o={$eq:o}),Object.keys(n)[0]==Object.keys(o)[0]){e=void 0;break}e[r]=Object.assign({},n,o)}}return e}}),{})),F||(F=(0,T.Z)({},j,C))}if(v)if("array"==h){var E={$size:{$ifNull:["$"+g,[]]}},L=F?{$size:{$ifNull:[{$filter:{input:"$"+g,as:"el",cond:F}},[]]}}:E;F={$expr:F=fi(e,t.set("type","rule"),r,n,!1,!1,(function(e){return L}),E)}}else F=(0,T.Z)({},g,{$elemMatch:F});return F}},vi=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,u=t.get("properties")||new U.Map,c=e.filter((function(e){return"rule_group"==e.get("type")})).length>0,s=e.filter((function(e){return"rule_group"==e.get("type")})).map((function(e){return e.get("properties").get("field")})).slice(-1).pop(),p=c&&s,f=u.get("operator"),d=u.get("operatorOptions"),v=u.get("field"),g=u.get("fieldSrc"),h=u.get("value"),m=u.get("valueSrc"),y=u.get("valueType"),b=u.get("asyncListValues");if(null!=v&&null!=f&&void 0!==h){var O,S=jo(r,v)||{},w=Co(r,f,v)||{},F=w.reversedOp,j=Co(r,F,v)||{},C=ee(w.cardinality,1),E=o;if(E&&F){var L=[F,f];f=L[0],F=L[1];var k=[j,w];w=k[0],j=k[1],E=!1}var P=!1;if("func"==g){var T=mi(n,r,v,p),_=(0,V.Z)(T,2);O=_[0],P=_[1]}else O=vn(v,r,n,p),l&&(P=!0,O=l(O));if(null!=O){var Z=[],I=[],D=h.map((function(e,t){var o=m?m.get(t):null,i=y?y.get(t):null,l=Fn(e,o,r),a=dn(r,v,f,o),u=Y()(Eo(r,v,f,a,o),["factory"]),c=gi(n,r,l,o,i,u,S,p,f,w,b),s=(0,V.Z)(c,2),d=s[0],g=s[1];return void 0!==d&&(P=P||g,Z.push(o),I.push(i)),d})),R=P&&i,x=D.filter((function(e){return void 0===e})).size>0;if(!(D.size<C||x)){var A=C>1?D.toArray():1==C?D.first():null,N=w.mongoFormatOp;if(N){var M=[O,f,void 0!==a&&null==A?a:A,P,Z.length>1?Z:Z[0],I.length>1?I:I[0],Y()(w,X),d,S],q=N.call.apply(N,[r.ctx].concat(M));return R&&(q={$expr:q}),E&&(q={$not:q}),q}n.errors.push("Operator ".concat(f," is not supported"))}}}},gi=function(e,t,r,n,o,i,l,a,u,c,s){if(void 0===r)return[void 0,!1];var p,f=!1;if("field"==n){var d=hi(e,t,r,a),v=(0,V.Z)(d,2);p=v[0],f=v[1]}else if("func"==n){var g=mi(e,t,r,a),h=(0,V.Z)(g,2);p=h[0],f=h[1]}else if("function"==typeof i.mongoFormatValue){var m=i.mongoFormatValue,y=[r,ui(ui({},N()(l,["fieldSettings","listValues"])),{},{asyncListValues:s}),Y()(i,Q)];u&&(y.push(u),y.push(c)),p=m.call.apply(m,[t.ctx].concat(y))}else p=r;return[p,f]},hi=function(e,t,r,n){var o,i=t.settings.fieldSeparator;if(r){var l=jo(t,r)||{},a=So(r,t),u=ln(r,t),c=u?u.join(i):null;o="$"+(0,t.settings.formatField)(vn(r,t,e,n),a,c,l,t,!1)}return[o,!0]},mi=function(e,t,r,n){var o,i=r.get("func"),l=r.get("args"),a=mo(t,i);if(!a)return e.errors.push("Func ".concat(i," is not defined in config")),[void 0,!1];var u=So(i,t),c=u[u.length-1],s=a.mongoFunc||c,p=a.mongoArgsAsObject,f={},d=0,v=void 0,g=[],h=[];for(var m in a.args){d++;var y=a.args[m],b=jo(t,y),O=y.defaultValue,S=y.isOptional,w=null!=O&&O.func?"func":"value",F=l?l.get(m):void 0,j=F?F.get("value"):void 0,C=F?F.get("valueSrc"):void 0,E=F?F.get("asyncListValues"):void 0,L=null,k=dn(t,y,L,C),P=Y()(Eo(t,y,L,k,C),["factory"]),_=gi(e,t,j,C,y.type,P,b,n,null,null,E),Z=(0,V.Z)(_,2),I=Z[0];if(Z[1],null!=j&&void 0===I)return"func"!=C&&e.errors.push("Can't format value of arg ".concat(m," for func ").concat(i)),[void 0,!1];var D=void 0;if(void 0===I&&!S&&null!=O){var R=dn(t,y,L,w),x=Y()(Eo(t,y,L,R,w),["factory"]),A=gi(e,t,O,w,y.type,x,b,n,null,null,E),N=(0,V.Z)(A,2);if(D=N[0],N[1],void 0===D)return"func"!=w&&e.errors.push("Can't format default value of arg ".concat(m," for func ").concat(i)),[void 0,!1]}var M=null!=I?I:D;if(void 0!==M){if(g.length){var q,W=ii(g);try{for(W.s();!(q=W.n()).done;)f[q.value]=void 0}catch(e){W.e(e)}finally{W.f()}g=[]}f[m]=M,v=M}else S||h.push(m),g.push(m)}if(h.length)return[void 0,!1];if("function"==typeof a.mongoFormatFunc){var B=a.mongoFormatFunc,G=[f];o=B.call.apply(B,[t.ctx].concat(G))}else{if(null===a.mongoFormatFunc)return e.errors.push("Functon ".concat(s," is not supported")),[void 0,!1];o=p?(0,T.Z)({},s,f):1==d&&void 0!==v?(0,T.Z)({},s,v):(0,T.Z)({},s,Object.values(f))}return[o,!0]};function yi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oi=function(e,t){var r={usedFields:[]},n=Si(e,t,r);if(n)return bi(bi({},n),r)},Si=function(e,t,r){if(e){var n=e.get("type"),o=e.get("children1");return("group"===n||"rule_group"===n)&&o&&o.size?wi(e,t,r):"rule"===n?Fi(e,t,r):void 0}},wi=function(e,t,r){var n=e.get("properties")||new U.Map,o=e.get("children1"),i=e.get("id"),l=o.map((function(e){return Si(e,t,r)})).filter((function(e){return void 0!==e}));if(l.size){var a=n.get("conjunction");a||(a=Pr(t));var u=n.get("not");return{id:i,rules:l.toList(),condition:a.toUpperCase(),not:u}}},Fi=function(e,t,r){var n,o=e.get("properties")||new U.Map,i=e.get("id"),l=o.get("operator"),a=o.get("operatorOptions"),u=o.get("field"),c=o.get("value"),s=o.get("valueSrc"),p=o.get("valueType"),f=c.filter((function(e){return void 0===e})).size>0;if(null!=u&&null!=l&&!f){var d=jo(t,u)||{},v=Co(t,l,u)||{},g=d.type||"undefined",h=ee(v.cardinality,1),m=t.types[d.type]||{},y=vn(u,t,r);if(!(c.size<h)){-1==r.usedFields.indexOf(u)&&r.usedFields.push(u),c=c.toArray(),s=s.toArray(),p=(null===(n=p)||void 0===n?void 0:n.toArray())||[];for(var b=[],O=0;O<c.length;O++){var S={type:p[O],value:c[O]};if(b.push(S),"field"==s[O]){var w=c[O];-1==r.usedFields.indexOf(w)&&r.usedFields.push(w)}}var F=a?a.toJS():null;F&&!Object.keys(F).length&&(F=null);var j={id:i,fieldName:y,type:g,input:m.mainWidget,operator:l};return F&&(j.operatorOptions=F),j.values=b,j}}};function ji(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ci(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ci(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function Ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Li(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ei(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ki=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={errors:[]},o=no(t,void 0,!1),i=Pi(e,o,n,r,null);return n.errors.length&&console.warn("Errors while exporting to string:",n.errors),i},Pi=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e){var i=e.get("type");return e.get("children1"),"group"===i||"rule_group"===i?Ti(e,t,r,n,o):"rule"===i?Vi(e,t,r,n,o):void 0}},Ti=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=e.get("type"),l=e.get("properties")||new U.Map,a=l.get("mode"),u=e.get("children1")||new U.List,c="rule_group"===i,s=c&&"array"==a?l.get("field"):null,p=c&&"array"==a,f=l.get("not"),d=u.map((function(e){return Pi(e,t,r,n,s)})).filter((function(e){return void 0!==e}));if(p||d.size){var v=l.get("conjunction");v||(v=Pr(t));var g,h=t.conjunctions[v],m=d.size?h.formatConj(d,v,f,n):null;if(s){var y=Vi(e,t,r,n,o,!0);if(y){var b,O=y.pop(),S=[m].concat((0,Z.Z)(y));g=(b=t.settings).formatAggr.apply(b,(0,Z.Z)(S)),O&&(g=t.settings.formatReverse(g,null,null,null,null,n))}}else g=m;return g}},Vi=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=e.get("properties")||new U.Map,a=l.get("field"),u=l.get("fieldSrc"),c=l.get("operator"),s=l.get("operatorOptions");if(null!=a&&null!=c){var p=jo(t,a)||{},f=Co(t,c,a)||{},d=f.reversedOp,v=Co(t,d,a)||{},g=!1,h=f.formatOp;if(!h&&d&&(h=v.formatOp)){g=!0;var m=[d,c];c=m[0],d=m[1];var y=[v,f];f=y[0],v=y[1]}if(h||(h=function(e,t){var r,n=t.labelForFormat||e,o=ee(t.cardinality,1);return 0==o?r=function(e,t,r,o,i,l,a,u){return"".concat(e," ").concat(n)}:1==o?r=function(e,t,r,o,i,l,a,u){return"".concat(e," ").concat(n," ").concat(r)}:2==o&&(r=function(e,t,r,o,i,l,a,u){var c=r.first(),s=r.get(1);return"".concat(e," ").concat(n," ").concat(c," AND ").concat(s)}),r}(c,f)),h){var b="func"===u?Ii(t,r,a,n,o):Zi(t,r,a,n,o);if(null!=b){var O=function(e,t,r,n,o,i){var l,a=t.get("field"),u=t.get("valueSrc"),c=t.get("valueType"),s=jo(e,a)||{},p=n||t.get("operator"),f=Co(e,p,a)||{},d=ee(f.cardinality,1),v=t.get("value"),g=t.get("asyncListValues"),h=[],m=[];if(null!=v){var y=v.map((function(t,n){var l=u?u.get(n):null,d=c?c.get(n):null,v=Fn(t,l,e),y=dn(e,a,p,l),b=Y()(Eo(e,a,p,y,l),["factory"]),O=_i(e,r,v,l,d,b,s,p,f,o,i,g);return void 0!==O&&(h.push(l),m.push(d)),O}));y.filter((function(e){return void 0===e})).size>0||y.size<d||(l=1==d?y.first():y)}return[l,h.length>1?h:h[0],m.length>1?m:m[0]]}(t,l,r,c,n,o),S=(0,V.Z)(O,3),w=S[0],F=S[1],j=S[2];if(void 0!==w){var C=[b,c,w,F,j,Y()(f,X),s,n,p,g];if(i)return C;var E,L=(E=h).call.apply(E,[t.ctx].concat(C));return g&&(L=t.settings.formatReverse(L,c,d,f,v,n)),L}}}}},_i=function(e,t,r,n,o,i,l,a,u,c){var s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,p=arguments.length>11?arguments[11]:void 0;if(void 0!==r){var f;if("field"==n)f=Zi(e,t,r,c,s);else if("func"==n)f=Ii(e,t,r,c,s);else if("function"==typeof i.formatValue){var d=i.formatValue,v=[r,Li(Li({},N()(l,["fieldSettings","listValues"])),{},{asyncListValues:p}),Y()(i,Q),c];if(a&&(v.push(a),v.push(u)),"field"==n){var g=jo(e,r)||{};v.push(g)}f=d.call.apply(d,[e.ctx].concat(v))}else f=r;return f}},Zi=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=e.settings,a=(l.fieldSeparator,l.fieldSeparatorDisplay),u=null;if(r){var c=jo(e,r)||{},s=So(r,e),p=ln(r,e,i?o:null),f=p?p.join(a):null,d=c.label2||f;u=(0,e.settings.formatField)(vn(r,e,t,i?o:null,{useTableName:!0}),s,d,c,e,n)}return u},Ii=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=r.get("func"),l=r.get("args"),a=mo(e,i);if(a){var u=So(i,e),c=u[u.length-1],s=n&&a.label||c,p={},f=[],d=[],v={};for(var g in a.args){var h=a.args[g],m=jo(e,h),y=h.defaultValue,b=h.isOptional,O=null!=y&&y.func?"func":"value",S=n&&h.label||g,w=l?l.get(g):void 0,F=w?w.get("value"):void 0,j=w?w.get("valueSrc"):void 0,C=w?w.get("asyncListValues"):void 0,E=_i(e,t,F,j,h.type,m,h,null,null,n,o,C);if(null!=F&&void 0===E)return void("func"!=j&&t.errors.push("Can't format value of arg ".concat(g," for func ").concat(i)));var L=void 0;if(void 0===E&&!b&&null!=y&&void 0===(L=_i(e,t,y,O,h.type,m,h,null,null,n,o,C)))return void("func"!=O&&t.errors.push("Can't format default value of arg ".concat(g," for func ").concat(i)));var k=null!=E?E:L;if(void 0!==k){if(f.length){var P,T=ji(g);try{for(T.s();!(P=T.n()).done;){var _=(0,V.Z)(P.value,2),Z=_[0];_[1],p[Z]=void 0}}catch(e){T.e(e)}finally{T.f()}f=[]}p[g]=k,v[S]=k}else b||d.push(g),f.push([g,S])}if(!d.length){var I=null;if("function"==typeof a.formatFunc){var D=a.formatFunc,R=[p,n];I=D.call.apply(D,[e.ctx].concat(R))}else{var x=Object.entries(n?v:p).map((function(e){var t=(0,V.Z)(e,2),r=t[0],o=t[1];return n?"".concat(r,": ").concat(o):"".concat(o)})).join(", ");I="".concat(s,"(").concat(x,")")}return I}}else t.errors.push("Func ".concat(i," is not defined in config"))};function Di(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ri(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ri(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ni=function(e,t){return Mi(e,t,!1)},Mi=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=no(t,void 0,!1),i=qi(e,o,n);return r?[i,n.errors]:(n.errors.length&&console.warn("Errors while exporting to SQL:",n.errors),i)},qi=function(e,t,r){if(e){var n=e.get("type");return e.get("children1"),"group"===n||"rule_group"===n?Wi(e,t,r):"rule"===n?Bi(e,t,r):void 0}},Wi=function(e,t,r){var n=e.get("type"),o=e.get("properties")||new U.Map,i=e.get("children1")||new U.List,l="rule_group"===n?o.get("field"):null;"array"==(jo(t,l)||{}).mode&&r.errors.push("Aggregation is not supported for ".concat(l));var a=o.get("not"),u=i.map((function(e){return qi(e,t,r)})).filter((function(e){return void 0!==e}));if(u.size){var c=o.get("conjunction");return c||(c=Pr(t)),t.conjunctions[c].sqlFormatConj(u,c,a)}},Bi=function(e,t,r){var n=e.get("properties")||new U.Map,o=n.get("field"),i=n.get("fieldSrc"),l=n.get("operator"),a=n.get("operatorOptions"),u=n.get("valueSrc"),c=n.get("valueType"),s=n.get("value"),p=n.get("asyncListValues");if(null!=o&&null!=l){var f=jo(t,o)||{},d=Co(t,l,o)||{},v=d.reversedOp,g=Co(t,v,o)||{},h=ee(d.cardinality,1),m=!1,y=d.sqlOp||d.sqlFormatOp,b=g.sqlOp||g.sqlFormatOp;if(y||b){if(!y&&b){m=!0;var O=[v,l];l=O[0],v=O[1];var S=[g,d];d=S[0],g=S[1]}var w=[],F=[],j=s.map((function(e,n){var i=u?u.get(n):null,a=c?c.get(n):null,s=Fn(e,i,t),v=dn(t,o,l,i),g=Y()(Eo(t,o,l,v,i),["factory"]),h=Gi(r,t,s,i,a,g,f,l,d,p);return void 0!==h&&(w.push(i),F.push(a)),h}));if(!(j.filter((function(e){return void 0===e})).size>0||j.size<h)){var C=1==h?j.first():j,E=d.sqlFormatOp||function(e,t){var r,n=t.sqlOp||e,o=ee(t.cardinality,1);return 0==o?r=function(e,t,r,o,i,l,a,u){return"".concat(e," ").concat(n)}:1==o?r=function(e,t,r,o,i,l,a,u){return"".concat(e," ").concat(n," ").concat(r)}:2==o&&(r=function(e,t,r,o,i,l,a,u){var c=r.first(),s=r.get(1);return"".concat(e," ").concat(n," ").concat(c," AND ").concat(s)}),r}(l,d);if(E){var L="func"==i?zi(r,t,o):$i(r,t,o);if(null!=L){var k,P=[L,l,C,w.length>1?w:w[0],F.length>1?F:F[0],Y()(d,X),a,f];if(k=E.call.apply(E,[t.ctx].concat(P)),m&&(k=t.settings.sqlFormatReverse(k)),void 0!==k)return k;r.errors.push("Operator ".concat(l," is not supported for value source ").concat(w.join(", ")))}}else r.errors.push("Operator ".concat(l," is not supported"))}}else r.errors.push("Operator ".concat(l," is not supported"))}},Gi=function(e,t,r,n,o,i,l,a,u,c){if(void 0!==r){var s;if("field"==n)s=$i(e,t,r);else if("func"==n)s=zi(e,t,r);else if("function"==typeof i.sqlFormatValue){var p=i.sqlFormatValue,f=[r,Ai(Ai({},N()(l,["fieldSettings","listValues"])),{},{asyncListValues:c}),Y()(i,Q)];if(a&&(f.push(a),f.push(u)),"field"==n){var d=jo(t,r)||{};f.push(d)}s=p.call.apply(p,[t.ctx].concat(f))}else s=Array.isArray(r)?r.map((function(e){return ht.escape(e)})):ht.escape(r);return s}},$i=function(e,t,r){if(r){var n=t.settings.fieldSeparator,o=jo(t,r)||{},i=So(r,t),l=ln(r,t),a=l?l.join(n):null;return(0,t.settings.formatField)(vn(r,t,e,null,{useTableName:!0}),i,a,o,t)}},zi=function(e,t,r){var n=r.get("func"),o=r.get("args"),i=mo(t,n);if(i){var l=So(n,t),a=l[l.length-1],u=i.sqlFunc||a,c={},s=[],p=[];for(var f in i.args){var d=i.args[f],v=jo(t,d),g=d.defaultValue,h=d.isOptional,m=null!=g&&g.func?"func":"value",y=o?o.get(f):void 0,b=y?y.get("value"):void 0,O=y?y.get("valueSrc"):void 0,S=y?y.get("asyncListValues"):void 0,w=Gi(e,t,b,O,d.type,v,d,null,null,S);if(null!=b&&void 0===w)return void("func"!=O&&e.errors.push("Can't format value of arg ".concat(f," for func ").concat(n)));var F=void 0;if(void 0===w&&!h&&null!=g&&void 0===(F=Gi(e,t,g,m,d.type,v,d,null,null,S)))return void("func"!=m&&e.errors.push("Can't format default value of arg ".concat(f," for func ").concat(n)));var j=null!=w?w:F;if(void 0!==j){if(s.length){var C,E=Di(f);try{for(E.s();!(C=E.n()).done;)c[C.value]=void 0}catch(e){E.e(e)}finally{E.f()}s=[]}c[f]=j}else h||p.push(f),s.push(f)}if(!p.length){var L;if("function"==typeof i.sqlFormatFunc){var k=i.sqlFormatFunc,P=[c];L=k.call.apply(k,[t.ctx].concat(P))}else{var T=Object.entries(c).map((function(e){var t=(0,V.Z)(e,2);return t[0],t[1]})).join(", ");L="".concat(u,"(").concat(T,")")}return L}}else e.errors.push("Func ".concat(n," is not defined in config"))},Ui=r(613),Ji=r(70800),Hi=["title","value","disabled","groupTitle","grouplabel","renderTitle","children","label","isCustom","isHidden"];function Yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ki(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ki(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return function(){var n=(0,Ji.Z)(D().mark((function n(o,i,l){var a,u,c,s,p,f;return D().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=null!=(null==l?void 0:l.pageSize)?l.pageSize:t,u=je(e).filter((function(e){var t=e.title,r=e.value;return null==o||-1!=t.toUpperCase().indexOf(o.toUpperCase())||-1!="".concat(r).toUpperCase().indexOf(o.toUpperCase())})),a&&Math.ceil(u.length/a),c=i||0,a&&Math.ceil(c/a),s=a?u.slice(c,c+a):u,p=a?c+s.length:null,f=!!a&&p<u.length,!r){n.next=11;break}return n.next=11,pe(r);case 11:return n.abrupt("return",{values:s,hasMore:f});case 12:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}()},el=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t)return e;var o=e||[],i=t.filter((function(e){return null==o.find((function(t){return""+t.value==""+e.value}))})).map((function(e){return n?Qi(Qi({},e),{},{isHidden:!0}):e}));return r?[].concat((0,Z.Z)(i),(0,Z.Z)(o)):[].concat((0,Z.Z)(o),(0,Z.Z)(i))},tl=function(e,t,r){var n,o=null==e||""==e?void 0:null!==(n=null==e?void 0:e.value)&&void 0!==n?n:e,i=Te(o,t),l=r&&!i?Fe(o):void 0,a=i||l;return[o,a?[a]:void 0]},rl=function(e,t,r){var n=e.map((function(e,n){var o,i=null==e||""==e?void 0:null!==(o=null==e?void 0:e.value)&&void 0!==o?o:e,l=Te(i,t),a=r&&!l?Fe(i):void 0;return l||a})).filter((function(e){return null!=e})),o=n.map((function(e){var t;return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:e}));return o.length||(o=void 0),[o,n]},nl=function(e){if(null==e)return null;var t=e.title,r=e.value,n=e.disabled,o=e.groupTitle,i=e.grouplabel,l=e.renderTitle,a=e.children,u=e.label,c=e.isCustom,s=e.isHidden,p=(0,Ui.Z)(e,Hi),f={value:r,title:t||u||a};return n&&(f.disabled=n),c&&(f.isCustom=c),s&&(f.isHidden=s),(o||i)&&(f.groupTitle=o||i),l&&(f.renderTitle=l),Qi(Qi({},f),p)},ol=function(e){var t,r=[],n=[],o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Yi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}(e);try{var i=function(){var e=t.value,o=function(e,t){if(e.findLastIndex)return e.findLastIndex(t);var r=(0,Z.Z)(e).reverse().findIndex(t);return-1==r?-1:e.length-1-r}(r,(function(t){var r,n;return(null!==(r=t.groupTitle)&&void 0!==r?r:"")==(null!==(n=e.groupTitle)&&void 0!==n?n:"")}));null==e.groupTitle||n.includes(e.groupTitle)||(n.push(e.groupTitle),1===n.length&&(r=r.map((function(e){return Qi(Qi({},e),{},{groupTitle:""})})))),null==e.groupTitle&&n.length&&(e=Qi(Qi({},e),{},{groupTitle:""})),-1!=o?r.splice(o+1,0,e):r.push(e)};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}return r},il={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:{}},spelFunc:"T(java.time.LocalDateTime).now()",celFunc:"T(java.time.LocalDateTime).now()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}},ll={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],spelFormatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim,i=r+(o.charAt(0).toUpperCase()+o.slice(1)+"s");return"".concat(t,".").concat(i,"(").concat(n,")")},spelImport:function(e){var t,r,n,o,i=null===(t=e.methodName)||void 0===t?void 0:t.match(/^(minus|plus)(\w+)s$/);if(i&&(o=i[2].toLowerCase(),r=i[1],["minus","plus"].includes(r)&&["day","week","month","year"].includes(o)))return r={type:"string",val:r},o={type:"string",val:o},n=e.args[0],{date:e.obj,op:r,val:n,dim:o}},jsonLogic:function(e){var t=e.date,r=e.op;return{date_add:[t,e.val*("minus"==r?-1:1),e.dim]}},jsonLogicImport:function(e){var t=e.date_add[0],r=Math.abs(e.date_add[1]);return[t,e.date_add[1]>=0?"plus":"minus",r,e.date_add[2]]},jsonLogicCustomOps:{date_add:{}},sqlFormatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim;return"DATE_ADD(".concat(t,", INTERVAL ").concat(parseInt(n)*("minus"==r?-1:1)," ").concat(o.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim;return n?"".concat(t," ").concat("minus"==r?"-":"+"," ").concat(n," ").concat(o):t},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field","value"],spelEscapeForFormat:!0},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}},spelEscapeForFormat:!1},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"],spelEscapeForFormat:!1},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}},spelEscapeForFormat:!1}}},al={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:"${str}.toLowerCase()",jsonLogicCustomOps:{toLowerCase:{}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field","func"]}}},ul={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:"${str}.toUpperCase()",jsonLogicCustomOps:{toUpperCase:{}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field","func"]}}},cl={label:"Linear regression",returnType:"number",formatFunc:function(e,t){var r=e.coef,n=e.bias,o=e.val;return"(".concat(r," * ").concat(o," + ").concat(n,")")},sqlFormatFunc:function(e){var t=e.coef,r=e.bias,n=e.val;return"(".concat(t," * ").concat(n," + ").concat(r,")")},spelFormatFunc:function(e){var t=e.coef,r=e.bias,n=e.val;return"(".concat(t," * ").concat(n," + ").concat(r,")")},spelImport:function(e){var t,r;if("op-plus"===e.type){var n=(0,V.Z)(e.children,2);if(r=n[0],t=n[1],"op-multiply"===r.type){var o=(0,V.Z)(r.children,2);return{coef:o[0],val:o[1],bias:t}}}},celFormatFunc:function(e){var t=e.coef,r=e.bias,n=e.val;return"(".concat(t," * ").concat(n," + ").concat(r,")")},mongoFormatFunc:function(e){var t=e.coef,r=e.bias;return{$sum:[{$multiply:[t,e.val]},r]}},jsonLogic:function(e){var t=e.coef,r=e.bias;return{"+":[{"*":[t,e.val]},r]}},jsonLogicImport:function(e){return[e["+"][0]["*"][0],e["+"][0]["*"][1],e["+"][1]]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}};const sl={utils:{SqlString:ht,moment:z(),mongoFormatOp1:function(e,t,r,n,o,i,l,a,u,c,s,p){var f="string"!=typeof n||n.startsWith("$")?n:"$"+n,d=t(i,p);if(void 0!==d)return r?l||e&&"$eq"!=e?l?{$not:(0,T.Z)({},e,[f,d])}:(0,T.Z)({},n,{$not:(0,T.Z)({},e,d)}):(0,T.Z)({},n,{$ne:d}):l||e&&"$eq"!=e?l?(0,T.Z)({},e,[f,d]):(0,T.Z)({},n,(0,T.Z)({},e,d)):(0,T.Z)({},n,d)},mongoFormatOp2:function(e,t,r,n,o,i,l,a,u,c,s){var p,f,d="string"!=typeof r||r.startsWith("$")?r:"$"+r;return t?i?{$not:{$and:[(0,T.Z)({},e[0],[d,o[0]]),(0,T.Z)({},e[1],[d,o[1]])]}}:(0,T.Z)({},r,{$not:(p={},(0,T.Z)(p,e[0],o[0]),(0,T.Z)(p,e[1],o[1]),p)}):i?{$and:[(0,T.Z)({},e[0],[d,o[0]]),(0,T.Z)({},e[1],[d,o[1]])]}:(0,T.Z)({},r,(f={},(0,T.Z)(f,e[0],o[0]),(0,T.Z)(f,e[1],o[1]),f))},mongoEmptyValue:yt,escapeRegExp:le,sqlEmptyValue:mt,stringifyForDisplay:jt,getTitleInListValues:Ee,spelEscape:St,celEscape:Ct,spelFixList:Ot}};function pl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vl={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",celOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(e,t,r,n,o,i,l,a,u){var c=a?"=":i.label;return"boolean"==o&&a?"No"==r?"NOT ".concat(e):"".concat(e):"".concat(e," ").concat(c," ").concat(r)},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))},jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",celOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(e,t,r,n,o,i,l,a,u){return"boolean"==o&&a?"No"==r?"".concat(e):"NOT ".concat(e):"".concat(e," ").concat(i.label," ").concat(r)},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return e},!1].concat(r))},jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",celOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$lt",function(e){return e},!1].concat(r))},jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",celOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$lte",function(e){return e},!1].concat(r))},jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",celOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$gt",function(e){return e},!1].concat(r))},jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",celOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$gte",function(e){return e},!1].concat(r))},jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:"${0}.contains(${1})",celOp:"${1} in ${0}",valueTypes:["text"],mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?t.utils.escapeRegExp(e):void 0},!1].concat(n))},jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?t.utils.escapeRegExp(e):void 0},!0].concat(n))},valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:"${0}.startsWith(${1})",celOp:"${0}.startsWith(${1})",mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?"^"+t.utils.escapeRegExp(e):void 0},!1].concat(n))},jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:"${0}.endsWith(${1})",mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?t.utils.escapeRegExp(e)+"$":void 0},!1].concat(n))},jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(e,t,r,n,o,i,l,a){var u=r.first(),c=r.get(1);return a?"".concat(e," BETWEEN ").concat(u," AND ").concat(c):"".concat(e," >= ").concat(u," && ").concat(e," <= ").concat(c)},spelFormatOp:function(e,t,r,n,o,i,l,a){var u=r[0],c=r[1];return"".concat(e," >= ").concat(u," && ").concat(e," <= ").concat(c)},celFormatOp:function(e,t,r,n,o,i,l,a){var u,c,s=null==r||null===(u=r._tail)||void 0===u?void 0:u.array[0],p=null==r||null===(c=r._tail)||void 0===c?void 0:c.array[1];return"(".concat(e," >= ").concat(s," && ").concat(e," <= ").concat(p,")")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp2.apply(e,[["$gte","$lte"],!1].concat(r))},valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(e){return null!=e[0]&&null!=e[1]?e[0]<=e[1]?null:"Invalid range":null},elasticSearchQueryType:function(e){return"time"===e?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(e,t,r,n,o,i,l,a){var u=r.first(),c=r.get(1);return a?"".concat(e," NOT BETWEEN ").concat(u," AND ").concat(c):"(".concat(e," < ").concat(u," || ").concat(e," > ").concat(c,")")},spelFormatOp:function(e,t,r,n,o,i,l,a){var u=r[0],c=r[1];return"(".concat(e," < ").concat(u," || ").concat(e," > ").concat(c,")")},celFormatOp:function(e,t,r,n,o,i,l,a){var u,c,s=null==r||null===(u=r._tail)||void 0===u?void 0:u.array[0],p=null==r||null===(c=r._tail)||void 0===c?void 0:c.array[1];return"(".concat(e," < ").concat(s," || ").concat(e," > ").concat(p,")")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp2.apply(e,[["$gte","$lte"],!0].concat(r))},valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(e){return null!=e[0]&&null!=e[1]?e[0]<=e[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(e,t,r,n,o,i,l,a){return a?"".concat(e," IS EMPTY"):"!".concat(e)},sqlFormatOp:function(e,t,r,n,o,i,l,a){var u=this.utils.sqlEmptyValue(a);return"COALESCE(".concat(e,", ").concat(u,") = ").concat(u)},spelFormatOp:function(e,t,r,n,o,i,l,a){return"".concat(e," <= ''")},celFormatOp:function(e,t,r,n,o,i,l,a){return"".concat(e," <= ''")},mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(e,r){return[t.utils.mongoEmptyValue(r),null]},!1].concat(n))},jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(e,t,r,n,o,i,l,a){return a?"".concat(e," IS NOT EMPTY"):"!!".concat(e)},sqlFormatOp:function(e,t,r,n,o,i,l,a){var u=this.utils.sqlEmptyValue(a);return"COALESCE(".concat(e,", ").concat(u,") <> ").concat(u)},spelFormatOp:function(e,t,r,n,o,i,l,a){return"".concat(e," > ''")},mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$nin",function(e,r){return[t.utils.mongoEmptyValue(r),null]},!1].concat(n))},jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(e,t,r,n,o,i,l,a){return a?"".concat(e," IS NULL"):"!".concat(e)},spelFormatOp:function(e,t,r,n,o,i,l,a){return"".concat(e," == null")},celFormatOp:function(e,t,r,n,o,i,l,a){return"".concat(e," == null")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return null},!1].concat(r))},jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(e,t,r,n,o,i,l,a){return a?"".concat(e," IS NOT NULL"):"!!".concat(e)},spelFormatOp:function(e,t,r,n,o,i,l,a){return"".concat(e," != null")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return null},!1].concat(r))},jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,r,n,o,i,l,a){var u=a?"=":"==";return"".concat(e," ").concat(u," ").concat(r)},spelOp:"==",celOp:"==",spelOps:["==","eq"],mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))},reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,r,n,o,i,l,a){return"".concat(e," != ").concat(r)},spelOp:"!=",celOp:"!=",spelOps:["!=","ne"],mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return e},!1].concat(r))},reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(e,t,r,n,o,i,l,a){return"value"==n?"".concat(e," IN (").concat(r.join(", "),")"):"".concat(e," IN (").concat(r,")")},celFormatOp:function(e,t,r,n,o,i,l,a){return"".concat(r," in ").concat(e)},sqlFormatOp:function(e,t,r,n,o,i,l,a){return"value"==n?"".concat(e," IN (").concat(r.join(", "),")"):void 0},valueTypes:["multiselect"],spelOp:"${1}.contains(${0})",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(e){return e},!1].concat(r))},reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(e,t,r,n,o,i,l,a){return"value"==n?"".concat(e," NOT IN (").concat(r.join(", "),")"):"".concat(e," NOT IN (").concat(r,")")},sqlFormatOp:function(e,t,r,n,o,i,l,a){return"value"==n?"".concat(e," NOT IN (").concat(r.join(", "),")"):void 0},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$nin",function(e){return e},!1].concat(r))},reversedOp:"select_any_in"},multiselect_contains:{label:"Contains",labelForFormat:"CONTAINS",formatOp:function(e,t,r,n,o,i,l,a){return"value"==n?"".concat(e," CONTAINS [").concat(r.join(", "),"]"):"".concat(e," CONTAINS ").concat(r)},celFormatOp:function(e,t,r,n,o,i,l,a){return"".concat(r," in ").concat(e)},reversedOp:"multiselect_not_contains",jsonLogic2:"some-in",jsonLogic:function(e,t,r){return{some:[e,{in:[{var:""},r]}]}},spelOp:"T(CollectionUtils).containsAny(${0}, ${1})",elasticSearchQueryType:"term",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(e){return e},!1].concat(r))}},multiselect_not_contains:{isNotOp:!0,label:"Not contains",labelForFormat:"NOT CONTAINS",formatOp:function(e,t,r,n,o,i,l,a){return"value"==n?"".concat(e," NOT CONTAINS [").concat(r.join(", "),"]"):"".concat(e," NOT CONTAINS ").concat(r)},reversedOp:"multiselect_contains"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,r,n,o,i,l,a){var u=a?"=":"==";return"value"==n?"".concat(e," ").concat(u," [").concat(r.join(", "),"]"):"".concat(e," ").concat(u," ").concat(r)},sqlFormatOp:function(e,t,r,n,o,i,l,a){var u=this;return"value"==n?"".concat(e," = '").concat(r.map((function(e){return u.utils.SqlString.trim(e)})).join(","),"'"):void 0},celOp:"==",spelOp:"${0}.equals(${1})",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))},reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(e,t,r){return{all:[e,{in:[{var:""},r]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,r,n,o,i,l,a){return"value"==n?"".concat(e," != [").concat(r.join(", "),"]"):"".concat(e," != ").concat(r)},sqlFormatOp:function(e,t,r,n,o,i,l,a){var u=this;return"value"==n?"".concat(e," != '").concat(r.map((function(e){return u.utils.SqlString.trim(e)})).join(","),"'"):void 0},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return e},!1].concat(r))},reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(e,t,r,n,o,i,l,a){var u=r.first(),c=r.get(1),s=l.get("proximity");return"".concat(e," ").concat(u," NEAR/").concat(s," ").concat(c)},sqlFormatOp:function(e,t,r,n,o,i,l,a){var u=r.first(),c=r.get(1),s=this.utils.SqlString.trim(u),p=this.utils.SqlString.trim(c),f=l.get("proximity");return"CONTAINS(".concat(e,", 'NEAR((").concat(s,", ").concat(p,"), ").concat(f,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(e){return"".concat(e," > 0")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$gt",function(e){return 0},!1].concat(r))}},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(e,t,r){return"".concat(e," == ").concat(r)},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))}},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(e){return"".concat(e," == 0")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return 0},!1].concat(r))}}},gl={text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},spelFormatValue:function(e,t,r,n,o){return this.utils.spelEscape(e)},celFormatValue:function(e,t,r,n,o){return this.utils.celEscape(e)},sqlFormatValue:function(e,t,r,n,o){return"LIKE"==o.sqlOp||"NOT LIKE"==o.sqlOp?this.utils.SqlString.escapeLike(e,"starts_with"!=n,"ends_with"!=n):this.utils.SqlString.escape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return"LIKE"==o.sqlOp||"NOT LIKE"==o.sqlOp?this.utils.SqlString.escapeLike(e,"starts_with"!=n,"ends_with"!=n):this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},celFormatValue:function(e){return this.utils.celEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e,t,r){var n=r.step&&!Number.isInteger(r.step);return this.utils.spelEscape(e,n)},celFormatValue:function(e,t,r){var n=r.step&&!Number.isInteger(r.step);return this.utils.celEscape(e,n)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},slider:{type:"number",jsType:"number",valueSrc:"value",valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},celFormatValue:function(e){return this.utils.celEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},select:{type:"select",jsType:"string",valueSrc:"value",valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(e,t,r,n){var o=this.utils.getTitleInListValues(t.fieldSettings.listValues||t.asyncListValues,e);return n?this.utils.stringifyForDisplay(o):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},celFormatValue:function(e){return this.utils.celEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(e,t,r,n){var o=this,i=e.map((function(e){return o.utils.getTitleInListValues(t.fieldSettings.listValues||t.asyncListValues,e)}));return n?i.map(this.utils.stringifyForDisplay):e.map(JSON.stringify)},sqlFormatValue:function(e,t,r,n,o){var i=this;return e.map((function(e){return i.utils.SqlString.escape(e)}))},spelFormatValue:function(e,t,r,n,o){var i=o.spelOp&&o.spelOp.startsWith("${1}"),l=this.utils.spelEscape(e);return i&&(l=this.utils.spelFixList(l)),l},celFormatValue:function(e,t,r,n,o){return o.spelOp&&o.spelOp.startsWith("${1}"),this.utils.celEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},date:{type:"date",jsType:"string",valueSrc:"value",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(e,t,r,n){var o=this.utils.moment(e,r.valueFormat);return n?o.format(r.dateFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return this.utils.SqlString.escape(i.format("YYYY-MM-DD"))},spelFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat).format("YYYY-MM-DD");return"T(java.time.LocalDate).parse('".concat(i,"', T(java.time.format.DateTimeFormatter).ofPattern('").concat("yyyy-MM-dd","'))")},spelImportFuncs:[{obj:{cls:["java","time","LocalDate"]},methodName:"parse",args:[{var:"v"},{obj:{cls:["java","time","format","DateTimeFormatter"]},methodName:"ofPattern",args:[{var:"fmt"}]}]}],spelImportValue:function(e,t,r){var n,o,i,l;if(!t)return[void 0,"No widget def to get value format"];if(null!=r&&null!==(n=r.fmt)&&void 0!==n&&null!==(n=n.value)&&void 0!==n&&null!==(o=n.includes)&&void 0!==o&&o.call(n," ")||null!==(i=r.fmt)&&void 0!==i&&null!==(i=i.value)&&void 0!==i&&null!==(l=i.toLowerCase)&&void 0!==l&&l.call(i).includes("hh:mm"))return[void 0,"Invalid date format ".concat(JSON.stringify(r.fmt))];var a=this.utils.moment(e.value,this.utils.moment.ISO_8601);return a.isValid()?[a.format(null==t?void 0:t.valueFormat),[]]:[void 0,"Invalid date"]},celFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat).format("YYYY-MM-DD");return"T(java.time.LocalDate).parse('".concat(i,"', T(java.time.format.DateTimeFormatter).ofPattern('").concat("yyyy-MM-dd","'))")},celImportFuncs:[{obj:{cls:["java","time","LocalDate"]},methodName:"parse",args:[{var:"v"},{obj:{cls:["java","time","format","DateTimeFormatter"]},methodName:"ofPattern",args:[{var:"fmt"}]}]}],celImportValue:function(e,t,r){var n,o,i,l;if(!t)return[void 0,"No widget def to get value format"];if(null!=r&&null!==(n=r.fmt)&&void 0!==n&&null!==(n=n.value)&&void 0!==n&&null!==(o=n.includes)&&void 0!==o&&o.call(n," ")||null!==(i=r.fmt)&&void 0!==i&&null!==(i=i.value)&&void 0!==i&&null!==(l=i.toLowerCase)&&void 0!==l&&l.call(i).includes("hh:mm"))return[void 0,"Invalid date format ".concat(JSON.stringify(r.fmt))];var a=this.utils.moment(e.value,this.utils.moment.ISO_8601);return a.isValid()?[a.format(null==t?void 0:t.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,t,r){return this.utils.moment(e,r.valueFormat).toDate()},toJS:function(e,t){var r=this.utils.moment(e,t.valueFormat);return r.isValid()?r.toDate():void 0},mongoFormatValue:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return n.isValid()?n.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(e,t,r,n){var o=this.utils.moment(e,r.valueFormat);return n?o.format(r.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return this.utils.SqlString.escape(i.format("HH:mm:ss"))},spelFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat).format("HH:mm:ss");return"T(java.time.LocalTime).parse('".concat(i,"')")},spelImportFuncs:["T(java.time.LocalTime).parse(${v})"],spelImportValue:function(e,t,r){var n,o,i;if(!t)return[void 0,"No widget def to get value format"];if(null!=r&&r.fmt&&(null===(n=r.fmt)||void 0===n||null===(n=n.value)||void 0===n||null===(o=n.toLowerCase)||void 0===o||!o.call(n).includes("hh:mm")||null!==(i=r.fmt)&&void 0!==i&&null!==(i=i.value)&&void 0!==i&&i.includes(" ")))return[void 0,"Invalid time format ".concat(JSON.stringify(r.fmt))];var l=this.utils.moment(e.value,"HH:mm:ss");return l.isValid()?[l.format(null==t?void 0:t.valueFormat),[]]:[void 0,"Invalid date"]},celFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat).format("HH:mm:ss");return"T(java.time.LocalTime).parse('".concat(i,"')")},celImportFuncs:["T(java.time.LocalTime).parse(${v})"],celImportValue:function(e,t,r){var n,o,i;if(!t)return[void 0,"No widget def to get value format"];if(null!=r&&r.fmt&&(null===(n=r.fmt)||void 0===n||null===(n=n.value)||void 0===n||null===(o=n.toLowerCase)||void 0===o||!o.call(n).includes("hh:mm")||null!==(i=r.fmt)&&void 0!==i&&null!==(i=i.value)&&void 0!==i&&i.includes(" ")))return[void 0,"Invalid time format ".concat(JSON.stringify(r.fmt))];var l=this.utils.moment(e.value,"HH:mm:ss");return l.isValid()?[l.format(null==t?void 0:t.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return 60*n.get("hour")*60+60*n.get("minute")+n.get("second")},toJS:function(e,t){var r=this.utils.moment(e,t.valueFormat);return r.isValid()?60*r.get("hour")*60+60*r.get("minute")+r.get("second"):void 0},mongoFormatValue:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return 60*n.get("hour")*60+60*n.get("minute")+n.get("second")},elasticSearchFormatValue:function(e,t,r,n){return{script:{script:{source:"doc[".concat(n,"][0].getHour() >== params.min && doc[").concat(n,"][0].getHour() <== params.max"),params:{min:t[0],max:t[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(e,t,r,n){var o=this.utils.moment(e,r.valueFormat);return n?o.format(r.dateFormat+" "+r.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return this.utils.SqlString.escape(i.toDate())},spelFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat).format("YYYY-MM-DD HH:mm:ss");return"T(java.time.LocalDateTime).parse('".concat(i,"', T(java.time.format.DateTimeFormatter).ofPattern('").concat("yyyy-MM-dd HH:mm:ss","'))")},spelImportFuncs:[{obj:{cls:["java","time","LocalDateTime"]},methodName:"parse",args:[{var:"v"},{obj:{cls:["java","time","format","DateTimeFormatter"]},methodName:"ofPattern",args:[{var:"fmt"}]}]}],spelImportValue:function(e,t,r){var n,o;if(!t)return[void 0,"No widget def to get value format"];if(null==r||null===(n=r.fmt)||void 0===n||null===(n=n.value)||void 0===n||null===(o=n.includes)||void 0===o||!o.call(n," "))return[void 0,"Invalid datetime format ".concat(JSON.stringify(r.fmt))];var i=this.utils.moment(e.value,this.utils.moment.ISO_8601);return i.isValid()?[i.format(null==t?void 0:t.valueFormat),[]]:[void 0,"Invalid date"]},celFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat).format("YYYY-MM-DD HH:mm:ss");return"T(java.time.LocalDateTime).parse('".concat(i,"', T(java.time.format.DateTimeFormatter).ofPattern('").concat("yyyy-MM-dd HH:mm:ss","'))")},celImportFuncs:[{obj:{cls:["java","time","LocalDateTime"]},methodName:"parse",args:[{var:"v"},{obj:{cls:["java","time","format","DateTimeFormatter"]},methodName:"ofPattern",args:[{var:"fmt"}]}]}],celImportValue:function(e,t,r){var n,o;if(!t)return[void 0,"No widget def to get value format"];if(null==r||null===(n=r.fmt)||void 0===n||null===(n=n.value)||void 0===n||null===(o=n.includes)||void 0===o||!o.call(n," "))return[void 0,"Invalid datetime format ".concat(JSON.stringify(r.fmt))];var i=this.utils.moment(e.value,this.utils.moment.ISO_8601);return i.isValid()?[i.format(null==t?void 0:t.valueFormat),[]]:[void 0,"Invalid date"]},jsonLogic:function(e,t,r){return this.utils.moment(e,r.valueFormat).toDate()},toJS:function(e,t){var r=this.utils.moment(e,t.valueFormat);return r.isValid()?r.toDate():void 0},mongoFormatValue:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return n.isValid()?n.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",labelYes:"Yes",labelNo:"No",formatValue:function(e,t,r,n){return n?e?"Yes":"No":JSON.stringify(!!e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e,t,r,n,o){return this.utils.spelEscape(e)},celFormatValue:function(e,t,r,n,o){return this.utils.celEscape(e)},defaultValue:!1,toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},field:{valueSrc:"field",formatValue:function(e,t,r,n,o,i,l){return n&&l.label||e},sqlFormatValue:function(e,t,r,n,o,i){return e},spelFormatValue:function(e,t,r,n,o){return e},celFormatValue:function(e,t,r,n,o){return e},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare"},func:{valueSrc:"func",valueLabel:"Function",valuePlaceholder:"Select function"},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(e){return this.utils.spelEscape(""===e?null:e)},spelImportValue:function(e){return[e.value,[]]},celFormatValue:function(e){return this.utils.celEscape(""===e?null:e)},celImportValue:function(e){return[e.value,[]]}}},hl=dl(dl({},G),{},{convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},formatCelField:function(e,t,r,n,o,i){var l=n.map((function(e,t){var r=e.key,n=(e.parent,e.fieldSeparator);return"".concat(t?n:"").concat(r)})).join("");return o.fieldName&&(l=e),l},formatSpelField:function(e,t,r,n,o,i){var l=this,a=n.map((function(e,t){var r=e.key,n=e.parent,o=e.fieldSeparator;return 0==t?"[map]"==n?"#this[".concat(l.utils.spelEscape(r),"]"):r:"map"==n||"[map]"==n?"[".concat(l.utils.spelEscape(r),"]"):"".concat(o).concat(r)})).join("");return o.fieldName&&(a=e),o.isSpelVariable&&(a="#"+a),a},sqlFormatReverse:function(e){if(null!=e)return"NOT("+e+")"},spelFormatReverse:function(e){if(null!=e)return"!("+e+")"},celFormatReverse:function(e){if(null!=e)return"!("+e+")"},formatReverse:function(e,t,r,n,o,i){if(null!=e)return i?"NOT ("+e+")":"!("+e+")"},formatAggr:function(e,t,r,n,o,i,l,a,u,c){var s=l.labelForFormat,p=l.cardinality;if(0==p){var f=e?" HAVE ".concat(e):"";return"".concat(s," OF ").concat(t).concat(f)}if(null==p||1==p){var d=e?" WHERE ".concat(e):"";return"COUNT OF ".concat(t).concat(d," ").concat(s," ").concat(n)}if(2==p){var v=e?" WHERE ".concat(e):"",g=n.first(),h=n.get(1);return"COUNT OF ".concat(t).concat(v," ").concat(s," ").concat(g," AND ").concat(h)}},jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"},canCompareFieldWithField:function(e,t,r,n){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}}}),ml=function(e,t){var r,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={rangeslider:Ol,treeselect:Sl,treemultiselect:wl,rangeable__date:bl("date","date")},i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return pl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pl(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}(t);try{for(i.s();!(r=i.n()).done;){var l=r.value,a=o[l];if(!a)throw new Error("Can't ".concat(n?"add":"remove"," mixin ").concat(l));e=a(e,n)}}catch(e){i.e(e)}finally{i.f()}return e},yl=function(e,t){return ml(e,t,!0)},bl=function(e,t){return function(r){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=r.types;return o=dl(dl({},o),{},(0,T.Z)({},e,dl(dl({},o[e]),{},{widgets:dl({},o[e].widgets)}))),n?o[e].widgets[t]=dl({opProps:{between:{isSpecialRange:!0,textSeparators:[null,null]},not_between:{isSpecialRange:!0,textSeparators:[null,null]}}},o[e].widgets[t]):delete o[e].widgets[t],dl(dl({},r),{},{types:o})}},Ol=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.widgets,n=e.types;return r=dl({},r),t?r.rangeslider=dl({type:"number",jsType:"number",valueSrc:"value",valueLabel:"Range",valuePlaceholder:"Select range",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},celFormatValue:function(e){return this.utils.celEscape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},singleWidget:"slider",toJS:function(e,t){return e}},r.rangeslider):delete r.rangeslider,n=dl(dl({},n),{},{number:dl(dl({},n.number),{},{widgets:dl({},n.number.widgets)})}),t?n.number.widgets.rangeslider=dl({opProps:{between:{isSpecialRange:!0},not_between:{isSpecialRange:!0}},operators:["between","not_between","is_null","is_not_null"]},n.number.widgets.rangeslider):delete n.number.widgets.rangeslider,dl(dl({},e),{},{widgets:r,types:n})},Sl=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.widgets,n=e.types;return r=dl({},r),t?r.treeselect=dl({type:"treeselect",jsType:"string",valueSrc:"value",valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(e,t,r,n){var o=t.fieldSettings.treeValues||t.fieldSettings.listValues||t.asyncListValues,i=this.utils.getTitleInListValues(o,e);return n?this.utils.stringifyForDisplay(i):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},celFormatValue:function(e){return this.utils.SqlString.escape(e)},toJS:function(e,t){return e}},r.treeselect):delete r.treeselect,n=dl({},n),t?n.treeselect=dl({mainWidget:"treeselect",defaultOperator:"select_equals",widgets:{treeselect:{operators:["select_equals","select_not_equals"]},treemultiselect:{operators:["select_any_in","select_not_any_in"]}}},n.treeselect):delete n.treeselect,dl(dl({},e),{},{widgets:r,types:n})},wl=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.widgets,n=e.types;return r=dl({},r),t?r.treemultiselect=dl({type:"treemultiselect",jsType:"array",valueSrc:"value",valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(e,t,r,n){var o=this,i=t.fieldSettings.treeValues||t.fieldSettings.listValues||t.asyncListValues,l=e.map((function(e){return o.utils.getTitleInListValues(i,e)}));return n?l.map(this.utils.stringifyForDisplay):e.map(JSON.stringify)},sqlFormatValue:function(e,t,r,n,o){var i=this;return e.map((function(e){return i.utils.SqlString.escape(e)}))},spelFormatValue:function(e){return this.utils.spelEscape(e)},celFormatValue:function(e){return this.utils.celEscape(e)},toJS:function(e,t){return e}},r.treemultiselect):delete r.treemultiselect,n=dl({},n),t?n.treemultiselect=dl({defaultOperator:"multiselect_equals",widgets:{treemultiselect:{operators:["multiselect_equals","multiselect_not_equals"]}}},n.treemultiselect):delete n.treemultiselect,dl(dl({},e),{},{widgets:r,types:n})},Fl={addMixins:yl,removeMixins:function(e,t){return ml(e,t,!1)}},jl={conjunctions:{AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",celConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(e,t,r,n){return e.size>1?(r?"NOT ":"")+"("+e.join(" "+(n?"AND":"&&")+" ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},sqlFormatConj:function(e,t,r){return e.size>1?(r?"NOT ":"")+"("+e.join(" AND ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},spelFormatConj:function(e,t,r,n){return r&&(n=!1),e.size>1?(r?"!":"")+(n?"":"(")+e.join(" && ")+(n?"":")"):(r?"!(":"")+e.first()+(r?")":"")},celFormatConj:function(e,t,r,n){return e.size>1?(r?"!":"")+"("+e.join(" && ")+")":(r?"!(":"")+e.first()+(r?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",celConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(e,t,r,n){return e.size>1?(r?"NOT ":"")+"("+e.join(" "+(n?"OR":"||")+" ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},sqlFormatConj:function(e,t,r){return e.size>1?(r?"NOT ":"")+"("+e.join(" OR ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},spelFormatConj:function(e,t,r,n){return r&&(n=!1),e.size>1?(r?"!":"")+(n?"":"(")+e.join(" || ")+(n?"":")"):(r?"!(":"")+e.first()+(r?")":"")},celFormatConj:function(e,t,r,n){return e.size>1?(r?"!":"")+"("+e.join(" || ")+")":(r?"!(":"")+e.first()+(r?")":"")}}},operators:vl,widgets:gl,types:{text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"]},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_contains","multiselect_not_contains","multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},settings:hl,ctx:sl};const Cl=jl=yl(jl,["rangeslider","treeselect","treemultiselect"]);var El="ADD_GROUP",Ll="ADD_CASE_GROUP",kl="REMOVE_GROUP",Pl="SET_CONJUNCTION",Tl="SET_NOT",Vl="ADD_RULE",_l="REMOVE_RULE",Zl="SET_FIELD",Il="SET_FIELD_SRC",Dl="SET_OPERATOR",Rl="SET_VALUE",xl="SET_VALUE_SRC",Al="SET_OPERATOR_OPTION",Nl="SET_LOCK",Ml="SET_TREE",ql="MOVE_ITEM",Wl="after",Bl="before",Gl="append",$l="prepend",zl="SET_DRAG_PROGRESS",Ul="SET_DRAG_START",Jl="SET_DRAG_END",Hl=r(61230),Yl=r.n(Hl);function Kl(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ql(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ql(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function Ql(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xl(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ta=function(e,t,r,n,o,i){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=i.settings.shouldCreateEmptyGroup,c=t.push(n),s=!u,p=!(null==a||!a.isDefaultCase),f=e;return(e=na(e,t,r,n,Tr(i).merge(o||{}),i,l))!==f&&(l||p||(e=e.setIn(Ve(c,"children1"),new(J().OrderedMap)),s&&(e=na(e,c,"rule",q(),Lr(i),i))),e=De(e)),e},ra=function e(t,r,n){n&&Array.isArray(n)&&(r.children1=new(J().OrderedMap)(n.reduce((function(r,n){var o=q(),i=ea(ea({},n),{},{properties:Vr(t,n).merge(n.properties||{}),id:o});return e(t,i,i.children1),ea(ea({},r),{},(0,T.Z)({},o,new(J().Map)(i)))}),{})))},na=function(e,t,r,n,o,i){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if("switch_group"==r)throw new Error("Can't add switch_group programmatically");var a,u,c=i.settings,s=c.maxNumberOfCases,p=c.maxNumberOfRules,f=c.maxNesting,d="switch_group"==e.get("type"),v=e.getIn(Ve(t)),g=d?e.getIn(Ve(t.take(2))):null,h=Ve(t,"children1"),m=e.getIn(h),y=!!m&&m.size,b=y?m.size:null;"case_group"==r?(a=b,u=s):"group"==r?(a=t.size,u=f):"rule_group"==(null==v?void 0:v.get("type"))||(a=Ne(d?g:e),u=p);var O=!u||!a||a<u,S={type:r,id:n,properties:o};ra(i,S,l);var w="case_group"==r&&y&&null==m.last().get("children1");if(O){var F=new(J().OrderedMap)((0,T.Z)({},n,new(J().Map)(S)));if(y)if(w){var j,C=m.last(),E=new(J().OrderedMap)((j={},(0,T.Z)(j,n,new(J().Map)(S)),(0,T.Z)(j,C.get("id"),C),j));e=(e=e.deleteIn(Ve(h,"children1",C.get("id")))).mergeIn(h,E)}else e=e.mergeIn(h,F);else e=e.setIn(h,F);e=De(e)}return e},oa=function(e,t){return e=e.deleteIn(Ve(t)),De(e)},ia={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},la=function(e,t){return{type:Ml,tree:t,config:e}},aa=function(e,t,r){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return{type:Vl,ruleType:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rule",children:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,path:oe(t),id:q(),properties:Lr(e,n).merge(r||{}),config:e}},ua=function(e,t){return{type:_l,path:oe(t),config:e}},ca=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:Ll,path:oe(t),children:n,id:q(),properties:Tr(e).merge(r||{}),config:e,meta:{isDefaultCase:!0}}},sa=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:Ll,path:oe(t),children:n,id:q(),properties:Tr(e).merge(r||{}),config:e}},pa=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:El,path:oe(t),children:n,id:q(),properties:Tr(e).merge(r||{}),config:e}},fa=function(e,t){return{type:kl,path:oe(t),config:e}},da=function(e,t,r,n){return{type:ql,fromPath:oe(t),toPath:oe(r),placement:n,config:e}},va=function(e,t,r){return{type:Pl,path:oe(t),conjunction:r}},ga=function(e,t,r){return{type:Tl,path:oe(t),not:r}},ha=function(e,t,r){return{type:Nl,path:oe(t),lock:r}},ma=function(e,t,r,n,o){return{type:Zl,path:oe(t),field:r,config:e,asyncListValues:n,__isInternal:o}},ya=function(e,t,r){return{type:Il,path:oe(t),srcKey:r,config:e}},ba=function(e,t,r){return{type:Dl,path:oe(t),operator:r,config:e}},Oa=function(e,t,r,n,o,i,l){return{type:Rl,path:oe(t),delta:r,value:n,valueType:o,asyncListValues:i,config:e,__isInternal:l}},Sa=function(e,t,r,n){return{type:xl,path:oe(t),delta:r,srcKey:n,config:e}},wa=function(e,t,r,n){return{type:Al,path:oe(t),name:r,value:n,config:e}};function Fa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ja(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ca=ja(ja(ja(ja({},v),f),a),{},{ConfigMixins:Fl}),Ea=r(7862),La=r.n(Ea);const ka=function(e,t,r,n){var o=ea({tree:t},ia);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,i=arguments.length>1?arguments[1]:void 0,l={},a=function(e,t){if(!e||!e.type)return null;var r,n=[Ml,Ul,zl,Jl],o=Yl()(Y()(e,["config","asyncListValues","__isInternal"]),ie),i=e.path&&function(e,t){return e.getIn(Ve(t,"properties","field"))||null}(t.tree,e.path)||e.field;return i&&(null!==(r=i)&&void 0!==r&&r.toJS&&(i=i.toJS()),o.affectedField=i),(n.includes(e.type)||0==e.type.indexOf("@@redux"))&&(o=null),o}(i,t);switch(null==i?void 0:i.type){case Ml:var u=r(i.config,i.tree);l.tree=u;break;case Ll:l.tree=ta(t.tree,i.path,"case_group",i.id,i.properties,i.config,i.children,i.meta);break;case El:l.tree=ta(t.tree,i.path,"group",i.id,i.properties,i.config,i.children,i.meta);break;case kl:l.tree=function(e,t,r){e=oa(e,t);var n=r.settings.canLeaveEmptyGroup,o=t.slice(0,-1);return Ge(e,o)||n||(e=Re(e),!Be(e)||n)||(e=na(e,new(J().List),"rule",q(),Lr(r,void 0,void 0,!1,!1),r)),De(e)}(t.tree,i.path,i.config);break;case Vl:l.tree=na(t.tree,i.path,i.ruleType,i.id,i.properties,i.config,i.children);break;case _l:l.tree=function(e,t,r){e=oa(e,t);var n=r.settings.canLeaveEmptyGroup,o=t.pop(),i=e.getIn(Ve(o)),l=i.getIn(["properties","field"]),a=i.getIn(["properties","operator"]),u=(i.getIn(["properties","value",0]),l?jo(r,l):null),c=a?Co(r,a,l):null,s=l&&a&&0!=c.cardinality,p="rule_group"==i.get("type"),f=!Ge(e,o),d=p?s&&u.initialEmptyWhere:n;return f&&!d&&(p&&(e=e.deleteIn(Ve(o))),e=Re(e),Be(e)&&!n)&&(e=na(e,new(J().List),"rule",q(),Lr(r,void 0,void 0,!1,!1),r)),De(e)}(t.tree,i.path,i.config);break;case Pl:l.tree=function(e,t,r){return e.setIn(Ve(t,"properties","conjunction"),r)}(t.tree,i.path,i.conjunction);break;case Tl:l.tree=function(e,t,r){return e.setIn(Ve(t,"properties","not"),r)}(t.tree,i.path,i.not);break;case Zl:var c=function(e,t,r,n,o,i){var l,a;if(!r)return{tree:oa(e,t),isInternalValueChange:a};var u=n.settings,c=u.fieldSeparator,s=u.setOpOnChangeField,p=u.showErrorMessage;u.keepInputOnChangeFieldSrc,Array.isArray(r)&&(r=r.join(c));var f=e.getIn(Ve(t,"type")),d=e.getIn(Ve(t,"properties")),v="rule_group"==f,g=d.get("fieldSrc"),h=jo(n,r);if(!h)return console.warn("No config for LHS ".concat(r)),{tree:e,isInternalValueChange:a};var m=h.type;"!group"!==m&&"!struct"!==m||(m=null);var y=d.get("operator"),b=d.get("operatorOptions"),O=(d.get("field"),d.get("value"),d.get("valueSrc",new(J().List)),d.get("valueType",new(J().List)),"!group"==h.type),S=O&&"array"==h.mode,w=v!=O,F=h&&-1!==(null===(l=h.operators)||void 0===l?void 0:l.indexOf(y))?y:null,j=null,C="func"===g?tn(n,m):rn(n,r);if(C&&1==C.length)j=C[0];else if(C&&C.length>1){var E,L=Kl(s||[]);try{for(L.s();!(E=L.n()).done;){var k=E.value;if("keep"!=k||w?"default"==k?j=Cr(n,r,!1):"first"==k&&(j=nn(n,r)):j=F,j)break}}catch(e){L.e(e)}finally{L.f()}}if(!O&&!h.operators)return console.warn("Type ".concat(h.type," is not supported")),{tree:e,isInternalValueChange:a};if(v&&!O&&(e=(e=(e=e.setIn(Ve(t,"type"),"rule")).deleteIn(Ve(t,"children1"))).setIn(Ve(t,"properties"),new(J().OrderedMap))),O){e=e.setIn(Ve(t,"type"),"rule_group");var P=Xr(n,n,d,r,j,"field",!0),T=(P.canReuseValue,P.newValue),V=P.newValueSrc,_=P.newValueType,Z=P.operatorCardinality,I=Tr(n,h).merge({field:r,fieldSrc:"field",mode:h.mode});S&&(I=I.merge({operator:j,value:T,valueSrc:V,valueType:_})),e=(e=e.setIn(Ve(t,"children1"),new(J().OrderedMap))).setIn(Ve(t,"properties"),I),h.initialEmptyWhere&&1==Z||(e=na(e,t,"rule",q(),Lr(n,r),n)),e=De(e)}else e=e.updateIn(Ve(t,"properties"),(function(e){return e.withMutations((function(e){var t=Xr(n,n,e,r,j,"field",!0),o=t.canReuseValue,l=t.newValue,u=t.newValueSrc,c=t.newValueType,s=t.newValueError;p&&(e=e.set("valueError",s));var f=o?b:Er(n,j,r);return a=i,e.set("field",r).delete("fieldType").set("fieldSrc",g).set("operator",j).set("operatorOptions",f).set("value",l).set("valueSrc",u).set("valueType",c).delete("asyncListValues")}))}));return{tree:e,isInternalValueChange:a}}(t.tree,i.path,i.field,i.config,i.asyncListValues,i.__isInternal),s=c.tree,p=c.isInternalValueChange;l.__isInternalValueChange=p,l.tree=s;break;case Il:l.tree=function(e,t,r,n){var o=n.settings.keepInputOnChangeFieldSrc,i=e.getIn(Ve(t)),l=(i.get("type"),i.get("properties")),a=l.get("field"),u=l.get("fieldType"),c=jo(n,a),s=(null==c?void 0:c.type)||u;s&&"!group"!==s&&"!struct"!==s||(s=null);var p=!Qr.includes(s);return(e=o&&!gn(i,n,!0)&&p?(e=e.setIn(Ve(t,"properties","field"),null)).setIn(Ve(t,"properties","fieldType"),s):e.setIn(Ve(t,"properties"),Lr(n,null,null,!1))).setIn(Ve(t,"properties","fieldSrc"),r)}(t.tree,i.path,i.srcKey,i.config);break;case Nl:l.tree=function(e,t,r){return Ie(e.setIn(Ve(t,"properties","isLocked"),r))}(t.tree,i.path,i.lock);break;case Dl:l.tree=function(e,t,r,n){var o=n.settings.showErrorMessage,i=e.getIn(Ve(t,"properties")),l=e.getIn(Ve(t,"children1")),a=i.get("field"),u=(i.get("fieldSrc"),jo(n,a)),c="!group"==(null==u?void 0:u.type),s=Co(n,r,a),p=s?ee(s.cardinality,1):null;return e=e.updateIn(Ve(t,"properties"),(function(e){return e.withMutations((function(e){var t=e.get("field"),i=e.get("operatorOptions"),l=(e.get("value",new(J().List)),e.get("valueSrc",new(J().List)),e.get("operator"),Xr(n,n,e,t,r,"operator",!0)),a=l.canReuseValue,u=l.newValue,c=l.newValueSrc,s=l.newValueType,p=l.newValueError;o&&(e=e.set("valueError",p));var f=a?i:Er(n,r,t);return a||(e=e.delete("asyncListValues")),e.set("operator",r).set("operatorOptions",f).set("value",u).set("valueSrc",c).set("valueType",s)}))})),c&&0==p&&0==l.size&&(e=na(e,t,"rule",q(),Lr(n,a),n)),e}(t.tree,i.path,i.operator,i.config);break;case Rl:var f=function(e,t,r,n,o,i,l,a){var u,c=i.settings,s=c.fieldSeparator,p=c.showErrorMessage,f=e.getIn(Ve(t,"properties","valueSrc",r+""))||null;"field"===f&&Array.isArray(n)&&(n=n.join(s));var d=e.getIn(Ve(t,"properties","field"))||null,v=e.getIn(Ve(t,"properties","operator"))||null,g=Co(i,v,d),h=v?ee(g.cardinality,1):null,m=o||function(e,t,r){var n=null;if(e)if("field"===t){var o=jo(r,e);o&&(n=o.type)}else if("func"===t){var i=e.get("func");if(i){var l=mo(r,i);l&&(n=l.returnType)}}return n}(n,f,i),y=Nr(i,d,d,v,n,m,f,l,!1,!1,!0),b=(0,V.Z)(y,2),O=b[0],S=b[1],w=!O;if(S!==n&&(n=S),p){var F=dn(i,d,v,f),j=Eo(i,d,v,F,f),C=Array.from({length:h},(function(r,n){return e.getIn(Ve(t,"properties","valueSrc",n+""))||null}));if(g&&g.validateValues&&C.filter((function(e){return"value"==e||null==e})).length==h){var E=Array.from({length:h},(function(o,i){return i==r?n:e.getIn(Ve(t,"properties","value",i+""))||null})),L=j&&j.toJS?E.map((function(e){return j.toJS.call(i.ctx,e,j)})):E,k=g.validateValues(L);e=e.setIn(Ve(t,"properties","valueError",h),k)}}e.getIn(Ve(t,"properties","value"))||(e=e.setIn(Ve(t,"properties","value"),new(J().List)(new Array(h))).setIn(Ve(t,"properties","valueType"),new(J().List)(new Array(h))).setIn(Ve(t,"properties","valueError"),new(J().List)(new Array(h))));var P=null==e.getIn(Ve(t,"properties","value",r+"")),T=!!e.getIn(Ve(t,"properties","valueError",r));return(w||p)&&(e=e.deleteIn(Ve(t,"properties","asyncListValues")),void 0===n?e=(e=e.setIn(Ve(t,"properties","value",r+""),void 0)).setIn(Ve(t,"properties","valueType",r+""),null):(l&&(e=e.setIn(Ve(t,"properties","asyncListValues"),l)),e=(e=e.setIn(Ve(t,"properties","value",r+""),n)).setIn(Ve(t,"properties","valueType",r+""),m),u=a&&!P&&!T)),p&&(e=e.setIn(Ve(t,"properties","valueError",r),O)),a&&(w&&T||!w&&!T)&&(e=e.setIn(Ve(t,"properties","valueError",r),O),u=!1),{tree:e,isInternalValueChange:u}}(t.tree,i.path,i.delta,i.value,i.valueType,i.config,i.asyncListValues,i.__isInternal),d=f.tree,v=f.isInternalValueChange;l.__isInternalValueChange=v,l.tree=d;break;case xl:l.tree=function(e,t,r,n,o){var i=o.settings.showErrorMessage,l=e.getIn(Ve(t,"properties","field"))||null,a=(e.getIn(Ve(t,"properties","fieldSrc")),e.getIn(Ve(t,"properties","operator"))||null);if(e=(e=(e=e.setIn(Ve(t,"properties","value",r+""),void 0)).setIn(Ve(t,"properties","valueType",r+""),null)).deleteIn(Ve(t,"properties","asyncListValues")),i){e=e.setIn(Ve(t,"properties","valueError",r),null);var u=Co(o,a,l),c=a?ee(u.cardinality,1):null;u.validateValues&&(e=e.setIn(Ve(t,"properties","valueError",c),null))}if(e=void 0===n?e.setIn(Ve(t,"properties","valueSrc",r+""),null):e.setIn(Ve(t,"properties","valueSrc",r+""),n),n){var s=e.getIn(Ve(t,"properties")),p=Xr(o,o,s,l,a,"valueSrc",!0),f=p.canReuseValue,d=p.newValue,v=p.newValueSrc,g=p.newValueType;p.newValueError,f||v.get(r)!=n||(e=(e=e.setIn(Ve(t,"properties","value",r+""),d.get(r))).setIn(Ve(t,"properties","valueType",r+""),g.get(r)))}return e}(t.tree,i.path,i.delta,i.srcKey,i.config);break;case Al:l.tree=function(e,t,r,n){return e.setIn(Ve(t,"properties","operatorOptions",r),n)}(t.tree,i.path,i.name,i.value);break;case ql:l.tree=function(e,t,r,n,o){var i=Ze(e,t),l=t.pop(),a=t.size>1?Ze(e,l):null,u=a?a.get("children1"):null,c=Ze(e,r),s=n==Gl||n==$l?r:r.pop(),p=n==Gl||n==$l?c:r.size>1?Ze(e,s):null,f=p?p.get("children1"):null;if(!a||!p||!i)return e;var d=a.get("id")==p.get("id"),v=s.size<l.size&&te(s.toArray(),l.toArray().slice(0,s.size)),g=s.size>l.size&&te(l.toArray(),s.toArray().slice(0,l.size)),h=null,m=null;v?h=J().List(l.toArray().slice(s.size)):g&&(m=J().List(s.toArray().slice(l.size)));var y=f,b=u;return g||(b=b.delete(i.get("id"))),d?y=b:v&&(y=y.updateIn(_e(h,"children1"),(function(e){return b}))),n==Bl||n==Wl?y=J().OrderedMap().withMutations((function(e){var t,r=Kl(y.entries());try{for(r.s();!(t=r.n()).done;){var o=(0,V.Z)(t.value,2),l=o[0],a=o[1];l==c.get("id")&&n==Bl&&e.set(i.get("id"),i),e.set(l,a),l==c.get("id")&&n==Wl&&e.set(i.get("id"),i)}}catch(e){r.e(e)}finally{r.f()}})):n==Gl?y=y.merge((0,T.Z)({},i.get("id"),i)):n==$l&&(y=J().OrderedMap((0,T.Z)({},i.get("id"),i)).merge(y)),g&&(b=(b=b.updateIn(_e(m,"children1"),(function(e){return y}))).delete(i.get("id"))),d||v||(e=e.updateIn(Ve(l,"children1"),(function(e){return b}))),g||(e=e.updateIn(Ve(s,"children1"),(function(e){return y}))),De(e)}(t.tree,i.fromPath,i.toPath,i.placement,i.config);break;case Ul:l.dragStart=i.dragStart,l.dragging=i.dragging,l.mousePos=i.mousePos;break;case zl:l.mousePos=i.mousePos,l.dragging=i.dragging;break;case Jl:l.tree=function(e,t){return t.settings.canLeaveEmptyGroup||(e=Re(e)),e}(t.tree,e),l=ea(ea({},l),ia)}return a&&(l.__lastAction=a),n&&l.tree&&t.tree&&n(t.tree),ea(ea(ea({},t),{__isInternalValueChange:void 0,__lastAction:void 0}),l)}},Pa=P.createContext();var Ta=r(82923),Va=r(79541),_a="after",Za="before",Ia="append",Da="prepend",Ra=function(e,t){return{type:"SET_DRAG_PROGRESS",mousePos:e,dragging:t}},xa=function(e,t,r){return{type:"SET_DRAG_START",dragStart:e,dragging:t,mousePos:r}},Aa=function(){return{type:"SET_DRAG_END"}},Na=h,Ma=m,qa=y;function Wa(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ba(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ba(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ga=Ca.ConfigUtils,$a=Ga.extendConfig,za=Ga.configKeys,Ua=function(){var e=new Map,t=0;return{getExtended:function(r){return function(r){return function(t){var r,n=Wa(e.keys());try{var o=function(){var n=r.value;if(0===za.map((function(e){return n[e]===t[e]})).filter((function(e){return!e})).length)return{v:e.get(n)}};for(n.s();!(r=n.n()).done;){var i=o();if("object"===(0,_.Z)(i))return i.v}}catch(e){n.e(e)}finally{n.f()}var l,a=Wa(e.values());try{var u=function(){var e=l.value;if(0===za.map((function(r){return e[r]===t[r]})).filter((function(e){return!e})).length)return{v:e}};for(a.s();!(l=a.n()).done;){var c=u();if("object"===(0,_.Z)(c))return c.v}}catch(e){a.e(e)}finally{a.f()}return null}(r)||function(r){var n=$a(r,++t);return e.size+1>2&&e.delete(e.keys()[0]),e.set(r,n),n}(r)}(function(e){return N()(e,za)}(r))},getBasic:function(t){var r,n=Wa(e.keys());try{var o=function(){var n=r.value,o=e.get(n);if(0===za.map((function(e){return o[e]===t[e]})).filter((function(e){return!e})).length)return{v:n}};for(n.s();!(r=n.n()).done;){var i=o();if("object"===(0,_.Z)(i))return i.v}}catch(e){n.e(e)}finally{n.f()}return t}}},Ja=(r(73656),function(e,t,r){if(!t||e.length<=t)return e;var n=e.substr(0,t-1);return(r?n.substr(0,n.lastIndexOf(" ")):n)+"..."}),Ha=function(e,t){return e===t||e.equals(t)},Ya=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||(Array.isArray(e)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var o=0;o<n;o++)if(!(r?Ya(e[o],t[o],r):e[o]===t[o]))return!1;return!0}(e,t,r):e&&"function"==typeof e.equals?e.equals(t):"object"===(0,_.Z)(e)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),o=Object.keys(t),i=n.length;if(o.length!==i)return!1;for(var l=0;l<i;l++){var a=n[l];if(!(r?Ya(e[a],t[a],r):e[a]===t[a]))return!1}return!0}(e,t,r):e===t)},Ka=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!=e&&e?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}}(),Qa=Ca.validateAndFixTree,Xa=function e(t){if(t){var r,n=(r=t)._reactRootContainer?"root":Object.getOwnPropertyNames(r).filter((function(e){return e.startsWith("__reactContainer")})).length>0?"container":void 0;return void 0!==n?n:e(t.parentNode)}},eu=function(e){return"root"===Xa(e)},tu=function(e,t){return function(r,n){var o=e.props,i=e.state,l=r!=o||n!=i;if(l&&i==n&&o!=r){var a=[];for(var u in r){var c=r[u]!=o[u];c&&("ignore"==t[u]?c=!1:"shallow_deep"==t[u]?c=!Ya(r[u],o[u],!0):"shallow"==t[u]?c=!Ya(r[u],o[u]):"function"==typeof t[u]&&(c=t[u](r[u],o[u],n))),c&&a.push(u)}a.length||(l=!1)}return l}},ru=function(e){return function(t,r){return!Ya(e.props,t)||!Ya(e.state,r)}},nu=function(e){if(e.shouldComponentUpdate||(e.shouldComponentUpdate=ru(e)),16==(r=P.version.split(".").map(parseInt.bind(null,10)))[0]&&r[1]<3||r[0]<16)e.componentWillReceiveProps=function(t){e.onPropsChanged(t)};else{var t=e.shouldComponentUpdate;e.shouldComponentUpdate=function(r,n){return!Ya(e.props,r)&&e.onPropsChanged(r),t.call(e,r,n)}.bind(e)}var r},ou=function(e,t,r){return Yl()(e,(function(e){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r(e.apply(void 0,[t].concat(o)))}}))};function iu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var au=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),(t=n.call(this,e)).shouldComponentUpdate=tu((0,C.Z)(t),{tree:function(e){return e!==t.oldValidatedTree||t.oldValidatedTree!==t.validatedTree}}),nu((0,C.Z)(t)),t._updateActions(e),t.validatedTree=e.getMemoizedTree(e.config,e.tree,void 0,e.sanitizeTree),t.oldValidatedTree=t.validatedTree,t}return(0,j.Z)(o,[{key:"_updateActions",value:function(e){var t=e.config,r=e.dispatch;this.actions=ou(lu(lu(lu({},Na),Ma),qa),t,r)}},{key:"onPropsChanged",value:function(e){var t=e.onChange,r=this.props.config,n=e.tree,o=(this.props.tree,e.config);if(this.oldValidatedTree=this.validatedTree,this.validatedTree=n,r!==o&&(this._updateActions(e),this.validatedTree=e.getMemoizedTree(o,n,r)),!Ha(this.validatedTree,this.oldValidatedTree)){var i=e.getBasicConfig(o);t&&t(this.validatedTree,i,e.__lastAction)}}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.renderBuilder,n=e.dispatch,o=e.__isInternalValueChange;return r({tree:this.validatedTree,actions:this.actions,config:t,dispatch:n,__isInternalValueChange:o})}}]),o}(P.Component);au.propTypes={config:La().object.isRequired,onChange:La().func,renderBuilder:La().func,tree:La().any};var uu=(0,Va.$j)((function(e){return{tree:e.tree,__isInternalValueChange:e.__isInternalValueChange,__lastAction:e.__lastAction}}),null,null,{context:Pa})(au);uu.displayName="ConnectedQuery";const cu=uu;var su=Ca.DefaultUtils.defaultRoot,pu=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e,t){var r;(0,F.Z)(this,o),(r=n.call(this,e,t)).setLastTree=function(e){r.prevTree&&(r.prevprevTree=r.prevTree),r.prevTree=e},r.shouldComponentUpdate=tu((0,C.Z)(r),{value:function(e,t,r){return!1}}),nu((0,C.Z)(r));var i=Ua(),l=i.getExtended,a=i.getBasic;r.getMemoizedConfig=l,r.getBasicConfig=a,r.getMemoizedTree=function(){var e,t,r;return function(n,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return o?n.__configId===r&&(Ha(o,e)||Ha(o,t))?t:(r=n.__configId,e=o,t=!1===l?Qa(o,null,n,i||n,!1,!1):Qa(o,null,n,i||n)):null}}();var u=r.getMemoizedConfig(e),c=u.settings.shouldCreateEmptyGroup,s=su(u,!c),p=!!e.value,f=e.value||s,d=r.getMemoizedTree(u,f,void 0,p),v=ka(u,d,r.getMemoizedTree,r.setLastTree),g=(0,Ta.MT)(v);return r.config=u,r.state={store:g},r.QueryWrapper=function(e){return u.settings.renderProvider(e,u.ctx)},r}return(0,j.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props,r=this.config,n=this.getMemoizedConfig(e),o=r!==n,i=this.state.store.getState().tree,l=!Ha(e.value,this.props.value)&&!Ha(e.value,i),a=l?e.value||su(e):i,u=l&&!Ha(e.value,this.prevTree)&&!Ha(e.value,this.prevprevTree);if(this.sanitizeTree=u||o,o&&(t.settings.renderProvider!==e.settings.renderProvider&&(this.QueryWrapper=function(e){return n.settings.renderProvider(e,n.ctx)}),this.config=n),l||o){var c=this.getMemoizedTree(n,a,r,this.sanitizeTree);this.state.store.dispatch(Na.setTree(n,c))}}},{key:"render",value:function(){var e=this.props,t=e.renderBuilder,r=e.get_children,n=e.onChange,o=this.state.store,i=this.config,l=this.QueryWrapper;return P.createElement(l,{config:i},P.createElement(Va.zt,{store:o,context:Pa},P.createElement(cu,{config:i,getMemoizedTree:this.getMemoizedTree,getBasicConfig:this.getBasicConfig,sanitizeTree:this.sanitizeTree,onChange:n,renderBuilder:t||r})))}}]),o}(P.Component);pu.propTypes={conjunctions:La().object.isRequired,fields:La().object.isRequired,types:La().object.isRequired,operators:La().object.isRequired,widgets:La().object.isRequired,settings:La().object.isRequired,ctx:La().object.isRequired,onChange:La().func,renderBuilder:La().func,value:La().any};var fu=r(63050),du=r(87608),vu=r.n(du);var gu=Ca.ConfigUtils.getFieldConfig;var hu=Ca.clone,mu=Ca.TreeUtils.getFlatTree,yu=!1,bu=["isDraggingTempo","isDraggingMe","dragging"];const Ou=function(e){return function(t){var r;return r=function(r){(0,E.Z)(l,r);var n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,k.Z)(n);if(o){var r=(0,k.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,L.Z)(this,e)});function l(e){var t;return(0,F.Z)(this,l),(t=i.call(this,e)).handleDraggerMouseDown=function(e){var r=t.props.id,n=t.wrapper.current;t.props.onDragStart&&t.props.onDragStart(r,n,e)},t.wrapper=P.createRef(),t}return(0,j.Z)(l,[{key:"render",value:function(){var r=this.props,n=r.isDraggingTempo,o=r.isDraggingMe,i=r.dragging,l=(0,Ui.Z)(r,bu),a=l.isTrueLocked,u={};o&&n&&(yu||(u={top:i.y,left:i.x,width:i.w}));var c=vu()(e,"group-or-rule",o&&n?"qb-draggable":null,o&&!n?"qb-placeholder":null,a?"locked":null);return P.createElement("div",{className:c,style:u,ref:this.wrapper,"data-id":this.props.id},P.createElement(t,(0,fu.Z)({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:o,isDraggingTempo:n},l)))}}]),l}(P.PureComponent),r.propTypes={isDraggingTempo:La().bool,isDraggingMe:La().bool,onDragStart:La().func,dragging:La().object,isLocked:La().bool,isTrueLocked:La().bool},r}};var Su=r(62096),wu=r.n(Su),Fu=r(57383),ju=r.n(Fu);function Cu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Eu=Ca.ConfigUtils,Lu=Eu.getFieldConfig,ku=Eu.getOperatorConfig,Pu=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),t=n.call(this,e),nu((0,C.Z)(t)),t.onPropsChanged(e),t}return(0,j.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","selectedField","selectedFieldSrc","selectedFieldType","selectedOperator"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t,r=e.config,n=e.selectedField,o=e.selectedFieldType,i=e.selectedOperator,l=Lu(r,n),a=(0,Z.Z)((null==l?void 0:l.operators)||(null===(t=r.types[o])||void 0===t?void 0:t.operators)||[]);n||a.includes(i)||a.push(i);var u=Yl()(ju()(r.operators,(function(e,t){return-1!==(null==a?void 0:a.indexOf(t))})),(function(e,t){return ku(r,t,n)})),c=this.buildOptions(r,u,a),s=u[i]||{},p=i?[i]:null;return{placeholder:this.props.config.settings.operatorPlaceholder,items:c,selectedKey:i,selectedKeys:p,selectedPath:p,selectedLabel:s.label,selectedOpts:s,fieldConfig:l}}},{key:"buildOptions",value:function(e,t,r){return t&&r?wu()(t).sort((function(e,t){return r.indexOf(e)-r.indexOf(t)})).map((function(e){return{key:e,path:e,label:t[e].label}})):null}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setOperator,o=e.readonly,i=e.id,l=e.groupId,a=t.settings.renderOperator,u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cu(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:i,groupId:l,config:t,customProps:r,readonly:o,setField:n},this.meta);return u.items?a(u,t.ctx):null}}]),o}(P.Component);Pu.propTypes={id:La().string,groupId:La().string,config:La().object.isRequired,selectedField:La().any,selectedFieldType:La().string,selectedFieldSrc:La().string,selectedOperator:La().string,readonly:La().bool,setOperator:La().func.isRequired};var Tu=["children"],Vu=function(e){var t=e.children,r=(0,Ui.Z)(e,Tu);return P.createElement("div",r,t)},_u=function(){},Zu=function(){return P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},P.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),P.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))},Iu=function(e){return function(t){var r=t.config.settings.useConfirm,n=r?r.call(t.config.ctx,t.config.ctx):null;return P.createElement(e,(0,fu.Z)({},t,{confirmFn:n}))}};var Du=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(){return(0,F.Z)(this,o),n.apply(this,arguments)}return(0,j.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedFieldSrc,o=e.selectedFieldType,i=e.selectedOperator,l=e.setOperator,a=e.selectedFieldParts,u=e.showOperator,c=e.showOperatorLabel,s=e.selectedFieldWidgetConfig,p=e.readonly,f=e.id,d=e.groupId;return[u&&P.createElement(Vu,{key:"operators-for-"+(a||[]).join("_"),className:"rule--operator"},t.settings.showLabels&&P.createElement("label",{className:"rule--label"},t.settings.operatorLabel),P.createElement(Pu,{key:"operator",config:t,selectedField:r,selectedFieldSrc:n,selectedFieldType:o,selectedOperator:i,setOperator:l,readonly:p,id:f,groupId:d})),c&&P.createElement(Vu,{key:"operators-for-"+(a||[]).join("_"),className:"rule--operator"},P.createElement("div",{className:"rule--operator-wrapper"},t.settings.showLabels?P.createElement("label",{className:"rule--label"}," "):null,P.createElement("div",{className:"rule--operator-text-wrapper"},P.createElement("span",{className:"rule--operator-text"},s.operatorInlineLabel))))]}}]),o}(P.PureComponent);function Ru(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var xu=Ca.RuleUtils.getFieldPathLabels,Au=Ca.ConfigUtils,Nu=Au.getFieldConfig,Mu=Au.getFieldParts,qu=Au.getFieldPathParts,Wu=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),t=n.call(this,e),nu((0,C.Z)(t)),t.onPropsChanged(e),t}return(0,j.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["selectedField","selectedFieldSrc","selectedFieldType","config","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.selectedField,r=e.selectedFieldType,n=e.config,o=e.parentField,i=t,l=n.settings,a=l.maxLabelsLength,u=l.fieldSeparatorDisplay,c=l.fieldPlaceholder,s=(l.fieldSeparator,!!t),p=s?null:Ja(c,a),f=s?Nu(n,i):null,d=f||{},v=qu(i,n),g=qu(i,n,!0),h=this.getFieldLabel(f,i,n),m=xu(i,n),y=m?m.join(u):null;(y==h||o)&&(y=null);var b=d.label2,O=Mu(o,n),S=o?Nu(n,o):null,w=o?S&&S.subfields:n.fields,F=!s&&r;return{placeholder:p,items:this.buildOptions(O,n,w,F,O),parentField:o,selectedKey:i,selectedKeys:v,selectedPath:g,selectedLabel:h,selectedOpts:d,selectedAltLabel:b,selectedFullLabel:y,errorText:F?"Please select field":null}}},{key:"getFieldLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.maxLabelsLength,o=Mu(t,r),i=(null==e?void 0:e.label)||Gr()(o);return Ja(i,n)}},{key:"buildOptions",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(!r)return null;var a=t.settings,u=a.fieldSeparator,c=a.fieldSeparatorDisplay,s=null!=i&&i.length?i.join(u)+u:"",p=function e(t){return Object.keys(t).reduce((function(r,n){var i=t[n];return"!struct"===i.type?r+e(i.subfields):r+(i.type===o?1:0)}),0)};return wu()(r).map((function(a){var u=[].concat((0,Z.Z)(null!=i?i:[]),[a]),f=r[a],d=n.getFieldLabel(f,u,t),v=xu(u,t).join(c);(v==d||null!=e&&e.length)&&(v=null);var g=f.label2,h=f.tooltip,m=f.disabled;if(!f.hideForSelect){if("!struct"==f.type){var y=n.buildOptions(e,t,f.subfields,o,u,d),b=p(f.subfields)>0;return{disabled:m,key:a,path:s+a,label:d,fullLabel:v,altLabel:g,tooltip:h,items:y,matchesType:b}}var O=void 0!==o?f.type===o:void 0;return{disabled:m,key:a,path:s+a,label:d,fullLabel:v,altLabel:g,tooltip:h,grouplabel:l,matchesType:O}}})).filter((function(e){return!!e}))}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setField,o=e.setFieldSrc,i=e.readonly,l=e.id,a=e.groupId,u=t.settings.renderField,c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ru(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ru(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:l,groupId:a,config:t,customProps:r,readonly:i,setField:n,setFieldSrc:o},this.meta);return u(c,t.ctx)}}]),o}(P.Component);function Bu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}Wu.propTypes={id:La().string,groupId:La().string,config:La().object.isRequired,selectedField:La().any,selectedFieldSrc:La().string,selectedFieldType:La().string,parentField:La().string,customProps:La().object,readonly:La().bool,setField:La().func.isRequired,setFieldSrc:La().func};var Gu=Ca.clone,$u=Ca.ConfigUtils,zu=$u.getFieldConfig,Uu=$u.getFuncConfig,Ju=$u.getFieldParts,Hu=$u.getFieldPathParts,Yu=Ca.RuleUtils,Ku=Yu.getFuncPathLabels,Qu=Yu.getWidgetForFieldOp,Xu=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),t=n.call(this,e),nu((0,C.Z)(t)),t.onPropsChanged(e),t}return(0,j.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.items||["config","field","fieldType","fieldSrc","operator","isFuncArg","isLHS"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0;(!this.meta||["config","field","fieldType","fieldSrc","value","isLHS"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e)),r&&(this.items=this.getItems(e,this.meta))}},{key:"getItems",value:function(e,t){var r=e.config,n=e.field,o=e.fieldType,i=e.isLHS,l=e.operator,a=e.parentFuncs,u=e.fieldDefinition,c=e.isFuncArg,s=t.lookingForFieldType,p=r.settings.canUseFuncForField,f=this.filterFuncs(r,r.funcs,n,o,i,l,p,a,c,u);return this.buildOptions(r,f,s)}},{key:"getMeta",value:function(e){var t,r=e.config,n=e.field,o=e.fieldType,i=e.value,l=e.isLHS,a=e.isFuncArg,u=r.settings,c=u.funcPlaceholder,s=u.fieldSeparatorDisplay,p=i,f=!!i,d=zu(r,n),v=null==d||null===(t=d.widgets)||void 0===t?void 0:t.field,g=(v&&v.widgetProps,f?null:c),h=f?Uu(r,p):null,m=h||{},y=Hu(p,r),b=Hu(p,r,!0),O=this.getFuncLabel(h,p,r),S=Ku(p,r),w=S?S.join(s):null;w==O&&(w=null);var F=l&&!a&&!f&&o;return{placeholder:g,selectedKey:p,selectedKeys:y,selectedPath:b,selectedLabel:O,selectedOpts:m,selectedFullLabel:w,errorText:F?"Please select function":null,lookingForFieldType:F}}},{key:"filterFuncs",value:function(e,t,r,n,o,i,l,a,u,c){t=Gu(t);var s,p=e.settings.fieldSeparator,f=zu(e,r),d=f,v=Qu(e,r,i,"value");return v&&e.widgets[v],u?(d=c,s=null==c?void 0:c.type):f?s=f.type:o||(s=n),function t(n,o){for(var u in n){var c=n[u].subfields,v=(o||[]).concat(u),g=v.join(p),h=Uu(e,g);if("!struct"==h.type)0==t(c,v)&&delete n[u];else{var m,y=!s||h.returnType==s;null!==(m=d)&&void 0!==m&&m.funcs&&(y=y&&d.funcs.includes(g)),l&&(y=y&&l(r,f,g,h,i)),!h.allowSelfNesting&&a&&a.map((function(e){var t=(0,V.Z)(e,2),r=t[0];return t[1],r})).includes(g)&&(y=!1),y||delete n[u]}}return wu()(n).length}(t,[]),t}},{key:"buildOptions",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!t)return null;var l=e.settings,a=l.fieldSeparator,u=l.fieldSeparatorDisplay,c=null!=o&&o.length?o.join(a)+a:"",s=function e(t){return Object.keys(t).reduce((function(r,o){var i=t[o];return"!struct"===i.type?r+e(i.subfields):r+(i.type===n?1:0)}),0)};return wu()(t).map((function(l){var a=[].concat((0,Z.Z)(null!=o?o:[]),[l]),p=t[l],f=r.getFuncLabel(p,a,e),d=Ku(a,e).join(u);d==f&&(d=null);var v=p.tooltip;if("!struct"==p.type){var g=r.buildOptions(e,p.subfields,n,a,f),h=s(p.subfields)>0;return{key:l,path:c+l,label:f,fullLabel:d,tooltip:v,items:g,matchesType:h}}var m=void 0!==n?p.returnType===n:void 0;return{key:l,path:c+l,label:f,fullLabel:d,tooltip:v,grouplabel:i,matchesType:m}}))}},{key:"getFuncLabel",value:function(e,t,r){if(!t)return null;r.settings.fieldSeparator;var n=r.settings.maxLabelsLength,o=Ju(t,r),i=(null==e?void 0:e.label)||Gr()(o);return Ja(i,n)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setValue,o=e.readonly,i=e.id,l=e.groupId,a=t.settings.renderFunc,u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({config:t,customProps:r,readonly:o,setField:n,items:this.items,id:i,groupId:l},this.meta);return a(u,t.ctx)}}]),o}(P.Component);Xu.propTypes={id:La().string,groupId:La().string,config:La().object.isRequired,field:La().any,fieldType:La().string,fieldSrc:La().string,operator:La().string,customProps:La().object,value:La().string,setValue:La().func.isRequired,readonly:La().bool,parentFuncs:La().array,fieldDefinition:La().object,isFuncArg:La().bool,isLHS:La().bool};var ec=r(38569),tc=r.n(ec),rc=["factory"];function nc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nc(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ic=Ca.ListUtils.getTitleInListValues,lc=Ca.ConfigUtils._widgetDefKeysToOmit;const ac=function(e){var t=e.delta,r=e.isFuncArg,n=(e.valueSrc,e.value),o=e.valueError,i=e.asyncListValues,l=e.isSpecialRange,a=e.fieldDefinition,u=(e.widget,e.widgetDefinition),c=e.widgetValueLabel,s=e.valueLabels,p=e.textSeparators,f=e.setValueHandler,d=e.config,v=e.field,g=e.fieldSrc,h=e.fieldType,m=e.isLHS,y=e.operator,b=e.readonly,O=e.parentField,S=e.parentFuncs,w=e.id,F=e.groupId,j=u.factory,C=(0,Ui.Z)(u,rc),E=r&&a.valueSources&&1==a.valueSources.length&&"const"==a.valueSources[0],L=a.defaultValue;if(!j)return"?";var k=l?[n.get(0),n.get(1)]:n?n.get(t):void 0,P=o&&(l?[o.get(0),o.get(1)]:o.get(t))||null;l&&void 0===k[0]&&void 0===k[1]&&(k=void 0);var T=(a||{}).fieldSettings,V=Y()(oc(oc(oc({},C),T),{},{config:d,field:v,fieldSrc:g,fieldType:h,isLHS:m,parentField:O,parentFuncs:S,fieldDefinition:a,operator:y,delta:t,isSpecialRange:l,isFuncArg:r,value:k,valueError:P,label:c.label,placeholder:c.placeholder,placeholders:s?s.placeholder:null,textSeparators:p,setValue:f,readonly:b,asyncListValues:i,id:w,groupId:F}),[].concat((0,Z.Z)(lc),["toJS"]));if(E&&L){var _=(null==T?void 0:T.treeValues)||(null==T?void 0:T.listValues);return"boolean"==typeof L?L?V.labelYes||"YES":V.labelNo||"NO":_?Array.isArray(L)?L.map((function(e){return ic(_,e)||e})).join(", "):ic(_,L)||L:""+L}return j(V,d.ctx)};var uc=Ca.ConfigUtils,cc=uc.getFieldConfig,sc=uc.getOperatorConfig,pc=uc.getFieldWidgetConfig,fc=Ca.RuleUtils,dc=fc.getValueSourcesForFieldOp,vc=fc.getWidgetForFieldOp,gc=fc.getValueLabel,hc=Ca.DefaultUtils.createListFromArray,mc={cardinality:1},yc=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),(t=n.call(this,e))._setValue=function(e,r,n,o,i,l){if(e&&Array.isArray(o)){var a=[t.props.value.get(0),t.props.value.get(1)];a[0]!=o[0]&&t.props.setValue(0,o[0],n,i,l),a[1]!=o[1]&&t.props.setValue(1,o[1],n,i,l)}else t.props.setValue(r,o,n,i,l)},t._onChangeValueSrc=function(e,r){t.props.setValueSrc(e,r)},t.renderWidget=function(e,t,r){var n=r.config,o=r.isFuncArg,i=r.leftField,l=r.operator,a=r.value,u=r.valueError,c=r.readonly,s=r.parentField,p=r.parentFuncs,f=r.id,d=r.groupId,v=r.fieldSrc,g=r.fieldType,h=r.isLHS,m=n.settings,y=t.widgets,b=t.iValues,O=t.aField,S=t.valueSources,w=o?b:a,F=o?i:O,j=y[e],C=j.valueSrc,E=j.valueLabel,L=S.length>1&&!c,k=m.showLabels?P.createElement("label",{className:"rule--label"},E.label):null;return P.createElement("div",{key:"widget-"+F+"-"+e,className:vu()("func"==C?"widget--func":"widget--widget",L?"widget--has-valuerscs":"widget--has-no-valuerscs")},"func"==C?null:k,P.createElement(ac,(0,fu.Z)({id:f,groupId:d,valueSrc:C,delta:e,value:w,valueError:u,isFuncArg:o,isLHS:h},N()(t,["isSpecialRange","fieldDefinition","asyncListValues"]),N()(y[e],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:n,field:F,fieldSrc:v,fieldType:g,parentField:s,parentFuncs:p,operator:l,readonly:c})))},t.renderValueSources=function(e,t,r){var n=r.config,o=r.isFuncArg,i=r.leftField,l=r.operator,a=r.readonly,u=n.settings,c=t.valueSources,s=t.widgets,p=t.aField,f=o?i:p,d=s[e],v=d.valueSrc,g=d.setValueSrcHandler,h=u.valueSourcesInfo,m=u.renderValueSources,y=c.map((function(e){return[e,{label:h[e].label}]})),b=function(e){return m(e,n.ctx)},O=u.showLabels?P.createElement("label",{className:"rule--label"}," "):null;return c.length>1&&!a&&P.createElement("div",{key:"valuesrc-"+f+"-"+e,className:"widget--valuesrc"},O,P.createElement(b,{key:"valuesrc-"+e,delta:e,valueSources:y,valueSrc:v,config:n,field:f,operator:l,setValueSrc:g,readonly:a,title:u.valueSourcesPopupTitle}))},t.renderSep=function(e,t,r){var n=r.config,o=t.widgets,i=n.settings,l=o[e].sepText,a=i.showLabels?P.createElement("label",{className:"rule--label"}," "):null;return l&&P.createElement("div",{key:"widget-separators-"+e,className:vu()("widget--sep",0==e&&"widget--sep-first")},a,P.createElement("span",null,l))},t.renderWidgetDelta=function(e){return[t.renderSep(e,t.meta,t.props),t.renderValueSources(e,t.meta,t.props),t.renderWidget(e,t.meta,t.props)]},nu((0,C.Z)(t)),t.onPropsChanged(e),t}return(0,j.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","field","fieldSrc","fieldType","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues","isLHS"].map((function(r){return e[r]!==t[r]||"isFuncArg"==r&&e.isFuncArg&&e.value!==t.value})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=this,r=e.config,n=e.field,o=(e.fieldSrc,e.fieldType),i=e.fieldFunc,l=e.fieldArg,a=e.operator,u=e.valueSrc,c=e.value,s=e.isForRuleGroup,p=e.isCaseValue,f=e.isFuncArg,d=(e.leftField,e.asyncListValues),v=f?{func:i,arg:l}:n,g=!n&&o,h=u,m=c;(f||s||p)&&(h=hc([u]),m=hc([c]));var y=cc(r,v);!y&&g&&(y=r.types[o]);var b,O=vc(r,v,a);!O&&g&&(O=null===(b=r.types[o])||void 0===b?void 0:b.mainWidget);var S=f?mc:sc(r,a,v);if((null==y||null==S)&&!p)return null;var w,F=null==S?void 0:S.isSpecialRange,j=F&&("field"==h.get(0)||"field"==h.get(1)),C=F&&!j,E=C?1:(1,void 0===(w=null==S?void 0:S.cardinality)?1:w);if(0===E)return null;var L=dc(r,v,a,y);v||(L=Object.keys(r.settings.valueSourcesInfo));var k=tc()(0,E).map((function(e){var n,o=h.get(e)||null,i=vc(r,v,a,o),l=pc(r,v,a,i,o);j&&(i=l.singleWidget,l=pc(r,v,a,i,o)),!l&&g&&(i=["func","field"].includes(o)?o:O,l=r.widgets[i]);var u=null===(n=l)||void 0===n?void 0:n.type,c=gc(r,v,a,e,o,C),s=gc(r,v,a,e,null,C),p=null!=S&&S.textSeparators?null==S?void 0:S.textSeparators[e]:null,f=t._onChangeValueSrc.bind(t,e),d=null,m=null;return F&&(d={placeholder:[(d=[gc(r,v,a,0),gc(r,v,a,1)])[0].placeholder,d[1].placeholder],label:[d[0].label,d[1].label]},m=null==S?void 0:S.textSeparators),{valueSrc:o,valueLabel:c,widget:i,sepText:p,setValueSrcHandler:f,widgetDefinition:l,widgetValueLabel:s,valueLabels:d,textSeparators:m,setValueHandler:t._setValue.bind(t,F,e,u)}}));return{defaultWidget:O,fieldDefinition:y,operatorDefinition:S,isSpecialRange:C,cardinality:E,valueSources:L,widgets:k,iValues:m,aField:v,asyncListValues:d}}},{key:"render",value:function(){if(!this.meta)return null;var e=this.meta,t=e.defaultWidget,r=e.cardinality;if(!t)return null;var n=t;return P.createElement(Vu,{className:"rule--widget rule--widget--".concat(n.toUpperCase()),key:"widget-col-"+n},tc()(0,r).map(this.renderWidgetDelta))}}]),o}(P.Component);function bc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,k.Z)(e);if(t){var o=(0,k.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,L.Z)(this,r)}}yc.propTypes={config:La().object.isRequired,value:La().any,valueSrc:La().any,valueError:La().any,field:La().any,fieldSrc:La().string,fieldType:La().string,operator:La().string,readonly:La().bool,asyncListValues:La().array,id:La().string,groupId:La().string,setValue:La().func,setValueSrc:La().func,isFuncArg:La().bool,fieldFunc:La().string,fieldArg:La().string,leftField:La().any,isForRuleGroup:La().bool,parentField:La().string,parentFuncs:La().array,isLHS:La().bool,isCaseValue:La().bool};var Oc=Ca.ConfigUtils.getFuncConfig,Sc=Ca.FuncUtils,wc=Sc.setFunc,Fc=Sc.setArgValue,jc=Sc.setArgValueSrc,Cc=function(e){(0,E.Z)(r,e);var t=bc(r);function r(e){var n;return(0,F.Z)(this,r),(n=t.call(this,e)).setFunc=function(e){n.props.setValue(wc(n.props.value,e,n.props.config))},n.setArgValue=function(e,t,r,o){var i=n.props.config,l=n.meta.funcDefinition.args[e];n.props.setValue(Fc(n.props.value,e,t,l,i),r,o)},n.setArgValueSrc=function(e,t){var r=n.props.config,o=n.meta.funcDefinition.args[e];n.props.setValue(jc(n.props.value,e,t,o,r))},n.renderFuncSelect=function(){var e=n.props,t=e.config,r=e.field,o=e.fieldType,i=e.fieldSrc,l=e.isLHS,a=e.operator,u=e.customProps,c=e.value,s=e.readonly,p=e.parentFuncs,f=e.id,d=e.groupId,v=e.isFuncArg,g=e.fieldDefinition,h={value:c?c.get("func"):null,setValue:n.setFunc,config:t,field:r,fieldType:o,fieldSrc:i,isLHS:l,operator:a,customProps:u,readonly:s,parentFuncs:p,isFuncArg:v,fieldDefinition:g,id:f,groupId:d},m=t.settings,y=m.showLabels,b=m.funcLabel,O=y?P.createElement("label",{className:"rule--label"},b):null;return P.createElement(Vu,{key:"func",className:"rule--func"},O,P.createElement(Xu,h))},n.renderArgLabel=function(e,t){var r=t.valueSources,o=t.type,i=t.showPrefix,l=t.label,a=n.props.config,u=r&&1==r.length&&"const"==r[0];return a.settings.showLabels||"boolean"!=o&&!u||!i?null:P.createElement(Vu,{className:"rule--func--arg-label"},l||e)},n.renderArgLabelSep=function(e,t){var r=t.valueSources,o=t.type,i=t.showPrefix,l=n.props.config,a=r&&1==r.length&&"const"==r[0];return l.settings.showLabels||"boolean"!=o&&!a||!i?null:P.createElement(Vu,{className:"rule--func--arg-label-sep"},":")},n.renderArgVal=function(e,t,r){var o=n.props,i=o.config,l=o.field,a=o.fieldType,u=o.fieldSrc,c=o.isLHS,s=(o.operator,o.value),p=o.readonly,f=o.parentFuncs,d=o.id,v=o.groupId,g=s?s.getIn(["args",t]):null,h=g?g.get("value"):void 0,m=1==r.valueSources.length?r.valueSources[0]:void 0,y={config:i,fieldFunc:e,fieldArg:t,leftField:l,fieldType:a,fieldSrc:u,isLHS:c,operator:null,value:h,valueSrc:g?g.get("valueSrc")||m||"value":m,setValue:n.setArgValue,setValueSrc:n.setArgValueSrc,funcKey:e,argKey:t,argDefinition:r,readonly:p,parentFuncs:f,id:d,groupId:v};return P.createElement(Vu,{className:"rule--func--arg-value"},P.createElement(Ec,y))},n.renderArgSep=function(e,t,r,n){var o=n.renderSeps;return r?P.createElement(Vu,{className:"rule--func--arg-sep"},o?o[r-1]:", "):null},n.renderBracketBefore=function(e){var t=e.renderBrackets;return P.createElement(Vu,{key:"before_args",className:"rule--func--bracket-before"},t?t[0]:"(")},n.renderBracketAfter=function(e){var t=e.renderBrackets;return P.createElement(Vu,{key:"after_args",className:"rule--func--bracket-after"},t?t[1]:")")},n.renderFuncArgs=function(){var e=n.meta,t=e.funcDefinition,r=e.funcKey;if(!r)return null;var o=(t||{}).args;return o?P.createElement(P.Fragment,null,n.renderBracketBefore(t),P.createElement(Vu,{key:"args",className:"rule--func--args"},Object.keys(o).map((function(e,i){return P.createElement(Vu,{key:"arg-".concat(e,"-").concat(i),className:"rule--func--arg"},n.renderArgSep(e,o[e],i,t),n.renderArgLabel(e,o[e]),n.renderArgLabelSep(e,o[e]),n.renderArgVal(r,e,o[e]))}))),n.renderBracketAfter(t)):null},nu((0,C.Z)(n)),n.onPropsChanged(e),n}return(0,j.Z)(r,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","field","operator","value","fieldSrc","fieldType","isLHS"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.config,r=(e.field,e.operator,e.value),n=r?r.get("func"):null;return{funcDefinition:n?Oc(t,n):null,funcKey:n}}},{key:"render",value:function(){return P.createElement(Vu,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),r}(P.Component);Cc.propTypes={id:La().string,groupId:La().string,config:La().object.isRequired,field:La().any,fieldSrc:La().string,fieldType:La().string,operator:La().string,customProps:La().object,value:La().object,setValue:La().func.isRequired,readonly:La().bool,parentFuncs:La().array,fieldDefinition:La().object,isFuncArg:La().bool,isLHS:La().bool};var Ec=function(e){(0,E.Z)(r,e);var t=bc(r);function r(e){var n;return(0,F.Z)(this,r),(n=t.call(this,e)).setValue=function(e,t,r,o,i){var l=n.props;(0,l.setValue)(l.argKey,t,o,i)},n.setValueSrc=function(e,t,r){var o=n.props;(0,o.setValueSrc)(o.argKey,t)},nu((0,C.Z)(n)),n.onPropsChanged(e),n}return(0,j.Z)(r,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["parentFuncs","funcKey","argKey"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.parentFuncs,r=e.funcKey,n=e.argKey;return{parentFuncs:[].concat((0,Z.Z)(t||[]),[[r,n]])}}},{key:"render",value:function(){var e=this.meta.parentFuncs;return P.createElement(yc,(0,fu.Z)({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:e}))}}]),r}(P.Component);Ec.propTypes={funcKey:La().string.isRequired,argKey:La().string.isRequired,setValue:La().func.isRequired,setValueSrc:La().func.isRequired,readonly:La().bool,isLHS:La().bool,parentFuncs:La().array,id:La().string,groupId:La().string};var Lc=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(){var e;(0,F.Z)(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).renderField=function(){var t=e.props,r=t.config,n=t.classname,o=t.selectedField,i=t.selectedFieldSrc,l=t.selectedFieldType,a=t.setField,u=t.parentField,c=t.readonly,s=t.id,p=t.groupId;if(!["func","field"].includes(i))return"?";var f="func"===i?P.createElement(Cc,{isLHS:!0,config:r,value:o,fieldSrc:i,fieldType:l,parentField:u,setValue:a,readonly:c,id:s,groupId:p,key:"field-func-"+s}):P.createElement(Wu,{config:r,selectedField:o,selectedFieldSrc:i,selectedFieldType:l,parentField:u,setField:a,customProps:r.settings.customFieldSelectProps,readonly:c,id:s,groupId:p,key:"field-"+s}),d="func"===i?r.settings.funcLabel:r.settings.fieldLabel,v=r.settings.showLabels&&"func"!==i&&P.createElement("label",{className:"rule--label"},d);return P.createElement("div",{key:i,className:n},v,f)},e.renderFieldSources=function(){var t=e.props,r=t.config,n=t.readonly,o=t.selectedFieldSrc,i=t.setFieldSrc,l=t.id,a=r.settings,u=a.fieldSources,c=a.valueSourcesInfo,s=a.renderValueSources,p=u.map((function(e){return[e,{label:c[e].label}]})),f=function(e){return s(e,r.ctx)},d=a.showLabels?P.createElement("label",{className:"rule--label"}," "):null;return u.length>1&&!n&&P.createElement("div",{key:"fieldsrc",className:"rule--fieldsrc"},d,P.createElement(f,{key:"fieldsrc-"+l,valueSources:p,valueSrc:o,config:r,setValueSrc:i,readonly:n,title:a.fieldSourcesPopupTitle}))},e}return(0,j.Z)(o,[{key:"render",value:function(){var e=this.props,t=(e.classname,e.canSelectFieldSource),r=t&&this.renderFieldSources(),n=this.renderField();return t?P.createElement(Vu,{className:"rule--field-wrapper"},r,n):n}}]),o}(P.PureComponent),kc=["factory"];var Pc=Ca.ConfigUtils.getOperatorConfig,Tc=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(){return(0,F.Z)(this,o),n.apply(this,arguments)}return(0,j.Z)(o,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var e=Pc(this.props.config,this.props.selectedOperator,this.props.selectedField);if(void 0===e.options)return null;var t=e.options,r=t.factory,n=(0,Ui.Z)(t,kc),o=r(Object.assign({},n,{config:this.props.config,field:this.props.selectedField,fieldSrc:this.props.selectedFieldSrc,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly}),this.props.config.ctx),i=this.props.selectedOperator;return P.createElement("div",{className:"rule--operator rule--operator--".concat(i.toUpperCase())},o)}}]),o}(P.PureComponent);function Vc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vc(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Tc.propTypes={config:La().object.isRequired,operatorOptions:La().any.isRequired,selectedField:La().any,selectedFieldSrc:La().string,selectedOperator:La().string.isRequired,readonly:La().bool,setOperatorOption:La().func.isRequired};var Zc=Ca.ConfigUtils,Ic=Zc.getFieldConfig,Dc=Zc.getOperatorConfig,Rc=Zc.getFieldWidgetConfig,xc=Zc.getFieldParts,Ac=Ca.RuleUtils.isEmptyRuleProperties,Nc=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),t=n.call(this,e),nu((0,C.Z)(t)),t.removeSelf=t.removeSelf.bind((0,C.Z)(t)),t.setLock=t.setLock.bind((0,C.Z)(t)),t.onPropsChanged(e),t}return(0,j.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["selectedField","selectedFieldSrc","selectedFieldType","selectedOperator","config","reordableNodesCnt","isLocked"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.selectedField,r=e.selectedFieldType,n=e.selectedOperator,o=e.config,i=e.reordableNodesCnt,l=e.isLocked,a=o.settings.keepInputOnChangeFieldSrc,u=xc(t,o),c=Ic(o,t),s=c&&"!struct"==c.type,p=!!t||a&&r,f=p&&n,d=Dc(o,n,t),v=d&&null!=d.options,g=Rc(o,t,n,null,null)||{},h=g.hideOperator;return{selectedFieldParts:u,selectedFieldWidgetConfig:g,showDragIcon:o.settings.canReorder&&i>1&&!l,showOperator:p&&!h,showOperatorLabel:p&&h&&g.operatorInlineLabel,showWidget:f&&!s,showOperatorOptions:f&&v}}},{key:"setLock",value:function(e){this.props.setLock(e)}},{key:"removeSelf",value:function(){var e=this,t=this.props,r=t.confirmFn,n=t.config,o=n.settings,i=o.renderConfirm,l=o.removeRuleConfirmOptions,a=function(){e.props.removeSelf()};l&&!this.isEmptyCurrentRule()?i.call(n.ctx,_c(_c({},l),{},{onOk:a,onCancel:null,confirmFn:r}),n.ctx):a()}},{key:"_buildWidgetProps",value:function(e){return{field:e.selectedField,fieldSrc:e.selectedFieldSrc,fieldType:e.selectedFieldType,operator:e.selectedOperator,operatorOptions:e.operatorOptions,value:e.value,valueType:e.valueType,valueSrc:e.valueSrc,asyncListValues:e.asyncListValues,valueError:e.valueError,parentField:e.parentField}}},{key:"isEmptyCurrentRule",value:function(){var e=this.props.config,t=this._buildWidgetProps(this.props);return Ac(t,e)}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.parentField,o=e.groupId,i=e.id,l=e.selectedFieldSrc,a=e.selectedField,u=e.selectedFieldType,c=e.setField,s=e.setFieldSrc,p=t.settings.immutableFieldsMode;return P.createElement(Lc,{key:"field",classname:vu()("func"==l?"rule--field--func":"rule--field"),config:t,canSelectFieldSource:!n,selectedField:a,selectedFieldSrc:l,selectedFieldType:u,setField:p?_u:c,setFieldSrc:p?_u:s,parentField:n,readonly:p||r,id:i,groupId:o})}},{key:"renderOperator",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=this.meta,o=n.selectedFieldParts,i=n.selectedFieldWidgetConfig,l=n.showOperator,a=n.showOperatorLabel,u=t.settings.immutableOpsMode;return P.createElement(Du,{key:"operator",config:t,selectedField:this.props.selectedField,selectedFieldSrc:this.props.selectedFieldSrc,selectedFieldType:this.props.selectedFieldType,selectedOperator:this.props.selectedOperator,setOperator:u?_u:this.props.setOperator,selectedFieldParts:o,showOperator:l,showOperatorLabel:a,selectedFieldWidgetConfig:i,readonly:u||r,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=this.meta.showWidget,o=t.settings.immutableValuesMode;if(!n)return null;var i=P.createElement(yc,(0,fu.Z)({key:"values"},this._buildWidgetProps(this.props),{config:t,setValue:o?_u:this.props.setValue,setValueSrc:o?_u:this.props.setValueSrc,readonly:o||r,id:this.props.id,groupId:this.props.groupId}));return P.createElement(Vu,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},i)}},{key:"renderOperatorOptions",value:function(){var e=this.props.config,t=this.meta.showOperatorOptions,r=e.settings,n=r.immutableOpsMode,o=r.immutableValuesMode;if(!t)return null;var i=P.createElement(Tc,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:n?_u:this.props.setOperatorOption,config:e,readonly:o});return P.createElement(Vu,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},i)}},{key:"renderBeforeWidget",value:function(){var e=this.props.config,t=e.settings.renderBeforeWidget;return t&&P.createElement(Vu,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},"function"==typeof t?t(this.props,e.ctx):t)}},{key:"renderAfterWidget",value:function(){var e=this.props.config,t=e.settings.renderAfterWidget;return t&&P.createElement(Vu,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},"function"==typeof t?t(this.props,e.ctx):t)}},{key:"renderError",value:function(){var e=this.props,t=e.config,r=e.valueError,n=t.settings,o=n.renderRuleError,i=n.showErrorMessage,l=r&&r.toArray().filter((function(e){return!!e})).shift()||null;return i&&l&&P.createElement("div",{className:"rule--error"},o?o({error:l},t.ctx):l)}},{key:"renderDrag",value:function(){var e=this.props.handleDraggerMouseDown,t=this.props.config,r=this.meta.showDragIcon,n=t.settings.renderIcon,o=function(e){return null==n?void 0:n(e,t.ctx)},i=P.createElement(o,{type:"drag"});return r&&P.createElement("div",{key:"rule-drag-icon",onMouseDown:e,className:"qb-drag-handler rule--drag-handler"},i)}},{key:"renderDel",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=t.settings,o=n.deleteLabel,i=n.immutableGroupsMode,l=n.renderButton,a=n.renderIcon,u=n.canDeleteLocked,c=function(e){return l(e,t.ctx)};return!i&&(!r||r&&u)&&P.createElement(c,{type:"delRule",onClick:this.removeSelf,label:o,config:t,renderIcon:function(e){return a(e,t.ctx)}})}},{key:"renderLock",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.isTrueLocked,o=e.id,i=t.settings,l=i.lockLabel,a=i.lockedLabel,u=i.showLock,c=i.renderSwitch,s=function(e){return c(e,t.ctx)};return u&&!(r&&!n)&&P.createElement(s,{type:"lock",id:o,value:r,setValue:this.setLock,label:l,checkedLabel:a,hideLabel:!0,config:t})}},{key:"render",value:function(){var e=this.meta,t=e.showOperatorOptions,r=e.selectedFieldWidgetConfig,n=this.props,o=n.valueSrc,i=n.value,l=n.config,a="value"==o.first()&&!t&&1==i.size&&r.fullWidth,u=l.settings.renderButtonGroup,c=function(e){return u(e,l.ctx)},s=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],p=P.createElement("div",{key:"rule-body",className:vu()("rule--body",a&&"can--shrink--value")},s),f=this.renderError(),d=this.renderDrag(),v=this.renderLock(),g=this.renderDel();return P.createElement(P.Fragment,null,d,P.createElement("div",{className:"rule--body--wrapper"},p,f),P.createElement("div",{className:"rule--header"},P.createElement(c,{config:l},v,g)))}}]),o}(P.Component);Nc.propTypes={id:La().string.isRequired,groupId:La().string,selectedField:La().any,selectedFieldSrc:La().string,selectedFieldType:La().string,selectedOperator:La().string,operatorOptions:La().object,config:La().object.isRequired,value:La().any,valueSrc:La().any,valueType:La().any,asyncListValues:La().array,isDraggingMe:La().bool,isDraggingTempo:La().bool,parentField:La().string,valueError:La().any,isLocked:La().bool,isTrueLocked:La().bool,handleDraggerMouseDown:La().func,setField:La().func,setFieldSrc:La().func,setOperator:La().func,setOperatorOption:La().func,setLock:La().func,removeSelf:La().func,setValue:La().func,setValueSrc:La().func,reordableNodesCnt:La().number,totalRulesCnt:La().number,parentReordableNodesCnt:La().number};const Mc=function(e){var t=(0,Va.$j)((function(e){return{dragging:e.dragging}}),null,null,{context:Pa})(function(e){var t;return t=function(t){(0,E.Z)(i,t);var r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,k.Z)(r);if(n){var o=(0,k.Z)(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return(0,L.Z)(this,e)});function i(e){var t;return(0,F.Z)(this,i),(t=o.call(this,e)).dummyFn=function(){},t.removeSelf=function(){t.props.actions.removeRule(t.props.path)},t.setLock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setLock(t.props.path,e)},t.setField=function(e,r,n){t.props.actions.setField(t.props.path,e,r,n)},t.setFieldSrc=function(e){t.props.actions.setFieldSrc(t.props.path,e)},t.setOperator=function(e){t.props.actions.setOperator(t.props.path,e)},t.setOperatorOption=function(e,r){t.props.actions.setOperatorOption(t.props.path,e,r)},t.setValue=function(e,r,n,o,i){t.props.actions.setValue(t.props.path,e,r,n,o,i)},t.setValueSrc=function(e,r){t.props.actions.setValueSrc(t.props.path,e,r)},t.pureShouldComponentUpdate=ru((0,C.Z)(t)),t.dummyFn.isDummyFn=!0,t}return(0,j.Z)(i,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=this.pureShouldComponentUpdate(e,t);if(o&&n==t&&r!=e){var i=(e.dragging.id||r.dragging.id)==e.id,l=[];for(var a in e){var u=e[a]!=r[a];"dragging"!=a||i||(u=!1),u&&l.push(a)}l.length||(o=!1)}return o}},{key:"render",value:function(){var t=this.props.dragging.id==this.props.id,r=gu(this.props.config,this.props.field),n=this.props.fieldType||(null==r?void 0:r.type)||null,o=this.props.config.settings.showErrorMessage,i=(r&&r.type,!t&&this.props.isDraggingTempo),l=this.props.valueError,a=null!=(l&&l.toArray().filter((function(e){return!!e})).shift()||null)&&o;return P.createElement("div",{className:vu()("group-or-rule-container","rule-container",a?"rule-with-error":null),"data-id":this.props.id},[t?P.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setFieldSrc:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:n,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueType:this.props.valueType||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,P.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:t,isDraggingTempo:i,onDragStart:this.props.onDragStart,setLock:i?this.dummyFn:this.setLock,removeSelf:i?this.dummyFn:this.removeSelf,setField:i?this.dummyFn:this.setField,setFieldSrc:i?this.dummyFn:this.setFieldSrc,setOperator:i?this.dummyFn:this.setOperator,setOperatorOption:i?this.dummyFn:this.setOperatorOption,setValue:i?this.dummyFn:this.setValue,setValueSrc:i?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:n,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueType:this.props.valueType||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),i}(P.Component),t.propTypes={id:La().string.isRequired,groupId:La().string,config:La().object.isRequired,path:La().any.isRequired,operator:La().string,field:La().any,fieldSrc:La().string,fieldType:La().string,actions:La().object.isRequired,onDragStart:La().func,value:La().any,valueSrc:La().any,asyncListValues:La().array,valueError:La().any,operatorOptions:La().object,reordableNodesCnt:La().number,parentField:La().string,isLocked:La().bool,isTrueLocked:La().bool,dragging:La().object,isDraggingTempo:La().bool},t}(e));return t.displayName="ConnectedRuleContainer",t}(Ou("rule")(Iu(Nc)));var qc=r(63869),Wc=r.n(qc);var Bc=Ca.DefaultUtils.defaultGroupConjunction;const Gc=function(e,t){var r=(0,Va.$j)((function(e){return{dragging:e.dragging}}),null,null,{context:Pa})(function(e,t){var r;return r=function(r){(0,E.Z)(l,r);var n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,k.Z)(n);if(o){var r=(0,k.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,L.Z)(this,e)});function l(e){var r;return(0,F.Z)(this,l),(r=i.call(this,e))._selectedConjunction=function(e){return(e=e||r.props).conjunction||Bc(e.config,e.field)},r.setConjunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.props.actions.setConjunction(r.props.path,e)},r.setNot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.props.actions.setNot(r.props.path,e)},r.setLock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.props.actions.setLock(r.props.path,e)},r.dummyFn=function(){},r.removeSelf=function(){r.props.actions.removeGroup(r.props.path)},r.addGroup=function(){r.props.actions.addGroup(r.props.path)},r.addCaseGroup=function(){r.props.actions.addCaseGroup(r.props.path)},r.addDefaultCaseGroup=function(){r.props.actions.addDefaultCaseGroup(r.props.path)},r.addRule=function(){var e="rule_group"==t?r.props.field:null;r.props.actions.addRule(r.props.path,void 0,void 0,void 0,e)},r.setField=function(e,t,n){r.props.actions.setField(r.props.path,e,t,n)},r.setOperator=function(e){r.props.actions.setOperator(r.props.path,e)},r.setValue=function(e,t,n){r.props.actions.setValue(r.props.path,e,t,n)},r.pureShouldComponentUpdate=ru((0,C.Z)(r)),nu((0,C.Z)(r)),r.selectedConjunction=r._selectedConjunction(e),r.conjunctionOptions=r._getConjunctionOptions(e),r.dummyFn.isDummyFn=!0,r}return(0,j.Z)(l,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=this.pureShouldComponentUpdate(e,t);if(o&&n==t&&r!=e){var i=(e.dragging.id||r.dragging.id)==e.id,l=[];for(var a in e){var u=e[a]!=r[a];"dragging"!=a||i||(u=!1),u&&l.push(a)}l.length||(o=!1)}return o}},{key:"onPropsChanged",value:function(e){var t=e.config,r=(e.id,e.conjunction),n=this.props.config,o=this.props.conjunction;n==t&&o==r||(this.selectedConjunction=this._selectedConjunction(e),this.conjunctionOptions=this._getConjunctionOptions(e))}},{key:"_getConjunctionOptions",value:function(e){var t=this;return Yl()(e.config.conjunctions,(function(r,n){return{id:"conjunction-".concat(e.id,"-").concat(n),name:"conjunction[".concat(e.id,"]"),key:n,label:r.label,checked:n===t._selectedConjunction(e)}}))}},{key:"render",value:function(){var t=this.props.dragging.id==this.props.id,r=this.props.path.size,n=this.props.config.settings.maxNesting,o=!t&&this.props.isDraggingTempo,i=this.props.fieldType||null,l=void 0===n||r<n,a=1==r;return P.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[t?P.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:a,allowFurtherNesting:l,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:i,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,P.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:t,isDraggingTempo:o,onDragStart:this.props.onDragStart,isRoot:a,allowFurtherNesting:l,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:o?this.dummyFn:this.setConjunction,setNot:o?this.dummyFn:this.setNot,setLock:o?this.dummyFn:this.setLock,removeSelf:o?this.dummyFn:this.removeSelf,addGroup:o?this.dummyFn:this.addGroup,addCaseGroup:o?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:o?this.dummyFn:this.addDefaultCaseGroup,addRule:o?this.dummyFn:this.addRule,setField:o?this.dummyFn:this.setField,setOperator:o?this.dummyFn:this.setOperator,setValue:o?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,selectedFieldSrc:this.props.fieldSrc||"field",selectedFieldType:i,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),l}(P.Component),r.propTypes={config:La().object.isRequired,actions:La().object.isRequired,path:La().any.isRequired,id:La().string.isRequired,groupId:La().string,not:La().bool,conjunction:La().string,children1:La().any,onDragStart:La().func,reordableNodesCnt:La().number,field:La().any,fieldSrc:La().string,fieldType:La().string,parentField:La().string,isLocked:La().bool,isTrueLocked:La().bool,dragging:La().object,isDraggingTempo:La().bool},r}(e,t));return r.displayName="ConnectedGroupContainer",r};var $c={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},zc=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(){return(0,F.Z)(this,o),n.apply(this,arguments)}return(0,j.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.removeSelf,i=e.setLock,l=e.isLocked,a=e.isTrueLocked,u=e.id,c=e.canAddGroup,s=e.canAddRule,p=e.canDeleteGroup,f=t.settings,d=f.immutableGroupsMode,v=f.addRuleLabel,g=f.addGroupLabel,h=f.delGroupLabel,m=f.groupActionsPosition,y=f.renderButton,b=f.renderIcon,O=f.renderSwitch,S=f.renderButtonGroup,w=f.lockLabel,F=f.lockedLabel,j=f.showLock,C=f.canDeleteLocked,E=function(e){return b(e,t.ctx)},L=function(e){return y(e,t.ctx)},k=function(e){return O(e,t.ctx)},T=function(e){return S(e,t.ctx)},V=$c[m||"topRight"],_=j&&!(l&&!a)&&P.createElement(k,{type:"lock",id:u,value:l,setValue:i,label:w,checkedLabel:F,config:t}),Z=!d&&s&&!l&&P.createElement(L,{type:"addRule",onClick:r,label:v,readonly:l,config:t,renderIcon:E}),I=!d&&c&&!l&&P.createElement(L,{type:"addGroup",onClick:n,label:g,readonly:l,config:t,renderIcon:E}),D=!d&&p&&(!l||l&&C)&&P.createElement(L,{type:"delGroup",onClick:o,label:h,config:t,renderIcon:E});return P.createElement("div",{className:"group--actions ".concat(V)},P.createElement(T,{config:t},_,Z,I,D))}}]),o}(P.PureComponent);function Uc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uc(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Hc=Ca.RuleUtils.isEmptyGroupChildren,Yc=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),(t=n.call(this,e)).childrenClassName=function(){return""},t.renderBeforeActions=function(){var e=t.props.config.settings.renderBeforeActions;return null==e?null:"function"==typeof e?e(t.props,t.props.config.ctx):e},t.renderAfterActions=function(){var e=t.props.config.settings.renderAfterActions;return null==e?null:"function"==typeof e?e(t.props,t.props.config.ctx):e},t.removeSelf=t.removeSelf.bind((0,C.Z)(t)),t.setLock=t.setLock.bind((0,C.Z)(t)),t.renderItem=t.renderItem.bind((0,C.Z)(t)),t}return(0,j.Z)(o,[{key:"isGroupTopPosition",value:function(){return Wc()(this.props.config.settings.groupActionsPosition||"topRight","top")}},{key:"setLock",value:function(e){this.props.setLock(e)}},{key:"removeSelf",value:function(){var e=this,t=this.props,r=t.confirmFn,n=t.config,o=n.settings,i=o.renderConfirm,l=o.removeGroupConfirmOptions,a=function(){e.props.removeSelf()};l&&!this.isEmptyCurrentGroup()?i.call(n.ctx,Jc(Jc({},l),{},{onOk:a,onCancel:null,confirmFn:r}),n.ctx):a()}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props,t=e.children1,r=e.config;return Hc(t,r)}},{key:"render",value:function(){return P.createElement(P.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){return this.props.config.settings.showNot}},{key:"showConjs",value:function(){var e=this.props,t=e.conjunctionOptions;return e.children1,e.config,Object.keys(t).length>1||this.showNot()}},{key:"isNoChildren",value:function(){var e=this.props.children1;return!e||0==e.size}},{key:"isOneChild",value:function(){var e=this.props.children1;return!e||e.size<2}},{key:"renderChildrenWrapper",value:function(){return this.props.children1&&P.createElement("div",{key:"group-children",className:vu()("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var e=this.isGroupTopPosition();return P.createElement("div",{key:"group-header",className:vu()("group--header",this.isOneChild()?"one--child":"",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"")},this.renderHeader(),e&&this.renderBeforeActions(),e&&this.renderActions(),e&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){return!this.isGroupTopPosition()&&P.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.isLocked,i=e.isTrueLocked,l=e.id;return P.createElement(zc,{config:t,addRule:r,addGroup:n,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:i,id:l})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var e=this.props.config.settings.maxNumberOfRules,t=this.props.totalRulesCnt;return!e||t<e}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var e=this.props.children1;return e?e.map(this.renderItem).toList():null}},{key:"renderItem",value:function(e){var t=this.props,r=t.config,n=t.actions,o=t.onDragStart,i=t.isLocked,l="group"==e.get("type")&&null!=e.getIn(["properties","field"])?"rule_group":e.get("type");return P.createElement(Vs,(0,fu.Z)({},this.extraPropsForItem(e),{key:e.get("id"),id:e.get("id"),groupId:t.id,path:e.get("path"),type:l,properties:e.get("properties"),config:r,actions:n,children1:e.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(e),totalRulesCnt:this.totalRulesCntForItem(e),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:o,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:i}))}},{key:"extraPropsForItem",value:function(e){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(e){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var e=this.props,t=e.config,r=e.isRoot,n=e.isLocked,o=this.reordableNodesCnt();return t.settings.canReorder&&!r&&o>1&&!n}},{key:"renderDrag",value:function(){var e=this.props.handleDraggerMouseDown,t=this.props.config,r=t.settings.renderIcon,n=function(e){return null==r?void 0:r(e,t.ctx)},o=P.createElement(n,{type:"drag"});return this.showDragIcon()&&P.createElement("div",{key:"group-drag-icon",onMouseDown:e,className:"qb-drag-handler group--drag-handler"},o)}},{key:"conjunctionOptions",value:function(){return this.props.conjunctionOptions}},{key:"renderConjs",value:function(){var e=this.props,t=e.config,r=e.children1,n=e.id,o=e.selectedConjunction,i=e.setConjunction,l=e.not,a=e.setNot,u=e.isLocked,c=t.settings,s=c.immutableGroupsMode,p=c.renderConjs,f=(c.showNot,c.notLabel),d=this.conjunctionOptions();return this.showConjs()&&r&&r.size?p({disabled:this.isOneChild(),readonly:s||u,selectedConjunction:o,setConjunction:s?_u:i,conjunctionOptions:d,config:t,not:l||!1,id:n,setNot:s?_u:a,notLabel:f,showNot:this.showNot(),isLocked:u},t.ctx):null}},{key:"renderHeader",value:function(){return P.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),o}(P.Component);Yc.propTypes={reordableNodesCnt:La().number,conjunctionOptions:La().object.isRequired,allowFurtherNesting:La().bool.isRequired,isRoot:La().bool.isRequired,not:La().bool,selectedConjunction:La().string,config:La().object.isRequired,id:La().string.isRequired,groupId:La().string,path:La().any,children1:La().any,isDraggingMe:La().bool,isDraggingTempo:La().bool,isLocked:La().bool,isTrueLocked:La().bool,handleDraggerMouseDown:La().func,onDragStart:La().func,addRule:La().func.isRequired,addGroup:La().func.isRequired,removeSelf:La().func.isRequired,setConjunction:La().func.isRequired,setNot:La().func.isRequired,setLock:La().func.isRequired,actions:La().object.isRequired};const Kc=Gc(Ou("group")(Iu(Yc)),"group");var Qc=r(69458);var Xc=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(){return(0,F.Z)(this,o),n.apply(this,arguments)}return(0,j.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.canAddRule,o=e.canDeleteGroup,i=e.removeSelf,l=e.setLock,a=e.isLocked,u=e.isTrueLocked,c=e.id,s=t.settings,p=s.immutableGroupsMode,f=s.addRuleLabel,d=s.delGroupLabel,v=s.renderButton,g=s.renderIcon,h=s.renderSwitch,m=s.renderButtonGroup,y=s.lockLabel,b=s.lockedLabel,O=s.showLock,S=s.canDeleteLocked,w=function(e){return g(e,t.ctx)},F=function(e){return v(e,t.ctx)},j=function(e){return h(e,t.ctx)},C=function(e){return m(e,t.ctx)},E=O&&!(a&&!u)&&P.createElement(j,{type:"lock",id:c,value:a,setValue:l,label:y,checkedLabel:b,hideLabel:!0,config:t}),L=!p&&n&&!a&&P.createElement(F,{type:"addRuleGroup",onClick:r,label:f,readonly:a,config:t,renderIcon:w}),k=!p&&o&&(!a||a&&S)&&P.createElement(F,{type:"delRuleGroup",onClick:i,label:d,config:t,renderIcon:w});return P.createElement("div",{className:"group--actions"},P.createElement(C,{config:t},E,L,k))}}]),o}(P.PureComponent);function es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ts(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?es(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):es(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rs=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"rule_group--children"},t.renderHeaderWrapper=function(){return null},t.renderFooterWrapper=function(){return null},t.renderConjs=function(){return null},t.canAddGroup=function(){return!1},t.canAddRule=function(){return!0},t.canDeleteGroup=function(){return!1},nu((0,C.Z)(t)),t.onPropsChanged(e),t}return(0,j.Z)(o,[{key:"onPropsChanged",value:function(e){}},{key:"reordableNodesCntForItem",value:function(e){if(this.props.isLocked)return 0;var t=this.props.children1;return(null==t?void 0:t.size)||0}},{key:"renderChildrenWrapper",value:function(){return P.createElement(P.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),(0,Qc.Z)((0,k.Z)(o.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedFieldSrc,o=e.selectedFieldType,i=e.setField,l=e.setFieldSrc,a=e.parentField,u=e.id,c=e.groupId,s=e.isLocked,p=t.settings.immutableFieldsMode;return P.createElement(Lc,{key:"field",classname:"group--field",config:t,canSelectFieldSource:!1,selectedField:r,selectedFieldSrc:n,selectedFieldType:o,setField:i,setFieldSrc:l,parentField:a,readonly:p||s,id:u,groupId:c})}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.isLocked,o=e.isTrueLocked,i=e.id;return P.createElement(Xc,{config:t,addRule:r,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:n,isTrueLocked:o,id:i})}},{key:"extraPropsForItem",value:function(e){return{parentField:this.props.selectedField}}}]),o}(Yc);rs.propTypes=ts(ts({},Yc.propTypes),{},{selectedField:La().any,selectedFieldSrc:La().string,parentField:La().string,setField:La().func,setFieldSrc:La().func});const ns=Gc(Ou("group rule_group")(Iu(rs)),"rule_group");var os=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(){return(0,F.Z)(this,o),n.apply(this,arguments)}return(0,j.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.canAddRule,o=e.canDeleteGroup,i=e.removeSelf,l=e.setLock,a=e.isLocked,u=e.isTrueLocked,c=e.id,s=t.settings,p=s.immutableGroupsMode,f=s.addSubRuleLabel,d=s.delGroupLabel,v=s.renderButton,g=s.renderIcon,h=s.renderSwitch,m=s.renderButtonGroup,y=s.lockLabel,b=s.lockedLabel,O=s.showLock,S=s.canDeleteLocked,w=function(e){return g(e,t.ctx)},F=function(e){return v(e,t.ctx)},j=function(e){return h(e,t.ctx)},C=function(e){return m(e,t.ctx)},E=O&&!(a&&!u)&&P.createElement(j,{type:"lock",id:c,value:a,setValue:l,label:y,checkedLabel:b,config:t}),L=!p&&n&&!a&&P.createElement(F,{type:"addRuleGroupExt",onClick:r,label:f,readonly:a,config:t,renderIcon:w}),k=!p&&o&&(!a||a&&S)&&P.createElement(F,{type:"delRuleGroup",onClick:i,label:d,config:t,renderIcon:w});return P.createElement("div",{className:"group--actions group--actions--tr"},P.createElement(C,{config:t},E,L,k))}}]),o}(P.PureComponent);function is(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ls(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?is(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):is(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function as(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var us=Ca.ConfigUtils,cs=us.getFieldConfig,ss=us.getFieldWidgetConfig,ps=Ca.RuleUtils.isEmptyRuleGroupExtPropertiesAndChildren,fs=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"rule_group_ext--children"},t.renderFooterWrapper=function(){return null},t.canAddGroup=function(){return!1},t.canAddRule=function(){return!0},t.canDeleteGroup=function(){return!0},nu((0,C.Z)(t)),t.onPropsChanged(e),t}return(0,j.Z)(o,[{key:"onPropsChanged",value:function(e){}},{key:"renderHeaderWrapper",value:function(){return P.createElement("div",{key:"group-header",className:vu()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag",!this.showConjs()||this.isOneChild()&&!this.showNot()?"hide--conjs":"with--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return P.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return P.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=(e.selectedOperator,cs(t,r)||{});return null!=n.showNot?n.showNot:t.settings.showNot}},{key:"conjunctionOptions",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=(e.selectedOperator,cs(t,r)||{}),i=(0,Qc.Z)((0,k.Z)(o.prototype),"conjunctionOptions",this).call(this);if(n.conjunctions){var l,a={},u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return as(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?as(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}(n.conjunctions);try{for(u.s();!(l=u.n()).done;){var c=l.value;a[c]=i[c]}}catch(e){u.e(e)}finally{u.f()}i=a}return i}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedFieldSrc,o=e.selectedFieldType,i=e.setField,l=e.setFieldSrc,a=e.parentField,u=e.id,c=e.groupId,s=e.isLocked,p=t.settings.immutableFieldsMode;return P.createElement(Lc,{key:"field",classname:"rule--field",config:t,canSelectFieldSource:!1,selectedField:r,selectedFieldSrc:n,selectedFieldType:o,setField:i,setFieldSrc:l,parentField:a,readonly:p||s,id:u,groupId:c})}},{key:"renderOperator",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedFieldSrc,o=e.selectedOperator,i=(e.setField,e.setOperator),l=e.isLocked,a=t.settings.immutableFieldsMode,u=ss(t,r,o)||{},c=u.hideOperator,s=r&&c&&u.operatorInlineLabel,p=r&&!c;return P.createElement(Du,{key:"operator",classname:"group--operator",config:t,selectedField:r,selectedFieldSrc:n,selectedOperator:o,setOperator:i,selectedFieldPartsLabels:["group"],showOperator:p,showOperatorLabel:s,selectedFieldWidgetConfig:u,readonly:a||l,id:this.props.id,groupId:this.props.groupId})}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props,t=e.children1,r=e.config,n=this._buildWidgetProps(this.props);return ps(n,t,r)}},{key:"_buildWidgetProps",value:function(e){var t=e.selectedField,r=e.selectedFieldSrc,n=e.selectedFieldType,o=e.selectedOperator,i=e.operatorOptions,l=e.value,a=e.valueType;return e.valueSrc,e.asyncListValues,e.valueError,{field:t,fieldSrc:r,fieldType:n,operator:o,operatorOptions:i,value:l,valueType:a,valueSrc:["value"],valueError:null,parentField:e.parentField}}},{key:"renderWidget",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedOperator,o=e.isLocked,i=t.settings.immutableValuesMode;if(!r||!n)return null;var l=P.createElement(yc,(0,fu.Z)({key:"values",isForRuleGroup:!0},this._buildWidgetProps(this.props),{config:t,setValue:i?_u:this.props.setValue,setValueSrc:_u,readonly:i||o,id:this.props.id,groupId:this.props.groupId}));return P.createElement(Vu,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},l)}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.isLocked,o=e.isTrueLocked,i=e.id;return P.createElement(os,{config:t,addRule:r,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:n,isTrueLocked:o,id:i})}},{key:"reordableNodesCntForItem",value:function(e){if(this.props.isLocked)return 0;var t=this.props.children1;return(null==t?void 0:t.size)||0}},{key:"extraPropsForItem",value:function(e){return{parentField:this.props.selectedField}}}]),o}(Yc);fs.propTypes=ls(ls({},Yc.propTypes),{},{selectedField:La().any,selectedFieldSrc:La().string,selectedOperator:La().string,value:La().any,parentField:La().string,setField:La().func,setFieldSrc:La().func,setOperator:La().func,setValue:La().func});const ds=Gc(Ou("group rule_group_ext")(Iu(fs)),"rule_group");var vs={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},gs=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(){return(0,F.Z)(this,o),n.apply(this,arguments)}return(0,j.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addCaseGroup,n=e.addDefaultCaseGroup,o=e.setLock,i=e.isLocked,l=e.isTrueLocked,a=e.id,u=e.canAddGroup,c=e.canAddDefault,s=t.settings,p=s.immutableGroupsMode,f=s.addCaseLabel,d=s.addDefaultCaseLabel,v=s.groupActionsPosition,g=s.renderButton,h=s.renderIcon,m=s.renderSwitch,y=s.renderButtonGroup,b=s.lockLabel,O=s.lockedLabel,S=s.showLock,w=function(e){return h(e,t.ctx)},F=function(e){return g(e,t.ctx)},j=function(e){return m(e,t.ctx)},C=function(e){return y(e,t.ctx)},E=vs[v||"topRight"],L=S&&!(i&&!l)&&P.createElement(j,{type:"lock",id:a,value:i,setValue:o,label:b,checkedLabel:O,config:t}),k=!p&&u&&!i&&P.createElement(F,{type:"addCaseGroup",onClick:r,label:f,readonly:i,config:t,renderIcon:w}),T=!p&&c&&!i&&P.createElement(F,{type:"addDefaultCaseGroup",onClick:n,label:d,readonly:i,config:t,renderIcon:w});return P.createElement("div",{className:"group--actions ".concat(E)},P.createElement(C,{config:t},L,k,T))}}]),o}(P.PureComponent);function hs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ms=Ca.TreeUtils,ys=ms.getTotalReordableNodesCountInTree,bs=ms.getTotalRulesCountInTree,Os=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"switch_group--children"},t.renderFooterWrapper=function(){return null},t.hasDefaultCase=function(){var e;return(null===(e=t.props.children1)||void 0===e?void 0:e.size)&&t.props.children1.filter((function(e){return null==e.get("children1")})).size>0},nu((0,C.Z)(t)),t.onPropsChanged(e),t}return(0,j.Z)(o,[{key:"onPropsChanged",value:function(e){}},{key:"canAddGroup",value:function(){var e,t=this.props.config.settings.maxNumberOfCases,r=(null===(e=this.props.children1)||void 0===e?void 0:e.size)||0;return!t||r<t}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var e,t=(null===(e=this.props.children1)||void 0===e?void 0:e.size)||0;return this.hasDefaultCase()&&t--,t}},{key:"totalRulesCntForItem",value:function(e){return bs(e)}},{key:"reordableNodesCntForItem",value:function(e){var t;if(this.props.isLocked)return 0;var r=this.props.config.settings,n=r.canLeaveEmptyCase,o=r.canRegroupCases,i=(null===(t=this.props.children1)||void 0===t?void 0:t.size)||0;this.hasDefaultCase()&&i--;var l=ys(e);return 1==l&&o&&n&&i>1&&(l=111),l}},{key:"renderHeaderWrapper",value:function(){return P.createElement("div",{key:"group-header",className:vu()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return P.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){return this.props.config.settings.renderSwitchPrefix||null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addCaseGroup,n=e.addDefaultCaseGroup,o=e.isLocked,i=e.isTrueLocked,l=e.id;return P.createElement(gs,{config:t,addCaseGroup:r,addDefaultCaseGroup:n,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:o,isTrueLocked:i,id:l})}}]),o}(Yc);Os.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Yc.propTypes);const Ss=Gc(Ou("group switch_group")(Iu(Os)),"switch_group");function ws(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ws(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var js=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"case_group--children"},t.renderFooterWrapper=function(){return null},nu((0,C.Z)(t)),t.onPropsChanged(e),t}return(0,j.Z)(o,[{key:"onPropsChanged",value:function(e){}},{key:"isDefaultCase",value:function(){return null==this.props.children1}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(e){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return!this.isDefaultCase()&&(0,Qc.Z)((0,k.Z)(o.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return P.createElement("div",{key:"group-header",className:vu()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag",!this.showConjs()||this.isOneChild()&&!this.showNot()?"hide--conjs":"with--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:P.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){return this.isDefaultCase()?this.props.config.settings.defaultCaseLabel||"":P.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:(0,Qc.Z)((0,k.Z)(o.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return!this.isDefaultCase()&&(0,Qc.Z)((0,k.Z)(o.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return!this.isDefaultCase()&&(0,Qc.Z)((0,k.Z)(o.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.value,o=e.setValue,i=e.id,l=t.settings.immutableValuesMode,a=P.createElement(yc,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:n,valueSrc:"value",valueError:null,config:t,setValue:l?_u:o,setValueSrc:_u,readonly:l||r,id:i,groupId:null});return P.createElement(Vu,{className:"case_group--value"},a)}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addGroup,n=e.addRule,o=e.isLocked,i=e.isTrueLocked,l=e.id;return P.createElement(zc,{config:t,addGroup:r,addRule:n,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:i,id:l})}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props.value,t=e&&e.size?e.get(0):null,r=null!=t&&(!Array.isArray(t)||t.length>0);return(0,Qc.Z)((0,k.Z)(o.prototype),"isEmptyCurrentGroup",this).call(this)&&!r}}]),o}(Yc);js.propTypes=Fs(Fs({},Yc.propTypes),{},{parentReordableNodesCnt:La().number,value:La().any,setValue:La().func});const Cs=Gc(Ou("group case_group")(Iu(js)),"case_group");var Es=["type"];function Ls(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ls(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ls(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ps=function(e){var t,r=(null===(t=e.properties)||void 0===t?void 0:t.toObject())||{},n=ks({},r);return e.isParentLocked&&(n.isLocked=!0),r.isLocked&&(n.isTrueLocked=!0),n},Ts={rule:function(e){return P.createElement(Mc,(0,fu.Z)({},Ps(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,config:e.config,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},group:function(e){return P.createElement(Kc,(0,fu.Z)({},Ps(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group:function(e){return P.createElement(ns,(0,fu.Z)({},Ps(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group_ext:function(e){return P.createElement(ds,(0,fu.Z)({},Ps(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},switch_group:function(e){return P.createElement(Ss,(0,fu.Z)({},Ps(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},case_group:function(e){return P.createElement(Cs,(0,fu.Z)({},Ps(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))}},Vs=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(){return(0,F.Z)(this,o),n.apply(this,arguments)}return(0,j.Z)(o,[{key:"render",value:function(){var e,t=this.props,r=t.type,n=(0,Ui.Z)(t,Es),o="array"==(null===(e=n.properties)||void 0===e?void 0:e.get("mode"))?"_ext":"",i=n.config.settings.renderItem,l=Ts[r+o];return i?i(ks(ks({},n),{},{type:r,itemComponent:l}),n.config.ctx):l?l(n):null}}]),o}(P.PureComponent);Vs.propTypes={config:La().object.isRequired,id:La().string.isRequired,groupId:La().string,type:La().oneOf(["rule","group","rule_group","switch_group","case_group"]).isRequired,path:La().any.isRequired,properties:La().any.isRequired,children1:La().any,actions:La().object.isRequired,reordableNodesCnt:La().number,onDragStart:La().func,parentField:La().string,isDraggingTempo:La().bool,isParentLocked:La().bool};var _s=Ca.TreeUtils,Zs=_s.getTotalReordableNodesCountInTree,Is=_s.getTotalRulesCountInTree,Ds=Ca.DefaultUtils,Rs=Ds.createListFromArray,xs=Ds.emptyProperies,As=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),(t=n.call(this,e)).pureShouldComponentUpdate=ru((0,C.Z)(t)),t._updPath(e),t}return(0,j.Z)(o,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.pureShouldComponentUpdate(e,t);if(n){var o=[];for(var i in e)e[i]!==r[i]&&"__isInternalValueChange"!=i&&o.push(i);o.length||(n=!1),1==o.length&&"tree"==o[0]&&e.__isInternalValueChange&&(n=!1)}return n}},{key:"_updPath",value:function(e){var t=e.tree.get("id");this.path=Rs([t])}},{key:"render",value:function(){var e=this.props.tree,t=e.get("type"),r="switch_group"==t,n=r?null:Zs(e),o=r?null:Is(e),i=e.get("id");return P.createElement(Vs,{key:i,id:i,path:this.path,type:t,properties:e.get("properties")||xs(),config:this.props.config,actions:this.props.actions,children1:e.get("children1")||xs(),reordableNodesCnt:n,totalRulesCnt:o,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),o}(P.Component);As.propTypes={tree:La().any.isRequired,config:La().object.isRequired,actions:La().object.isRequired,onDragStart:La().func};const Ns=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(0,Va.$j)((function(e){return{dragging:e.dragging,dragStart:e.dragStart,mousePos:e.mousePos}}),{setDragStart:xa,setDragProgress:Ra,setDragEnd:Aa},null,{context:Pa})(function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=function(t){(0,E.Z)(l,t);var n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,k.Z)(n);if(o){var r=(0,k.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,L.Z)(this,e)});function l(e){var t;return(0,F.Z)(this,l),(t=i.call(this,e))._getEventTarget=function(e,t){return e&&e.__mocked_window||document.body||window},t.onDragStart=function(e,r,n){var o=r.closest(".query-builder");void 0===t._isUsingLegacyReactDomRender&&(t._isUsingLegacyReactDomRender=eu(o)),document.body.classList.add("qb-dragging"),o.classList.add("qb-dragging");var i,l=o.closest(".query-builder-container")||o,a=(l=t._getScrollParent(l)||document.body).scrollTop,u=(t._getDraggableNodeEl(o),t._getPlaceholderNodeEl(o),o.querySelectorAll(".group--children")),c=u.length?u[0]:null;c&&(i=window.getComputedStyle(c,null).getPropertyValue("padding-left"),i=parseInt(i));var s={id:e,x:r.offsetLeft,y:r.offsetTop,w:r.offsetWidth,h:r.offsetHeight,itemInfo:t.tree.items[e],paddingLeft:i},p={id:e,x:r.offsetLeft,y:r.offsetTop,scrollTop:a,clientX:n.clientX,clientY:n.clientY,itemInfo:hu(t.tree.items[e]),treeEl:o,treeElContainer:l},f={clientX:n.clientX,clientY:n.clientY},d=t._getEventTarget(n,p);t.eventTarget=d,d.addEventListener("mousemove",t.onDrag),d.addEventListener("mouseup",t.onDragEnd),t.props.setDragStart(p,s,f)},t.onDrag=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=Object.assign({},t.props.dragging),i=t.props.dragStart,l=o.paddingLeft,a=i.treeElContainer.scrollTop;if(o.itemInfo=t.tree.items[o.id],o.itemInfo){var u={clientX:e.clientX,clientY:e.clientY},c={clientX:i.clientX,clientY:i.clientY};if(e.__mock_dom){var s=i.treeEl,p=t._getDraggableNodeEl(s),f=t._getPlaceholderNodeEl(s);e.__mock_dom({treeEl:s,dragEl:p,plhEl:f})}if(!i.plX){var d=i.treeEl,v=t._getPlaceholderNodeEl(d);v&&(i.plX=v.getBoundingClientRect().left+window.scrollX,i.plY=v.getBoundingClientRect().top+window.scrollY)}var g=i.x,h=i.y,m=i.clientX,y=i.clientY,b=i.scrollTop,O={x:g+(e.clientX-m),y:h+(e.clientY-y)+(a-b)};o.x=O.x,o.y=O.y,o.paddingLeft=l,o.mousePos=u,o.startMousePos=c,t.props.setDragProgress(u,o),n&&t.handleDrag(o,e,r)||e.preventDefault&&e.preventDefault()}},t.onDragEnd=function(){var e=t.props.dragStart.treeEl;t.props.setDragEnd(),e.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),t._cacheEls={};var r=t.eventTarget||t._getEventTarget();r.removeEventListener("mousemove",t.onDrag),r.removeEventListener("mouseup",t.onDragEnd)},t.pureShouldComponentUpdate=ru((0,C.Z)(t)),nu((0,C.Z)(t)),t.onPropsChanged(e),t}return(0,j.Z)(l,[{key:"onPropsChanged",value:function(e){this.tree=mu(e.tree)}},{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=this.pureShouldComponentUpdate(e,t);if(o&&n==t&&r!=e){var i=[];for(var l in e)e[l]!=r[l]&&"dragging"!=l&&"mousePos"!=l&&i.push(l);i.length||(o=!1)}return o}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.dragging,n=this.props.dragStart;if(yu=!1,n&&n.id&&(r.itemInfo=this.tree.items[r.id],r.itemInfo&&(r.itemInfo.index!=n.itemInfo.index||r.itemInfo.parent!=n.itemInfo.parent))){var o=n.treeEl,i=n.treeElContainer,l=this._getPlaceholderNodeEl(o,!0);if(l){var a=l.getBoundingClientRect().left+window.scrollX,u=l.getBoundingClientRect().top+window.scrollY,c=n.plX,s=n.plY,p=i.scrollTop;n.plX=a,n.plY=u,n.itemInfo=hu(r.itemInfo),n.y=l.offsetTop,n.x=l.offsetLeft,n.clientY+=u-s,n.clientX+=a-c,i!=document.body&&(n.scrollTop=p),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t)return null;this._cacheEls||(this._cacheEls={});var n=this._cacheEls[t];return n&&document.contains(n)&&!r||(n=e.querySelector('.group-or-rule-container[data-id="'+t+'"]'),this._cacheEls[t]=n),n}},{key:"_getDraggableNodeEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._cacheEls||(this._cacheEls={});var r=this._cacheEls.draggable;if(r&&document.contains(r)&&!t)return r;var n=e.getElementsByClassName("qb-draggable");return r=n.length?n[0]:null,this._cacheEls.draggable=r,r}},{key:"_getPlaceholderNodeEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._cacheEls||(this._cacheEls={});var r=this._cacheEls.placeholder;if(r&&document.contains(r)&&!t)return r;var n=e.getElementsByClassName("qb-placeholder");return r=n.length?n[0]:null,this._cacheEls.placeholder=r,r}},{key:"_isScrollable",value:function(e){var t=window.getComputedStyle(e)["overflow-y"];return("scroll"===t||"auto"===t)&&e.scrollHeight>e.offsetHeight}},{key:"_getScrollParent",value:function(e){return null==e?null:e===document.body||this._isScrollable(e)?e:this._getScrollParent(e.parentNode)}},{key:"handleDrag",value:function(e,t,r){var n,o,i,l,a=this,u=e.itemInfo,c=e.paddingLeft,s=null,p=this.props.dragStart.treeEl,f=e.id,d=this._getDraggableNodeEl(p),v=this._getPlaceholderNodeEl(p);if(d&&v){if(n=d.getBoundingClientRect(),!(o=v.getBoundingClientRect()).width)return;var g={hrz:0,vrt:0};n.top<o.top?g.vrt=-1:n.bottom>o.bottom&&(g.vrt=1),n.left>o.left?g.hrz=1:n.left<o.left&&(g.hrz=-1);var h,m={x:(l=p.getBoundingClientRect()).left+(l.right-l.left)/2,y:g.vrt>=0?n.bottom:n.top};if(t.__mocked_hov_container)h=t.__mocked_hov_container;else{var y=document.elementFromPoint(m.x,m.y-1);if(!(h=y?y.closest(".group-or-rule-container"):null)&&y&&y.classList.contains("query-builder-container")){var b,O=null==y||null===(b=y.firstChild)||void 0===b?void 0:b.firstChild;O&&O.classList.contains("group-or-rule-container")&&(h=O)}}if(h){var S=h.classList.contains("group-container"),w=h.getAttribute("data-id"),F=h,j=!1,C=!1;if(F){var E=(i=F.getBoundingClientRect()).bottom-i.top,L=this.tree.items[w];if(!L)throw new Error("There is an issue with rendering. If you use Next.js, please check getServerSideProps() method.");var k=null,P=null,T=null,V=null;if(0==g.vrt)T=u,(P=v)&&(k=P.getBoundingClientRect());else if(S){if(g.vrt>0){var _=h.getElementsByClassName("group--header"),I=_.length?_[0]:null;if(I){var D=I.getBoundingClientRect(),R=D.bottom-D.top;n.bottom-D.top>3*R/4&&L.top>e.itemInfo.top&&(T=L,k=D,P=I,C=!0)}}else g.vrt<0&&L.lev>=u.lev&&i.bottom-n.top>=2&&L.top<e.itemInfo.top&&(T=L,k=i,P=F,j=!0);(g.vrt<0?i.bottom-n.top>E-5:n.bottom-i.top>E-5)&&(C||j||(T=L,k=i,P=F),V=L)}else(g.vrt<0?i.bottom-n.top>E/2:n.bottom-i.top>E/2)&&(T=L,k=i,P=F);var x=T&&T.id==f;if(k){var A=n.left-l.left,N=(k.left,l.left,Math.max(0,Math.round(A/c))),M=[],q=[];if(x);else{if(S&&(j?M.push([Ia,T,T.lev+1]):C&&M.push([Da,T,T.lev+1]),V)){var W=0==V.lev,B="case_group"==V.type&&"case_group"!=u.type,G=V.prev&&this.tree.items[V.prev].caseId,$=V.next&&this.tree.items[V.next].caseId;u.caseId==G&&(G=null),u.caseId==$&&($=null);var z=G&&this.tree.items[G],U=$&&this.tree.items[$];g.vrt>0?W?q.push([Ia,V,V.lev+1]):B&&U?q.push([Da,U,U.lev+1]):q.push([_a,V,V.lev]):g.vrt<0&&(W?q.push([Da,V,V.lev+1]):B&&z?q.push([Ia,z,z.lev+1]):q.push([Za,V,V.lev]))}j||C||(g.vrt<0?M.push([Za,T,T.lev]):g.vrt>0&&M.push([_a,T,T.lev]))}var J=function(e){var t=e[1],r=u.caseId?a.tree.items[u.caseId]:null,n=t.caseId?a.tree.items[t.caseId]:null;return[].concat((0,Z.Z)(e),[r,n])};M=M.map(J),q=q.map(J);var H=null,Y=(M=M.filter((function(e){var t=e[0],r=e[1];if((t==Za||t==_a)&&null==r.parent)return!1;if(r.collapsed&&(t==Ia||t==Da))return!1;var n=r.id==u.id;if(!n)for(var o=r;o.parent;)if((o=a.tree.items[o.parent]).id==u.id){n=!0;break}return!n})).map((function(e){var t=e[0],r=e[1],n=(e[2],e[3],e[4],null);return(n=t==Ia||t==Da?r:a.tree.items[r.parent])&&null==n.parent&&(n=null),e[5]=n,e}))).filter((function(e){return a.canMove(u,e[1],e[0],e[3],e[4],e[5],r)}));0==Y.length&&q.length>0&&(Y=q.filter((function(e){return a.canMove(u,e[1],e[0],e[3],e[4],e[5],r)})));var K=Y.map((function(e){return e[2]})),Q=u.lev,X=K.concat(Q),ee=null;-1!=X.indexOf(N)?ee=N:N>Math.max.apply(Math,(0,Z.Z)(X))?ee=Math.max.apply(Math,(0,Z.Z)(X)):N<Math.min.apply(Math,(0,Z.Z)(X))&&(ee=Math.min.apply(Math,(0,Z.Z)(X))),H=Y.find((function(e){return e[2]==ee})),x||H||!Y.length||(H=Y[0]),s=H}}}else Ka.log("out of tree bounds!")}return!!s&&(this.move(u,s[1],s[0],s[3]),!0)}},{key:"canMove",value:function(e,t,r,n,o,i,l){if(!e||!t)return!1;if(e.id===t.id)return!1;var a=this.props.config.settings,u=a.canRegroup,c=a.canRegroupCases,s=a.maxNesting,p=a.maxNumberOfRules,f=a.canLeaveEmptyCase,d=(i?i.lev+1:t.lev)+(e.depth||0),v=r==Za||r==_a,g=r==Da||r==Ia,h=v&&1==t.lev||g&&0==t.lev,m=e.parent!=t.parent,y=g||m,b="case_group"==e.type&&!h||"rule_group"==e.parentType||"rule_group"==t.type||"rule_group"==t.parentType||"case_group"!=e.type&&"case_group"==t.type&&v||"case_group"!=e.type&&"switch_group"==t.type||!c&&e.caseId!=t.caseId,O=t.isLocked||e.isLocked||i&&i.isLocked;if(s&&d>s)return!1;if(y&&(!u||b||O))return!1;if("case_group"!=e.type&&e.caseId!=t.caseId){var S=!!n&&2==n._height,w=o?o.leafsCount+1:0;if(p&&w>p)return!1;if(S&&!f)return!1}if("case_group"==e.type&&(e.isDefaultCase||t.isDefaultCase||"switch_group"==t.type&&r==Ia))return!1;var F=!0;return l&&(F=l(e.node.toJS(),t.node.toJS(),r,i?i.node.toJS():null)),F}},{key:"move",value:function(e,t,r,n){this._isUsingLegacyReactDomRender||(yu=!0),this.props.actions.moveItem(e.path,t.path,r)}},{key:"render",value:function(){return P.createElement(e,(0,fu.Z)({},this.props,{onDragStart:this.onDragStart}))}}]),l}(P.Component),t.propTypes={tree:La().any.isRequired,actions:La().object.isRequired},t}(e,t));return r.displayName="ConnectedSortableContainer",r}(As);function Ms(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var qs=Ca.clone,Ws=Ca.ConfigUtils,Bs=Ws.getFieldConfig,Gs=Ws.getFieldParts,$s=Ws.getFieldPathParts,zs=Ca.RuleUtils,Us=zs.getFieldPathLabels,Js=zs.getWidgetForFieldOp,Hs=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(e){var t;return(0,F.Z)(this,o),t=n.call(this,e),nu((0,C.Z)(t)),t.onPropsChanged(e),t}return(0,j.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.items||["config","field","fieldSrc","fieldType","operator","isFuncArg","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0,n=!this.meta||["config","field","fieldSrc","fieldType","operator","value","placeholder","isFuncArg","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0;r&&(this.items=this.getItems(e)),n&&(this.meta=this.getMeta(e))}},{key:"getItems",value:function(e){var t=e.config,r=e.field,n=e.fieldType,o=e.operator,i=e.parentField,l=e.isFuncArg,a=e.fieldDefinition,u=t.settings.canCompareFieldWithField,c=(t.settings.fieldSeparator,Gs(i,t)),s=i?Bs(t,i):null,p=i?null==s?void 0:s.subfields:t.fields,f=this.filterFields(t,p,r,i,c,o,u,l,a,n);return this.buildOptions(c,t,f,c)}},{key:"getMeta",value:function(e){var t,r=e.config,n=e.field,o=(e.fieldType,e.operator,e.value),i=e.placeholder,l=e.isFuncArg,a=e.parentField,u=r.settings,c=u.fieldPlaceholder,s=u.fieldSeparatorDisplay,p=o,f=!!o,d=n?Bs(r,n):{},v=null==d||null===(t=d.widgets)||void 0===t?void 0:t.field,g=(null==v?void 0:v.widgetProps)||{},h=f?null:l&&i||g.valuePlaceholder||c,m=f?Bs(r,p):null,y=m||{},b=$s(p,r),O=$s(p,r,!0),S=this.getFieldLabel(m,p,r),w=Us(p,r),F=w?w.join(s):null;return(F==S||a)&&(F=null),{placeholder:h,selectedKey:p,selectedKeys:b,selectedPath:O,selectedLabel:S,selectedOpts:y,selectedAltLabel:y.label2,selectedFullLabel:F}}},{key:"filterFields",value:function(e,t,r,n,o,i,l,a,u,c){t=qs(t);var s,p=e.settings.fieldSeparator,f=Bs(e,r),d=Js(e,r,i,"value");return e.widgets[d],s=a?null==u?void 0:u.type:f?f.type:c,function t(n,o){for(var u in n){var c=n[u].subfields,d=(o||[]).concat(u),v=d.join(p),g=Bs(e,v);if(g)if("!struct"==g.type||"!group"==g.type)0==t(c,d)&&delete n[u];else{var h=!(s&&g.type!=s||!a&&v==r),m=l||e.settings.canCompareFieldWithField;m&&(h=h&&m(r,f,v,g,i)),h||delete n[u]}else delete n[u]}return wu()(n).length}(t,o||[]),t}},{key:"buildOptions",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!r)return null;var l=t.settings,a=l.fieldSeparator,u=l.fieldSeparatorDisplay,c=null!=o&&o.length?o.join(a)+a:"";return wu()(r).map((function(l){var a=[].concat((0,Z.Z)(null!=o?o:[]),[l]),s=r[l],p=n.getFieldLabel(s,a,t),f=Us(a,t).join(u);(f==p||e)&&(f=null);var d=s.label2,v=s.tooltip;if(!s.hideForCompare)return"!struct"==s.type||"!group"==s.type?{key:l,path:c+l,label:p,fullLabel:f,altLabel:d,tooltip:v,items:n.buildOptions(e,t,s.subfields,a,p)}:{key:l,path:c+l,label:p,fullLabel:f,altLabel:d,tooltip:v,grouplabel:i}})).filter((function(e){return!!e}))}},{key:"getFieldLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.maxLabelsLength,o=Gs(t,r),i=(null==e?void 0:e.label)||Gr()(o);return Ja(i,n)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setValue,o=e.readonly,i=e.id,l=e.groupId,a=t.settings.renderField,u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ms(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isValueField:!0,config:t,customProps:r,setField:n,readonly:o,items:this.items,id:i,groupId:l},this.meta);return a(u,t.ctx)}}]),o}(P.Component);Hs.propTypes={id:La().string,groupId:La().string,setValue:La().func.isRequired,config:La().object.isRequired,field:La().any,fieldSrc:La().string,fieldType:La().string,value:La().string,operator:La().string,customProps:La().object,readonly:La().bool,parentField:La().string,fieldDefinition:La().object,isFuncArg:La().bool};const Ys=function(e){var t=e.value,r=e.setValue,n=(e.config,e.labelYes),o=e.labelNo,i=e.readonly,l=e.customProps,a=void 0===l?{}:l,u=a.radioYes||{},c=a.radioNo||{},s=function(e){return r("true"==e.target.value)};return P.createElement(P.Fragment,null,P.createElement("input",(0,fu.Z)({type:"radio",value:!0,checked:!!t,disabled:i,onChange:s},u))," ",n,P.createElement("input",(0,fu.Z)({type:"radio",value:!1,checked:!t,disabled:i,onChange:s},c))," ",o)},Ks=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.placeholder,i=e.maxLength,l=e.customProps,a=t||"";return P.createElement("input",(0,fu.Z)({type:"text",value:a,placeholder:o,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:i},l))},Qs=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.placeholder,i=e.maxLength,l=(e.maxRows,e.fullWidth),a=e.customProps,u=t||"";return P.createElement("textarea",(0,fu.Z)({value:u,placeholder:o,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:i,style:{width:l?"100%":void 0}},a))};Ca.moment;const Xs=function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.readonly),o=e.customProps;return P.createElement("input",(0,fu.Z)({type:"date",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}},o))},ep=function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.use12Hours,e.readonly),o=e.customProps;return P.createElement("input",(0,fu.Z)({type:"time",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}},o))};var tp=Ca.moment;const rp=function(e){var t,r=e.value,n=e.setValue,o=(e.config,e.valueFormat),i=(e.use12Hours,e.readonly),l=e.customProps;return t=r?tp(r).format("YYYY-MM-DDTHH:mm"):"",P.createElement("input",(0,fu.Z)({type:"datetime-local",value:t,disabled:i,onChange:function(e){var t=e.target.value;t=""==t?void 0:tp(new Date(t)).format(o),n(t)}},l))};var np=Ca.ListUtils.mapListValues;const op=function(e){var t=e.listValues,r=e.value,n=e.setValue,o=(e.allowCustomValues,e.readonly),i=e.customProps;return P.createElement("select",(0,fu.Z)({multiple:!0,onChange:function(e){return n(function(e){for(var t=[],r=e.options,n=0;n<r.length;n++){var o=r[n];o.selected&&t.push(o.value)}return t.length||(t=void 0),t}(e.target))},value:r,disabled:o},Y()(i,["showSearch","input","showCheckboxes"])),np(t,(function(e){var t=e.title,r=e.value;return P.createElement("option",{key:r,value:r},t)})))};var ip=Ca.ListUtils.mapListValues;const lp=function(e){var t=e.listValues,r=e.value,n=e.setValue,o=(e.allowCustomValues,e.readonly),i=e.customProps,l=null!=r;return P.createElement("select",(0,fu.Z)({onChange:function(e){return n(e.target.value)},value:l?r:"",disabled:o},Y()(i,["showSearch","input"])),!l&&P.createElement("option",{disabled:!0,value:""}),ip(t,(function(e){var t=e.title,r=e.value;return P.createElement("option",{key:r,value:r},t)})))},ap=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.min,i=e.max,l=e.step,a=e.placeholder,u=e.customProps,c=null==t?"":t;return P.createElement("input",(0,fu.Z)({type:"number",value:c,placeholder:a,disabled:n,min:o,max:i,step:l,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)}},u))},up=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.min,i=e.max,l=e.step,a=e.placeholder,u=e.customProps,c=void 0===u?{}:u,s=c.input||{},p=c.slider||c,f=function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)},d=null==t?"":t;return P.createElement("div",{style:{display:"inline-flex"}},P.createElement("input",(0,fu.Z)({key:"number",type:"number",value:d,placeholder:a,disabled:n,min:o,max:i,step:l,onChange:f},s)),P.createElement("input",(0,fu.Z)({key:"range",type:"range",value:d,disabled:n,min:o,max:i,step:l,onChange:f},p)))},cp=function(e){var t=e.items,r=e.setField,n=e.selectedKey,o=e.readonly,i=e.errorText,l=null!=n;return P.createElement("select",{onChange:function(e){return r(e.target.value)},value:l?n:"",disabled:o,style:{color:i?"red":null}},!l&&P.createElement("option",{disabled:!0,value:""}),function e(t){return t.map((function(t){var r=t.items,n=t.path,o=t.label,i=t.disabled,l=t.matchesType;if(r)return P.createElement("optgroup",{disabled:i,key:n,label:o},e(r));var a=l?{fontWeight:"bold"}:{};return P.createElement("option",{disabled:i,key:n,value:n,style:a},o)}))}(t))},sp=function(e){var t,r=e.id,n=e.not,o=e.setNot,i=e.conjunctionOptions,l=e.setConjunction,a=e.disabled,u=e.readonly,c=e.config,s=e.showNot,p=e.notLabel,f=Object.keys(i).length,d=a,v=c.settings.forceShowConj||f>1&&!d,g=function(e){return l(e.target.value)};return[s&&(t="not",[P.createElement("input",{key:r+t,type:"checkbox",id:r+t,checked:n,disabled:u,onChange:function(e){return o(e.target.checked)}}),P.createElement("label",{key:r+t+"label",htmlFor:r+t},p||"NOT")]),v&&Object.keys(i).map((function(e){var t=i[e],r=t.id,n=t.name,o=t.label,c=t.checked,s=l.isDummyFn?"__dummy":"";return!u&&!a||c?[P.createElement("input",{key:r+s,type:"radio",id:r+s,name:n+s,checked:c,disabled:u||a,value:e,onChange:g}),P.createElement("label",{key:r+s+"label",htmlFor:r+s},o)]:null}))]};var pp={addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"};const fp=function(e){var t=e.type,r=e.label,n=e.onClick,o=e.readonly,i=r||pp[t];return P.createElement("button",{onClick:n,type:"button",disabled:o},i)},dp=function(e){var t=e.type,r={}[t];return r||"drag"!==t||(r=P.createElement(Zu,null)),r||null},vp=function(e){var t=e.children;return e.config,P.createElement(P.Fragment,null,t)},gp=function(e){e.config;var t=e.valueSources,r=e.valueSrc,n=(e.title,e.setValueSrc),o=e.readonly;return P.createElement("select",{onChange:function(e){return n(e.target.value)},value:r||"",disabled:o},function(e){return e.map((function(e){var t=(0,V.Z)(e,2),r=t[0],n=t[1];return P.createElement("option",{key:r,value:r},n.label)}))}(t))},hp=function(e){var t=e.value,r=e.setValue,n=e.label,o=e.id,i=(e.config,e.type);return[P.createElement("input",{key:o+i,type:"checkbox",id:o+i,checked:!!t,onChange:function(e){return r(e.target.checked)}}),P.createElement("label",{key:o+i+"label",htmlFor:o+i},n)]},mp=function(e){var t=e.onOk,r=(e.okText,e.cancelText,e.title);confirm(r)&&t()};var yp=function(e){return e.config,e.children};var bp=function(e){(0,E.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,k.Z)(t);if(r){var o=(0,k.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,L.Z)(this,e)});function o(){var e;(0,F.Z)(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).handleChange=function(t){e.props.setOption("proximity",parseInt(t))},e}return(0,j.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.defaults,r=e.options,n=e.config,o=e.optionLabel,i=e.optionPlaceholder,l=e.customProps,a=e.minProximity,u=e.maxProximity,c=e.optionTextBefore,s=e.readonly,p=n.settings,f=n.widgets,d=n.ctx,v=t?t.proximity:void 0,g=p.showLabels,h=r.get("proximity",v),m=tc()(a,u+1).map((function(e){return{title:e,value:e}})),y=f.select.factory,b=function(e){return y(e,d)};return P.createElement("div",{className:"operator--PROXIMITY"},P.createElement("div",{className:"operator--options"},g&&P.createElement("label",{className:"rule--label"},o),!g&&c&&P.createElement("div",{className:"operator--options--sep"},P.createElement("span",null,c)),P.createElement(b,(0,fu.Z)({config:n,value:h,listValues:m,setValue:this.handleChange,readonly:s,placeholder:i},l))),P.createElement("div",{className:"operator--widgets"},this.props.children))}}]),o}(P.PureComponent);function Op(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Op(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Op(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}bp.propTypes={config:La().object.isRequired,setOption:La().func.isRequired,options:La().any.isRequired,minProximity:La().number,maxProximity:La().number,optionPlaceholder:La().string,optionTextBefore:La().string,optionLabel:La().string,customProps:La().object,readonly:La().bool},bp.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null};var wp={conjunctions:Sp({},Cl.conjunctions),operators:Sp(Sp({},Cl.operators),{},{proximity:Sp(Sp({},Cl.operators.proximity),{},{options:Sp(Sp({},Cl.operators.proximity.options),{},{factory:function(e,t){return(0,t.RCE)(t.O.ProximityOperator,e)}})})}),widgets:{text:Sp(Sp({},Cl.widgets.text),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTextWidget,e)}}),textarea:Sp(Sp({},Cl.widgets.textarea),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTextAreaWidget,e)}}),number:Sp(Sp({},Cl.widgets.number),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaNumberWidget,e)}}),slider:Sp(Sp({},Cl.widgets.slider),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaSliderWidget,e)}}),select:Sp(Sp({},Cl.widgets.select),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaSelectWidget,e)}}),multiselect:Sp(Sp({},Cl.widgets.multiselect),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaMultiSelectWidget,e)}}),date:Sp(Sp({},Cl.widgets.date),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaDateWidget,e)}}),time:Sp(Sp({},Cl.widgets.time),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTimeWidget,e)}}),datetime:Sp(Sp({},Cl.widgets.datetime),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaDateTimeWidget,e)}}),boolean:Sp(Sp({},Cl.widgets.boolean),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaBooleanWidget,e)}}),field:Sp(Sp({},Cl.widgets.field),{},{factory:function(e,t){return(0,t.RCE)(t.W.ValueFieldWidget,e)},customProps:{showSearch:!0}}),func:Sp(Sp({},Cl.widgets.func),{},{factory:function(e,t){return(0,t.RCE)(t.W.FuncWidget,e)},customProps:{}}),case_value:Sp(Sp({},Cl.widgets.case_value),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTextWidget,e)}})},types:Sp(Sp({},Cl.types),{},{select:Sp(Sp({},Cl.types.select),{},{widgets:Sp(Sp({},Cl.types.select.widgets),{},{select:Sp(Sp({},Cl.types.select.widgets.select),{},{widgetProps:{customProps:{showSearch:!0}}})})})}),settings:Sp(Sp({},Cl.settings),{},{renderField:function(e,t){return(0,t.RCE)(t.W.VanillaFieldSelect,e)},renderOperator:function(e,t){return(0,t.RCE)(t.W.VanillaFieldSelect,e)},renderFunc:function(e,t){return(0,t.RCE)(t.W.VanillaFieldSelect,e)},renderConjs:function(e,t){return(0,t.RCE)(t.W.VanillaConjs,e)},renderSwitch:function(e,t){return(0,t.RCE)(t.W.VanillaSwitch,e)},renderButton:function(e,t){return(0,t.RCE)(t.W.VanillaButton,e)},renderIcon:function(e,t){return(0,t.RCE)(t.W.VanillaIcon,e)},renderButtonGroup:function(e,t){return(0,t.RCE)(t.W.VanillaButtonGroup,e)},renderProvider:function(e,t){return(0,t.RCE)(t.W.VanillaProvider,e)},renderValueSources:function(e,t){return(0,t.RCE)(t.W.VanillaValueSources,e)},renderFieldSources:function(e,t){return(0,t.RCE)(t.W.VanillaValueSources,e)},renderConfirm:function(e,t){return(0,t.W.vanillaConfirm)(e)},renderSwitchPrefix:"Conditions",customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5,renderSize:"small",maxLabelsLength:100,showLock:!1,showNot:!0,forceShowConj:!1,groupActionsPosition:"topRight"}),ctx:Sp(Sp({},Cl.ctx),{},{W:Sp({},O),O:Sp({},S),RCE:function(e,t){return P.createElement(e,t)}})};const Fp=wp=Ca.ConfigMixins.removeMixins(wp,["rangeslider","treeselect","treemultiselect"]);var jp=r(77837),Cp=r.n(jp);function Ep(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ep(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ep(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kp=Ca.Autocomplete,Pp=kp.mergeListValues,Tp=kp.listValueToOption,Vp=kp.optionToListValue,_p=kp.optionsToListValues,Zp=kp.fixListValuesGroupOrder,Ip=Ca.ListUtils,Dp=Ip.mapListValues,Rp=Ip.listValuesToArray,xp=Ip.getListValue,Ap=Ip.makeCustomListValue,Np=Ip.searchListValue;function Mp(e){return new Promise((function(t){setTimeout(t,e)}))}Ip.getItemInListValues;const qp=function(e,t){var r=e.asyncFetch,n=e.useLoadMore,o=e.useAsyncSearch,i=e.forceAsyncSearch,l=e.asyncListValues,a=e.listValues,u=e.allowCustomValues,c=e.value,s=e.setValue,p=e.placeholder,f=e.config,d=t.debounceTimeout,v=t.multiple,g=t.uif,h=["LOAD_MORE","LOADING_MORE"],m="Load more...",y="Loading more...",b=i?"Type to search":p,O=P.useState(!1),S=(0,V.Z)(O,2),w=S[0],F=S[1],j=P.useState(void 0),C=(0,V.Z)(j,2),E=C[0],L=C[1],k=P.useState(0),T=(0,V.Z)(k,2),_=T[0],I=T[1],R=P.useState(!1),x=(0,V.Z)(R,2),A=x[0],N=x[1],M=P.useState(""),q=(0,V.Z)(M,2),W=q[0],B=q[1],G=P.useState(void 0),$=(0,V.Z)(G,2),z=$[0],U=$[1],J=P.useRef(0),H=P.useRef(0),Y=P.useRef(!1),K=Rp(l),Q=r?l?Pp(z,K,!0):z:a,X=r?z:a;u&&W&&!Np(W,z)&&(X=Pp(X,[Ap(W)],!0)),!r||z||!l||W||w||"antd"!==g||(X=Q),r&&!u&&l&&"mui"===g&&(X=Pp(X,K,!0,!0));var ee=_>0,te=w&&r&&void 0===z&&(!i||W),re=te&&ee,ne=!re&&Q&&Q.length>0&&E&&E.hasMore&&(E.filter||"")===W,oe=!ee&&ne,ie=Dp(X,Tp),le=null!=c,ae=!v&&le?xp(c,Q):null,ue=function(){var e=(0,Ji.Z)(D().mark((function e(){var t,o,i,l,a,u,c,s,p,d,v,g,h,m,y=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:null,!(o=y.length>1&&void 0!==y[1]&&y[1])&&E&&L(void 0),i=o&&z?z.length:0,l=o&&E||!n&&{pageSize:0},a=++J.current,e.next=8,r.call(null==f?void 0:f.ctx,t,i,l);case 8:if(u=e.sent,J.current==a&&H.current){e.next=12;break}return e.abrupt("return",null);case 12:return c=null!=u&&u.values?u:{values:u},s=c.values,p=c.hasMore,d=c.meta,v=Rp(s),o?(h=Pp(z,v,!1),g=h.length>z.length):(h=v,n&&(g=h.length>0)),(m=null!=p||null!=d||null!=g?Lp(Lp(Lp(Lp({},null!=g?{hasMore:g}:{}),null!=p?{hasMore:p}:{}),null!=d?d:{}),{},{filter:t}):void 0)&&L(m),e.abrupt("return",h);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,Ji.Z)(D().mark((function e(){var t,r,n,o=arguments;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:null,r=o.length>1&&void 0!==o[1]&&o[1],I((function(e){return e+1})),N(r),e.next=6,ue(t,r);case 6:if(n=e.sent,H.current){e.next=9;break}return e.abrupt("return");case 9:null!=n&&U(n),I((function(e){return e-1})),N(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=P.useCallback(Cp()(ce,d),[]);P.useEffect((function(){return H.current++,te&&0==_&&0==J.current&&(0,Ji.Z)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:case"end":return e.stop()}}),e)})))(),function(){H.current--}}),[te]);var pe=function(){F(!0)},fe=function(){var e=(0,Ji.Z)(D().mark((function e(t){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Y.current)?(Y.current=!1,v&&F(!1)):F(!1),"mui"!==g||r){e.next=6;break}return e.next=6,ve(null,"","my-reset");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=(0,Ji.Z)(D().mark((function e(t,n,o){var i,l,a,p,f,d,h,m,y,b,O,S,F,j,C;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=v&&"mui"===g&&"clear"===o,a=!v&&"mui"===g&&"clear"===o&&"change"===(null==t?void 0:t.type),"mui"===g&&(o=n,n=v?o.map((function(e){var t;return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:e})):null!==(p=null===(f=o)||void 0===f?void 0:f.value)&&void 0!==p?p:o),d=v&&Array.isArray(o)&&o.map((function(e){return null==e?void 0:e.specialValue})).find((function(e){return!!e}))||(null===(i=o)||void 0===i?void 0:i.specialValue),v&&n&&!Array.isArray(n)&&(n=[].concat((0,Z.Z)(c||[]),[n]),o=null),!(l&&0===n.length&&W&&w||a)){e.next=8;break}return e.abrupt("return");case 8:if(h=v&&n.length&&n.length>(c||[]).length&&n[n.length-1]==W&&!xp(W,z),"LOAD_MORE"!=d){e.next=16;break}return B(W),Y.current=!0,e.next=14,ce(W,!0);case 14:e.next=32;break;case 16:if("LOADING_MORE"!=d){e.next=20;break}Y.current=!0,e.next=32;break;case 20:if(!v){e.next=30;break}if(m=_p(n,Q,u),y=(0,V.Z)(m,2),b=y[0],O=y[1],s(b,r?O:void 0),!h){e.next=28;break}return e.next=26,Mp(0);case 26:return e.next=28,ve(null,"","my-reset");case 28:e.next=32;break;case 30:S=Vp(n,Q,u),F=(0,V.Z)(S,2),j=F[0],C=F[1],s(j,r?C:void 0);case 32:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),ve=function(){var e=(0,Ji.Z)(D().mark((function e(t,r,n){var l,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l="mui"===g&&"reset"===n,(a=r)!==m&&a!==y&&!l){e.next=4;break}return e.abrupt("return");case 4:if(r==W){e.next=13;break}if(B(a),!o||i&&!a){e.next=12;break}return e.next=10,se(a);case 10:e.next=13;break;case 12:o&&i&&U([]);case 13:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return{options:"mui"===g?Zp(ie):ie,listValues:Q,hasValue:le,selectedListValue:ae,open:w,onOpen:pe,onClose:fe,onDropdownVisibleChange:function(e){e?pe():fe()},onChange:de,inputValue:W,onInputChange:ve,canShowLoadMore:oe,isInitialLoading:re,isLoading:ee,isLoadingMore:A,isSpecialValue:function(e){var t=(null==e?void 0:e.specialValue)||(null==e?void 0:e.value);return h.includes(t)},extendOptions:function(e){var t=(0,Z.Z)(e);return n&&(oe?t.push({specialValue:"LOAD_MORE",title:m}):A&&t.push({specialValue:"LOADING_MORE",title:y,disabled:!0})),t},getOptionSelected:function(e,t){if(null==t)return null;var r=null!=t.value?t.value:t;return e.value===r},getOptionDisabled:function(e){return e&&e.disabled},getOptionIsCustom:function(e){var t;if(null!=e&&e.isCustom)return!0;var r=null!==(t=null==e?void 0:e.value)&&void 0!==t?t:e,n=xp(r,Q);return(null==n?void 0:n.isCustom)||!1},getOptionLabel:function(e){if(null==e)return null;var t=null!=e.value?e:Tp(xp(e,Q));return!t&&e.specialValue?e.title:!t&&u?e:t?t.title||t.label:e},aPlaceholder:b}};function Wp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wp(Object(r),!0).forEach((function(t){(0,T.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Gp=Bp(Bp({},Ca),{},{ReactUtils:b,DragIcon:Zu})},40164:(e,t,r)=>{var n={"./es-us":88218,"./es-us.js":88218,"./ru":31313,"./ru.js":31313};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=40164}}]);
//# sourceMappingURL=554.bundle.js.map